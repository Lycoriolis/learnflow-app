var D=Object.defineProperty,N=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var R=(o,s,e)=>s in o?D(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,c=(o,s)=>{for(var e in s||(s={}))I.call(s,e)&&R(o,e,s[e]);if(A)for(var e of A(s))S.call(s,e)&&R(o,e,s[e]);return o},w=(o,s)=>N(o,U(s));var v=(o,s,e)=>R(o,typeof s!="symbol"?s+"":s,e);var t=(o,s,e)=>new Promise((r,a)=>{var i=h=>{try{m(e.next(h))}catch(T){a(T)}},n=h=>{try{m(e.throw(h))}catch(T){a(T)}},m=h=>h.done?r(h.value):Promise.resolve(h.value).then(i,n);m((e=e.apply(o,s)).next())});import{g as O,a as B,c as y,b as l,T as u,f as C,d as p,h as q,e as g,u as F,q as b,w as P}from"./D8i9UXqZ.js";import{B as x,S as f}from"./B9hwOBZE.js";class d extends x{constructor(){super(...arguments);v(this,"db",O());v(this,"auth",B())}getForumCategories(){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const e=y(this.db,"forumCategories");return(yield l(e)).docs.map(a=>c({id:a.id},a.data()))}))})}createForumTopic(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=this.auth.currentUser;if(!r)throw new f("Unauthorized","UNAUTHORIZED",401);const a=y(this.db,"forumTopics"),i=w(c({},e),{authorId:r.uid,authorName:r.displayName||"Anonymous",createdAt:u.now(),updatedAt:u.now(),viewCount:0,replyCount:0,isPinned:!1,isLocked:!1}),n=yield C(a,i);return c({id:n.id},i)}))})}createForumPost(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=this.auth.currentUser;if(!r)throw new f("Unauthorized","UNAUTHORIZED",401);const a=y(this.db,"forumPosts"),i=w(c({},e),{authorId:r.uid,authorName:r.displayName||"Anonymous",createdAt:u.now(),updatedAt:u.now(),upvotes:0,downvotes:0,isAnswer:!1}),n=yield C(a,i);return c({id:n.id},i)}))})}createCategory(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=y(this.db,"forumCategories"),a=w(c({},e),{topicCount:0,postCount:0,createdAt:u.now(),updatedAt:u.now()}),i=yield C(r,a);return c({id:i.id},a)}))})}deleteCategory(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=p(this.db,"forumCategories",e);yield q(r)}))})}getCategory(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=p(this.db,"forumCategories",e),a=yield g(r);if(!a.exists())throw new f("Category not found","NOT_FOUND",404);return c({id:a.id},a.data())}))})}updateCategory(e,r){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const a=p(this.db,"forumCategories",e),i=w(c({},r),{updatedAt:u.now()});yield F(a,i);const n=yield g(a);return c({id:n.id},n.data())}))})}getForumTopic(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=p(this.db,"forumTopics",e),a=yield g(r);if(!a.exists())throw new f("Topic not found","NOT_FOUND",404);return c({id:a.id},a.data())}))})}updateTopic(e,r){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const a=p(this.db,"forumTopics",e),i=w(c({},r),{updatedAt:u.now()});yield F(a,i);const n=yield g(a);return c({id:n.id},n.data())}))})}deleteTopic(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=p(this.db,"forumTopics",e);yield q(r)}))})}getCategories(){return t(this,null,function*(){return this.getForumCategories()})}getTopics(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=y(this.db,"forumTopics");let a=b(r);return e&&(a=b(a,P("categoryId","==",e))),(yield l(a)).docs.map(n=>c({id:n.id},n.data()))}))})}getTopic(e){return t(this,null,function*(){return this.getForumTopic(e)})}getPostsByTopicId(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=y(this.db,"forumPosts"),a=b(r,P("topicId","==",e));return(yield l(a)).docs.map(n=>c({id:n.id},n.data()))}))})}updatePost(e,r){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const a=p(this.db,"forumPosts",e),i=w(c({},r),{updatedAt:u.now()});yield F(a,i);const n=yield g(a);return c({id:n.id},n.data())}))})}deletePost(e){return t(this,null,function*(){return this.handleRequest(()=>t(this,null,function*(){const r=p(this.db,"forumPosts",e);yield q(r)}))})}}const z=o=>t(null,null,function*(){const e=yield new d().createForumTopic(o);if(e.error)throw e.error;return e.data}),H=()=>t(null,null,function*(){const s=yield new d().getForumCategories();if(s.error)throw s.error;return s.data||[]}),Z=o=>t(null,null,function*(){const e=yield new d().createForumPost(o);if(e.error)throw e.error;return e.data}),_=o=>t(null,null,function*(){const e=yield new d().createCategory(o);if(e.error)throw e.error;return e.data}),j=o=>t(null,null,function*(){const e=yield new d().deleteCategory(o);if(e.error)throw e.error}),L=o=>t(null,null,function*(){const e=yield new d().getCategory(o);if(e.error)throw e.error;return e.data}),G=(o,s)=>t(null,null,function*(){const r=yield new d().updateCategory(o,s);if(r.error)throw r.error;return r.data}),J=o=>t(null,null,function*(){const e=yield new d().getForumTopic(o);if(e.error)throw e.error;return e.data}),K=(o,s)=>t(null,null,function*(){const r=yield new d().updateTopic(o,s);if(r.error)throw r.error;return r.data}),M=()=>t(null,null,function*(){const s=yield new d().getCategories();if(s.error)throw s.error;return s.data||[]}),Q=o=>t(null,null,function*(){const e=yield new d().getTopics(o);if(e.error)throw e.error;return e.data||[]}),V=o=>t(null,null,function*(){const e=yield new d().getTopic(o);if(e.error)throw e.error;return e.data}),X=o=>t(null,null,function*(){const e=yield new d().getPostsByTopicId(o);if(e.error)throw e.error;return e.data||[]});export{J as a,M as b,_ as c,j as d,K as e,z as f,L as g,Q as h,V as i,X as j,H as k,Z as l,G as u};
//# sourceMappingURL=BWnoWNEX.js.map
