var w=Object.defineProperty;var m=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var f=(a,t,e)=>t in a?w(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,v=(a,t)=>{for(var e in t||(t={}))h.call(t,e)&&f(a,e,t[e]);if(m)for(var e of m(t))D.call(t,e)&&f(a,e,t[e]);return a};var d=(a,t,e)=>new Promise((o,s)=>{var c=n=>{try{i(e.next(n))}catch(u){s(u)}},r=n=>{try{i(e.throw(n))}catch(u){s(u)}},i=n=>n.done?o(n.value):Promise.resolve(n.value).then(c,r);i((e=e.apply(a,t)).next())});import{f as I,c as g,d as S,u as b,q as E,l as R,o as U,w as q,b as T}from"./D8i9UXqZ.js";import{u as p,d as l}from"./BRK8y73W.js";import{g as y}from"./CToUoAZH.js";function z(a,t,e){return d(this,null,function*(){var c;const o={eventType:a,timestampStart:Date.now()},s=y(p);if(s)o.userId=s.uid;else{const r=(c=globalThis==null?void 0:globalThis.localStorage)==null?void 0:c.getItem("userId");r&&(o.userId=r)}t!==void 0&&(o.referenceId=t);try{return(yield I(g(l,"activities"),o)).id}catch(r){return console.error("Error logging activity start:",r),""}})}function C(a){return d(this,null,function*(){const t=S(l,"activities",a);yield b(t,{timestampEnd:Date.now()})})}function F(a,t,e){return d(this,null,function*(){var r;const o=Date.now(),s={eventType:a,timestampStart:o,timestampEnd:o},c=y(p);if(c)s.userId=c.uid;else{const i=(r=globalThis==null?void 0:globalThis.localStorage)==null?void 0:r.getItem("userId");i&&(s.userId=i)}t!==void 0&&(s.referenceId=t),e!==void 0&&(s.metadata=e);try{yield I(g(l,"activities"),s)}catch(i){console.error("Error logging event:",i)}})}function A(a,t=10){return d(this,null,function*(){const e=E(g(l,"activities"),q("userId","==",a),U("timestampStart","desc"),R(t));return(yield T(e)).docs.map(s=>v({id:s.id},s.data()))})}function G(a=10){return d(this,null,function*(){var e;const t=(e=globalThis==null?void 0:globalThis.localStorage)==null?void 0:e.getItem("userId");return t?A(t,a):[]})}export{C as a,F as b,G as f,z as l};
//# sourceMappingURL=DN_AKHeO.js.map
