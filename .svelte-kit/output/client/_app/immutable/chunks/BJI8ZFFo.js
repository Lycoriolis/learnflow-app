import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as pe,b as ye,c as i,e as o,r as t,l as Ae,a as Ee,f as xa,s as k,m as B,g as e,t as _,j as re,n as ba,i as pa}from"./D8Zr53n5.js";import{e as G,r as ya}from"./CCLz0Z0F.js";import{t as n,a as d,c as _a,b as Ne}from"./ByokzzJe.js";import{i as _e}from"./BzVavbfz.js";import{c as he}from"./DyX_nzx0.js";import{s as y}from"./UpSy6tP0.js";import{i as f}from"./BAqAra_5.js";import{e as te,i as oe}from"./8AErAcLY.js";import{s as L,r as ha}from"./DpNHaJTn.js";import{s as O}from"./Cw_GgyMt.js";import{p as V}from"./D0guHZRM.js";import{s as Re,a as be}from"./CYIMW-vo.js";import{p as ka}from"./C9hOER03.js";import{u as He}from"./QfzvdxsM.js";import{b as Ue}from"./Djn-aou_.js";import{b as wa}from"./dleV8ATl.js";import{p as $a}from"./Bfc47y5P.js";var Ca=n('<div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8"><div><h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Community Forums</h1> <p class="text-gray-600 dark:text-gray-400">Discuss courses, ask questions, and connect with other learners</p></div> <div class="mt-4 md:mt-0 flex space-x-2"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium flex items-center"><i class="fas fa-plus mr-2"></i> New Topic</button> <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md text-sm font-medium flex items-center"><i class="fas fa-bell mr-2"></i> My Subscriptions</button></div></div>');function yr(Y,w){pe(w,!1);const q=he();function H(){q("newTopic")}function j(){q("toggleSubscriptions")}_e();var T=Ca(),F=o(i(T),2),h=i(F),S=o(h,2);t(F),t(T),G("click",h,H),G("click",S,j),d(Y,T),ye()}const Ta=ka("learnflow-subscribed-topics",[]);var Pa=n('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-8 text-center"><p class="text-gray-600 dark:text-gray-400">No discussions found.</p></div>'),Sa=n('<i class="fas fa-thumbtack text-indigo-500 mr-1 text-xs"></i>'),ja=n('<i class="fas fa-lock text-gray-500 mr-1 text-xs"></i>'),Da=n("<span> </span>"),La=n('<span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800"><i class="fas fa-code mr-1"></i>Code</span>'),Fa=n('<span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"><i class="fas fa-check-circle mr-1"></i>Resolved</span>'),Ia=n('<a class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 hover:bg-gray-200"> </a>'),Ma=n('<div class="flex flex-wrap gap-1 mt-2"></div>'),qa=n('<a target="_blank" rel="noopener" class="inline-flex items-center text-xs text-indigo-600 hover:underline"><i class="fas fa-external-link-alt mr-1"></i> </a>'),Na=n('<div class="mt-2"><span class="text-xs text-gray-500">Resources:</span> <div class="flex flex-wrap gap-2 mt-1"></div></div>'),Ua=n("<a><i></i> </a>"),Aa=n('<img class="w-5 h-5 rounded-full mr-1.5">'),Ea=n('<img class="w-4 h-4 rounded-full mr-1">'),Ra=n('<div class="mt-2 text-xs text-gray-500 flex items-center"><span>Last reply by</span> <div class="flex items-center ml-1"><!> <a class="font-medium hover:underline text-gray-700"> </a></div> <span class="mx-1">·</span><span> </span></div>'),Ha=n('<span class="ml-1 animate-spin">⏳</span>'),Oa=n('<span class="ml-1 animate-spin">⏳</span>'),Va=n('<span class="ml-1 animate-spin">⏳</span>'),Ya=n('<button class="px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded"><i class="fas fa-bell-slash mr-1"></i>Unsubscribe <!></button>'),Ba=n('<span class="ml-1 animate-spin">⏳</span>'),Ga=n('<button class="px-2 py-1 text-xs bg-indigo-100 text-indigo-800 rounded"><i class="fas fa-bell mr-1"></i>Subscribe <!></button>'),Ja=n('<div class="p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors flex justify-between items-start"><div class="flex-1"><div class="flex items-start justify-between"><div><a class="text-lg font-medium text-gray-900 dark:text-white hover:text-indigo-600 dark:hover:text-indigo-400"><!> <!> </a> <div class="flex flex-wrap gap-1 mt-1"><!> <!> <!></div> <!> <!></div> <div class="ml-2"><!></div></div> <div class="mt-2 flex items-center text-sm text-gray-500"><div class="flex items-center"><!> <a class="font-medium hover:underline text-gray-700"> </a> <span class="mx-1.5">·</span><span> </span></div> <div class="flex items-center ml-auto space-x-4"><div class="flex items-center"><i class="fas fa-eye mr-1 text-gray-400"></i><span> </span></div> <div class="flex items-center"><i class="fas fa-comment-alt mr-1 text-gray-400"></i><span> </span></div></div></div> <!></div> <div class="ml-4 flex flex-col items-end gap-2"><div class="flex flex-col items-center space-y-1"><button><i class="fas fa-arrow-up"></i> <!></button> <span class="text-sm text-gray-600 dark:text-gray-400"> </span> <button><i class="fas fa-arrow-down"></i> <!></button> <span class="text-sm text-gray-600 dark:text-gray-400"> </span></div> <!></div></div>'),za=n('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"><div class="divide-y divide-gray-200 dark:divide-gray-700"></div></div>');function _r(Y,w){pe(w,!1);const[q,H]=Re(),j=()=>be(He,"$user",q),T=()=>be(Ta,"$subscribedTopics",q),F=B();function h(c){const g=new Date(c),D=new Date().getTime()-g.getTime(),a=Math.floor(D/(1e3*60*60*24)),E=Math.floor(D/(1e3*60*60)),R=Math.floor(D/(1e3*60));return R<60?`${R} min${R!==1?"s":""} ago`:E<24?`${E} hour${E!==1?"s":""} ago`:a===1?"Yesterday":a<7?`${a} days ago`:g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function S(c){return $().find(g=>g.id===c)}function I(c,g=!0){const C={blue:["blue-100 dark:blue-900/30","blue-800 dark:blue-300","blue-500 dark:blue-400"],green:["green-100 dark:green-900/30","green-800 dark:green-300","green-500 dark:green-400"],gray:["gray-100 dark:gray-700","gray-800 dark:gray-300","gray-500 dark:gray-400"]}[c]||["gray-100","gray-800","gray-500"];return g?`bg-${C[0]} text-${C[2]} dark:bg-${C[1]} dark:text-${C[2]}`:`text-${C[2]} dark:text-${C[1]}`}let P=V(w,"topics",24,()=>[]),$=V(w,"categories",24,()=>[]),M=V(w,"votingTopicId",8,null),N=V(w,"subscribingTopicId",8,null),U=V(w,"unsubscribingTopicId",8,null);const A=he();function se(c){A("subscribe",c)}function de(c){A("unsubscribe",c)}function J(c,g){A("vote",{id:c,type:g})}Ae(()=>j(),()=>{k(F,j())}),Ee(),_e();var z=_a(),X=xa(z);{var K=c=>{var g=Pa();d(c,g)},Z=c=>{var g=za(),C=i(g);te(C,5,P,D=>D.id,(D,a)=>{var E=Ja(),R=i(E),l=i(R),v=i(l),x=i(v),ee=i(x);{var ne=r=>{var s=Sa();d(r,s)};f(ee,r=>{e(a).isPinned&&r(ne)})}var ke=o(ee,2);{var Oe=r=>{var s=ja();d(r,s)};f(ke,r=>{e(a).isLocked&&r(Oe)})}var Ve=o(ke);t(x);var le=o(x,2),we=i(le);{var Ye=r=>{var s=Da(),m=i(s,!0);t(s),_(b=>{O(s,1,`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium 
                      ${(e(a).difficulty==="beginner"?"bg-green-100 text-green-800":e(a).difficulty==="intermediate"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800")??""}`),y(m,b)},[()=>e(a).difficulty.charAt(0).toUpperCase()+e(a).difficulty.slice(1)],re),d(r,s)};f(we,r=>{e(a).difficulty&&r(Ye)})}var $e=o(we,2);{var Be=r=>{var s=La();d(r,s)};f($e,r=>{e(a).hasCodeExamples&&r(Be)})}var Ge=o($e,2);{var Je=r=>{var s=Fa();d(r,s)};f(Ge,r=>{e(a).isResolved&&r(Je)})}t(le);var Ce=o(le,2);{var ze=r=>{var s=Ma();te(s,5,()=>e(a).tags,oe,(m,b)=>{var u=Ia(),p=i(u);t(u),_(()=>{L(u,"href",`/forums/tag/${e(b)}`),y(p,`#${e(b)??""}`)}),d(m,u)}),t(s),d(r,s)};f(Ce,r=>{var s;(s=e(a).tags)!=null&&s.length&&r(ze)})}var Ke=o(Ce,2);{var Qe=r=>{var s=Na(),m=o(i(s),2);te(m,5,()=>e(a).resourceLinks,oe,(b,u)=>{var p=qa(),me=o(i(p),1,!0);t(p),_(()=>{L(p,"href",e(u).url),y(me,e(u).title)}),d(b,p)}),t(m),t(s),d(r,s)};f(Ke,r=>{e(a).resourceLinks&&r(Qe)})}t(v);var Te=o(v,2),We=i(Te);{var Xe=r=>{var s=Ua();const m=re(()=>S(e(a).category));var b=i(s),u=o(b);t(s),_(p=>{L(s,"href",`/forums/category/${e(a).category}`),O(s,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p??""}`),O(b,1,`fas ${e(m).icon} mr-1`),y(u,` ${e(m).name??""}`)},[()=>I(e(m).color)],re),d(r,s)};f(We,r=>{S(e(a).category)&&r(Xe)})}t(Te),t(l);var ve=o(l,2),ce=i(ve),Pe=i(ce);{var Ze=r=>{var s=Aa();_(()=>{L(s,"src",e(a).author.avatar),L(s,"alt",e(a).author.name)}),d(r,s)};f(Pe,r=>{e(a).author.avatar&&r(Ze)})}var ie=o(Pe,2),ea=i(ie,!0);t(ie);var Se=o(ie,3),aa=i(Se,!0);t(Se),t(ce);var je=o(ce,2),ue=i(je),De=o(i(ue)),ra=i(De,!0);t(De),t(ue);var Le=o(ue,2),Fe=o(i(Le)),ta=i(Fe,!0);t(Fe),t(Le),t(je),t(ve);var sa=o(ve,2);{var ia=r=>{var s=Ra(),m=o(i(s),2),b=i(m);{var u=ae=>{var xe=Ea();_(()=>{L(xe,"src",e(a).lastPost.author.avatar),L(xe,"alt",e(a).lastPost.author.name)}),d(ae,xe)};f(b,ae=>{e(a).lastPost.author.avatar&&ae(u)})}var p=o(b,2),me=i(p,!0);t(p),t(m);var qe=o(m,3),ma=i(qe,!0);t(qe),t(s),_(ae=>{L(p,"href",`/profile/${e(a).lastPost.author.id}`),y(me,e(a).lastPost.author.name),y(ma,ae)},[()=>h(e(a).lastPost.date)],re),d(r,s)};f(sa,r=>{e(a).lastPost&&r(ia)})}t(R);var Ie=o(R,2),fe=i(Ie),Q=i(fe),oa=o(i(Q),2);{var da=r=>{var s=Ha();d(r,s)};f(oa,r=>{M()===e(a).id&&r(da)})}t(Q);var ge=o(Q,2),na=i(ge,!0);t(ge);var W=o(ge,2),la=o(i(W),2);{var va=r=>{var s=Oa();d(r,s)};f(la,r=>{M()===e(a).id&&r(va)})}t(W);var Me=o(W,2),ca=i(Me,!0);t(Me),t(fe);var ua=o(fe,2);{var fa=r=>{var s=Ya(),m=o(i(s),2);{var b=u=>{var p=Va();d(u,p)};f(m,u=>{U()===e(a).id&&u(b)})}t(s),_(()=>s.disabled=U()===e(a).id),G("click",s,()=>de(e(a).id)),d(r,s)},ga=r=>{var s=Ga(),m=o(i(s),2);{var b=u=>{var p=Ba();d(u,p)};f(m,u=>{N()===e(a).id&&u(b)})}t(s),_(()=>s.disabled=N()===e(a).id),G("click",s,()=>se(e(a).id)),d(r,s)};f(ua,r=>{T().includes(e(a).id)?r(fa):r(ga,!1)})}t(Ie),t(E),_(r=>{L(x,"href",`/forums/${e(a).id}`),y(Ve,` ${e(a).title??""}`),L(ie,"href",`/profile/${e(a).author.id}`),y(ea,e(a).author.name),y(aa,r),y(ra,e(a).viewsCount),y(ta,e(a).repliesCount),O(Q,1,`text-gray-400 hover:text-green-600 ${(e(a).userVote==="up"?"text-green-600 font-bold":"")??""}`),Q.disabled=M()===e(a).id,y(na,e(a).upvotes||0),O(W,1,`text-gray-400 hover:text-red-600 ${(e(a).userVote==="down"?"text-red-600 font-bold":"")??""}`),W.disabled=M()===e(a).id,y(ca,e(a).downvotes||0)},[()=>h(e(a).createdAt)],re),G("click",Q,()=>J(e(a).id,"up")),G("click",W,()=>J(e(a).id,"down")),d(D,E)}),t(C),t(g),d(c,g)};f(X,c=>{P().length===0?c(K):c(Z,!1)})}d(Y,z),ye(),H()}var Ka=n("<li><a><i></i> </a></li>"),Qa=n('<div class="space-y-6"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Categories</h3> <ul class="space-y-2"><li><a href="/forums"><i class="fas fa-list mr-2"></i> All Categories</a></li> <!></ul></div> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Learning Resources</h3> <ul class="space-y-2 text-sm"><li><a href="/resources/study-guides" class="text-indigo-600 dark:text-indigo-400 hover:underline flex items-center"><i class="fas fa-book mr-2"></i> Study Guides</a></li> <li><a href="/resources/code-examples" class="text-indigo-600 dark:text-indigo-400 hover:underline flex items-center"><i class="fas fa-code mr-2"></i> Code Examples</a></li> <li><a href="/resources/practice-exercises" class="text-indigo-600 dark:text-indigo-400 hover:underline flex items-center"><i class="fas fa-laptop-code mr-2"></i> Practice Exercises</a></li> <li><a href="/resources/community-projects" class="text-indigo-600 dark:text-indigo-400 hover:underline flex items-center"><i class="fas fa-project-diagram mr-2"></i> Community Projects</a></li></ul></div></div>');function hr(Y,w){let q=V(w,"categories",24,()=>[]),H=V(w,"filterCategory",8);var j=Qa(),T=i(j),F=o(i(T),2),h=i(F),S=i(h);t(h);var I=o(h,2);te(I,1,q,oe,(P,$)=>{var M=Ka(),N=i(M),U=i(N),A=o(U);t(N),t(M),_(()=>{L(N,"href",`/forums/category/${e($).id}`),O(N,1,`block px-3 py-2 rounded-md text-sm font-medium transition-colors ${(H()===e($).id?"bg-indigo-100 dark:bg-indigo-700 text-indigo-700 dark:text-indigo-100":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700")??""}`),O(U,1,`fas ${e($).icon} mr-2`),y(A,` ${e($).name??""}`)}),d(P,M)}),t(F),t(T),ba(2),t(j),_(()=>O(S,1,`block px-3 py-2 rounded-md text-sm font-medium transition-colors ${(H()==="all"?"bg-indigo-100 dark:bg-indigo-700 text-indigo-700 dark:text-indigo-100":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700")??""}`)),d(Y,j)}var Wa=n('<div class="mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded"> </div>'),Xa=n("<option> </option>"),Za=n('<div class="create-topic-form p-4 border rounded shadow-md"><h3 class="text-xl font-semibold mb-4">Create New Topic</h3> <form><!> <div class="mb-4"><label for="topic-title" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label> <input type="text" id="topic-title" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required></div> <div class="mb-4"><label for="topic-category" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Category</label> <select id="topic-category" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required><option disabled selected>Select a category</option><!></select></div> <div class="mb-4"><label for="topic-content" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Content</label> <textarea id="topic-content" rows="5" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required></textarea></div> <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></form></div>');function kr(Y,w){pe(w,!1);const[q,H]=Re(),j=()=>be(He,"$user",q),T=B();let F=V(w,"categories",24,()=>[]),h=B(""),S=B(""),I=B(""),P=B(!1),$=B("");const M=he();async function N(){if(!e(h).trim()||!e(S).trim()||!e(I)){k($,"Please enter title, content, and select a category.");return}if(!e(T)||!e(T).uid){k($,"You must be logged in to create a topic.");return}k(P,!0),k($,"");const l={title:e(h).trim(),content:e(S).trim(),category_id:e(I),author_id:e(T).uid};try{const v=await fetch("/api/forum/topics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(v.ok){const x=await v.json();M("topicCreated",x),k(h,""),k(S,""),k(I,""),alert("Topic created successfully!")}else{const x=await v.json();k($,`Failed to create topic: ${x.error||v.statusText}. Please try again.`)}}catch{k($,"An unexpected error occurred. Please check the console and try again.")}finally{k(P,!1)}}Ae(()=>j(),()=>{k(T,j())}),Ee(),_e();var U=Za(),A=o(i(U),2),se=i(A);{var de=l=>{var v=Wa(),x=i(v,!0);t(v),_(()=>y(x,e($))),d(l,v)};f(se,l=>{e($)&&l(de)})}var J=o(se,2),z=o(i(J),2);ha(z),t(J);var X=o(J,2),K=o(i(X),2);_(()=>{e(I),pa(()=>{e(P),F()})});var Z=i(K);Z.value=((Z.__value="")==null,"");var c=o(Z);te(c,1,F,oe,(l,v)=>{var x=Xa(),ee={},ne=i(x,!0);t(x),_(()=>{ee!==(ee=e(v).id)&&(x.value=(x.__value=e(v).id)==null?"":e(v).id),y(ne,e(v).name)}),d(l,x)}),t(K),t(X);var g=o(X,2),C=o(i(g),2);ya(C),t(g);var D=o(g,2),a=i(D);{var E=l=>{var v=Ne("Creating...");d(l,v)},R=l=>{var v=Ne("Create Topic");d(l,v)};f(a,l=>{e(P)?l(E):l(R,!1)})}t(D),t(A),t(U),_(()=>{z.disabled=e(P),K.disabled=e(P),C.disabled=e(P),D.disabled=e(P)}),Ue(z,()=>e(h),l=>k(h,l)),wa(K,()=>e(I),l=>k(I,l)),Ue(C,()=>e(S),l=>k(S,l)),G("submit",A,$a(N)),d(Y,U),ye(),H()}export{kr as C,yr as F,_r as a,hr as b,Ta as s};
