var U=(S,$,p)=>new Promise((q,f)=>{var x=i=>{try{g(p.next(i))}catch(s){f(s)}},u=i=>{try{g(p.throw(i))}catch(s){f(s)}},g=i=>i.done?q(i.value):Promise.resolve(i.value).then(x,u);g((p=p.apply(S,$)).next())});import"./COm6N4YE.js";import"./69_IOA4Y.js";import{p as nr,m,t as w,d as o,g as r,b as gr,c as d,e as ur,s as l,r as t,k as yr,n as br}from"./HPQed-Yx.js";import{s as F}from"./PqlH_gqs.js";import{i as V}from"./Da7F0fHf.js";import{e as X,i as Z}from"./ErG-rR4v.js";import{t as C,e as M,a as T,r as mr}from"./ZM6Rlk1U.js";import{r as rr}from"./G1Z7eEzt.js";import{b as G}from"./D8Qc2aSm.js";import{b as pr}from"./RqW7FABT.js";import{i as vr}from"./D0cPXSkH.js";import{p as fr}from"./BWjJF4ZV.js";import{s as xr,a as hr}from"./CGqtlgv0.js";import{o as kr}from"./Bpt9IQqH.js";import{l as _r,c as wr}from"./DucSn23Y.js";import{f as Tr}from"./BWnoWNEX.js";import{g as Cr}from"./GvWXBGfm.js";import{I as $r}from"./BC8mezXZ.js";var Ir=C('<div class="bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-4 rounded-md"><p> </p></div>'),Er=C("<option> </option>"),Ar=C('<div class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"> <button type="button" class="ml-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"><!></button></div>'),Fr=C('<div class="flex flex-wrap gap-2 mt-2"></div>'),Mr=C('<div class="create-topic-form"><h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Create New Topic</h2> <div class="space-y-6"><!> <div><label for="title" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title *</label> <input type="text" id="title" placeholder="Enter a descriptive title for your topic" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400"></div> <div><label for="category" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Category *</label> <select id="category" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400"><option disabled>Select a category</option><!></select></div> <div><label for="content" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Content *</label> <textarea id="content" placeholder="Write your topic content here... (Markdown supported)" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400 min-h-[200px]"></textarea> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">You can use Markdown formatting to structure your content.</p></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tags</label> <div class="flex"><input type="text" placeholder="Add tags (press Enter to add)" class="flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400"> <button type="button" class="px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 border-l-0 rounded-r-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">Add</button></div> <!></div> <div class="flex justify-end"><button class="px-4 py-2 bg-cherry-600 text-white rounded-md hover:bg-cherry-700 dark:bg-cherry-500 dark:hover:bg-cherry-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"> </button></div></div></div>');function Vr(S,$){nr($,!1);const[p,q]=xr(),f=()=>hr(wr,"$categories",p);let x=fr($,"categoryId",8,null),u=m(""),g=m(""),i=m(x()),s=m([]),y=m(""),c=m(!1),v=m(null);kr(()=>{_r()});function H(){r(y).trim()&&!r(s).includes(r(y).trim())&&(l(s,[...r(s),r(y).trim()]),l(y,""))}function er(e){l(s,r(s).filter(a=>a!==e))}function tr(e){e.key==="Enter"&&(e.preventDefault(),H())}function ar(){return U(this,null,function*(){if(!r(u).trim()||!r(g).trim()||!r(i)){l(v,"Please fill in all required fields");return}l(c,!0),l(v,null);try{const e=yield Tr({title:r(u).trim(),content:r(g).trim(),category_id:r(i),tags:r(s).length>0?r(s):void 0});e?Cr(`/forums/topic/${e.id}`):l(v,"Failed to create topic. Please try again.")}catch(e){console.error("Error creating topic:",e),l(v,"An error occurred while creating your topic.")}finally{l(c,!1)}})}vr();var P=Mr(),J=d(o(P),2),L=o(J);{var or=e=>{var a=Ir(),n=o(a),b=o(n,!0);t(n),t(a),w(()=>F(b,r(v))),T(e,a)};V(L,e=>{r(v)&&e(or)})}var j=d(L,2),D=d(o(j),2);rr(D),t(j);var K=d(j,2),I=d(o(K),2);w(()=>{r(i),yr(()=>{r(c),x(),f()})});var N=o(I);N.value=N.__value="";var ir=d(N);X(ir,1,f,Z,(e,a)=>{var n=Er(),b={},k=o(n,!0);t(n),w(()=>{var _;b!==(b=r(a).id)&&(n.value=(_=n.__value=r(a).id)!=null?_:""),F(k,r(a).name)}),T(e,n)}),t(I),t(K);var W=d(K,2),Y=d(o(W),2);mr(Y),br(2),t(W);var z=d(W,2),B=d(o(z),2),h=o(B);rr(h);var O=d(h,2);t(B);var dr=d(B,2);{var sr=e=>{var a=Fr();X(a,5,()=>r(s),Z,(n,b)=>{var k=Ar(),_=o(k),A=d(_),cr=o(A);$r(cr,{icon:"mdi:close",class:"w-4 h-4"}),t(A),t(k),w(()=>{var R;F(_,`${(R=r(b))!=null?R:""} `),A.disabled=r(c)}),M("click",A,()=>er(r(b))),T(n,k)}),t(a),T(e,a)};V(dr,e=>{r(s).length>0&&e(sr)})}t(z);var Q=d(z,2),E=o(Q),lr=o(E,!0);t(E),t(Q),t(J),t(P),w((e,a)=>{D.disabled=r(c),I.disabled=r(c)||!!x(),Y.disabled=r(c),h.disabled=r(c),O.disabled=e,E.disabled=a,F(lr,r(c)?"Creating Topic...":"Create Topic")},[()=>r(c)||!r(y).trim(),()=>r(c)||!r(u).trim()||!r(g).trim()||!r(i)],ur),G(D,()=>r(u),e=>l(u,e)),pr(I,()=>r(i),e=>l(i,e)),G(Y,()=>r(g),e=>l(g,e)),G(h,()=>r(y),e=>l(y,e)),M("keydown",h,tr),M("click",O,H),M("click",E,ar),T(S,P),gr(),q()}export{Vr as C};
//# sourceMappingURL=DDzL-fdA.js.map
