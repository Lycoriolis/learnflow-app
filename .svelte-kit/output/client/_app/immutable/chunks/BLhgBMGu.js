var S=Object.defineProperty;var b=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var w=(a,o,e)=>o in a?S(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e,h=(a,o)=>{for(var e in o||(o={}))B.call(o,e)&&w(a,e,o[e]);if(b)for(var e of b(o))L.call(o,e)&&w(a,e,o[e]);return a};var C=(a,o,e)=>w(a,typeof o!="symbol"?o+"":o,e);var c=(a,o,e)=>new Promise((n,r)=>{var s=u=>{try{i(e.next(u))}catch(d){r(d)}},t=u=>{try{i(e.throw(u))}catch(d){r(d)}},i=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,t);i((e=e.apply(a,o)).next())});import{g as A,a as E,c as y,q as v,w as x,b as q,d as M,e as j}from"./D8i9UXqZ.js";import{B as k}from"./B9hwOBZE.js";const l={},f={};class R extends k{constructor(){super(...arguments);C(this,"db",A());C(this,"auth",E())}fetchCourses(e){return c(this,null,function*(){return this.handleRequest(()=>c(this,null,function*(){const n=y(this.db,"courses"),r=v(n,x("path","==",e));return(yield q(r)).docs.map(t=>h({id:t.id},t.data()))}))})}fetchCourseCategories(){return c(this,null,function*(){return this.handleRequest(()=>c(this,null,function*(){if(f.all)return f.all;const e=y(this.db,"courseCategories"),r=(yield q(e)).docs.map(s=>h({id:s.id},s.data()));return f.all=r,r}))})}fetchCourseById(e){return c(this,null,function*(){return this.handleRequest(()=>c(this,null,function*(){if(l[e])return l[e];const n=M(this.db,"courses",e),r=yield j(n);if(!r.exists())throw new Error("Course not found");const s=h({id:r.id},r.data());return l[e]=s,s}))})}fetchCourseBySlug(e){return c(this,null,function*(){return this.handleRequest(()=>c(this,null,function*(){const n=y(this.db,"courses"),r=v(n,x("slug","==",e)),s=yield q(r);if(s.empty)throw new Error("Course not found");const t=h({id:s.docs[0].id},s.docs[0].data());return l[t.id]=t,t}))})}clearCourseCache(){Object.keys(l).forEach(e=>delete l[e]),Object.keys(f).forEach(e=>delete f[e])}listCourses(){return c(this,null,function*(){return this.handleRequest(()=>c(this,null,function*(){const{data:e,error:n}=yield this.fetchCourses("/content/courses");if(n)throw n;return e?e.map(r=>({id:r.id,title:r.title,description:r.description,modules:r.modules.map(s=>({id:s.id,title:s.title,description:s.description,lessons:s.lessons.map(t=>({id:t.id,title:t.title,content:t.content,duration:t.duration,order:t.order,exercises:t.exercises,prerequisites:t.prerequisites,metadata:t.metadata})),order:s.order,duration:s.duration,prerequisites:s.prerequisites,metadata:s.metadata})),totalDuration:r.totalDuration,difficulty:r.difficulty,tags:r.tags,metadata:r.metadata})):[]}))})}extractModulesFromContent(e){const n=[],r=/^#\s+(.+)$/gm,s=/^##\s+(.+)$/gm;let t=null,i=null,u="",d="";const D=e.split(`
`);for(const p of D){const g=p.match(r),m=p.match(s);g?(t&&(i&&t.lessons.push(i),n.push(t)),t={id:g[1].toLowerCase().replace(/\s+/g,"-"),title:g[1],description:"",lessons:[],order:n.length+1,duration:0,prerequisites:[],metadata:{createdAt:new Date,updatedAt:new Date,author:"System"}},i=null,u=""):m&&t?(i&&t.lessons.push(i),i={id:m[1].toLowerCase().replace(/\s+/g,"-"),title:m[1],content:"",duration:0,order:t.lessons.length+1,exercises:[],prerequisites:[],metadata:{createdAt:new Date,updatedAt:new Date,author:"System"}},d=""):i?(d+=p+`
`,i.content=d.trim()):t&&(u+=p+`
`,t.description=u.trim())}return t&&(i&&t.lessons.push(i),n.push(t)),n}getCourseGradient(e,n,r=[]){const s=e.toLowerCase();n.toLowerCase();const t=r.map(i=>i.toLowerCase());return s.includes("programming")||s.includes("code")||s.includes("developer")||t.includes("programming")||t.includes("code")||t.includes("developer")?"from-blue-500 to-purple-600":s.includes("physics")||s.includes("science")||t.includes("physics")||t.includes("science")?"from-green-500 to-teal-600":s.includes("language")||s.includes("linguistics")||t.includes("language")||t.includes("linguistics")?"from-yellow-500 to-orange-600":"from-gray-500 to-gray-700"}}const $=a=>c(null,null,function*(){const e=yield new R().fetchCourses(a);if(e.error)throw e.error;return e.data||[]}),G=()=>c(null,null,function*(){const o=yield new R().fetchCourseCategories();if(o.error)throw o.error;return o.data||[]}),I=a=>c(null,null,function*(){const e=yield new R().fetchCourseBySlug(a);if(e.error)throw e.error;return e.data});export{$ as a,G as b,I as f};
//# sourceMappingURL=BLhgBMGu.js.map
