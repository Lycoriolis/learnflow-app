var n=(e,t,s)=>new Promise((o,r)=>{var w=c=>{try{d(s.next(c))}catch(f){r(f)}},b=c=>{try{d(s.throw(c))}catch(f){r(f)}},d=c=>c.done?o(c.value):Promise.resolve(c.value).then(w,b);d((s=s.apply(e,t)).next())});import{p as _}from"./YB-lia8l.js";import{d as T,w as l}from"./CToUoAZH.js";import{b as F,h as y,i as B,j as E}from"./BWnoWNEX.js";const R=_("learnflow-subscribed-topics",[]),m=l([]),u=l([]),p=l(null),g=l([]),i=l(!1),a=l(null),h=l(null);function $(){return n(this,null,function*(){i.set(!0),a.set(null);try{const e=yield F();m.set(e)}catch(e){console.error("Error loading forum categories:",e),a.set("Failed to load forum categories")}finally{i.set(!1)}})}function C(e){return n(this,null,function*(){i.set(!0),a.set(null);try{const t=yield y(),s=e?t.filter(o=>o.category_id===e):t;u.set(s)}catch(t){console.error("Error loading forum topics:",t),a.set("Failed to load forum topics")}finally{i.set(!1)}})}function x(e){return n(this,null,function*(){i.set(!0),a.set(null),p.set(null),g.set([]);try{const[t,s]=yield Promise.all([B(e),E(e)]);t?(p.set(t),g.set(s)):a.set("Topic not found")}catch(t){console.error(`Error loading topic ${e}:`,t),a.set("Failed to load topic")}finally{i.set(!1)}})}function A(e){return n(this,null,function*(){i.set(!0),a.set(null),h.set(e);try{const s=(yield y()).filter(o=>{var r;return(r=o.tags)==null?void 0:r.includes(e)});u.set(s)}catch(t){console.error(`Error loading topics with tag ${e}:`,t),a.set("Failed to load topics with the selected tag")}finally{i.set(!1)}})}function L(){h.set(null),C()}const S=T(u,e=>e.filter(t=>t.is_pinned)),k=T(u,e=>e.filter(t=>!t.is_pinned).sort((t,s)=>{const o=t.updated_at||t.created_at,r=s.updated_at||s.created_at;return!o||!r?0:(r instanceof Date?r.getTime():0)-(o instanceof Date?o.getTime():0)}).slice(0,10));function q(e){let t;return m.subscribe(s=>{t=s.find(o=>o.id===e)})(),t}export{C as a,L as b,m as c,x as d,a as e,A as f,q as g,p as h,i,g as j,$ as l,S as p,k as r,R as s,u as t};
//# sourceMappingURL=DucSn23Y.js.map
