import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as U,e as n,c as o,g as t,m as y,r as s,n as Y,t as $,s as l,b as X,at as H,l as J,a as pe,$ as fe}from"../chunks/D8Zr53n5.js";import{e as F,h as ve}from"../chunks/CCLz0Z0F.js";import{t as f,a as p}from"../chunks/ByokzzJe.js";import{i as g}from"../chunks/BAqAra_5.js";import{i as Z}from"../chunks/BzVavbfz.js";import{a as L,s as ee}from"../chunks/CYIMW-vo.js";import{s as G}from"../chunks/UpSy6tP0.js";import{r as K}from"../chunks/DpNHaJTn.js";import{s as N}from"../chunks/Cw_GgyMt.js";import{b as O}from"../chunks/Djn-aou_.js";import{p as be}from"../chunks/Bfc47y5P.js";import{p as ge}from"../chunks/D0guHZRM.js";import{f as xe,l as re,c as he,h as ye,i as _e}from"../chunks/QfzvdxsM.js";import{g as Q}from"../chunks/BMc8ARJA.js";import{o as we}from"../chunks/DyX_nzx0.js";import{p as ke}from"../chunks/Doo5AiZ_.js";var $e=f(`<div class="bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded mb-4" role="alert"><span class="block sm:inline">You'll be redirected to the requested page after login.</span></div>`),Le=f('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4" role="alert"><span class="block sm:inline"> </span></div>'),Ee=f('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4" role="alert"><span class="block sm:inline"> </span></div>'),Pe=f('<p class="mt-1 text-sm text-red-600"> </p>'),je=f('<p class="mt-1 text-sm text-red-600"> </p>'),Fe=f('<span class="inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></span>'),Ge=f(`<div class="w-full max-w-md mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md"><h2 class="text-2xl font-bold mb-6 text-center text-gray-800 dark:text-white">Log In</h2> <!> <!> <!> <form class="space-y-4" autocomplete="off"><div><label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email</label> <input type="email" id="email" required autocomplete="username"> <!></div> <div><label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Password</label> <input type="password" id="password" required autocomplete="current-password"> <!></div> <div><button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"><!> Log In</button></div></form> <div class="mt-4"><button class="w-full flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"><svg class="h-5 w-5 mr-2" viewBox="0 0 24 24"><path d="M12.545,12.151L12.545,12.151c0,1.054,0.855,1.909,1.909,1.909h3.536c-0.607,1.972-2.101,3.467-4.26,3.866c-3.431,0.589-6.663-1.727-7.253-5.157c-0.589-3.431,1.727-6.663,5.157-7.253c2.136-0.367,4.296,0.317,5.743,1.878l2.72-2.72c-2.099-2.099-5.271-2.853-8.135-1.879C8.234,3.708,4.766,6.152,3.032,9.686c-2.734,5.63,0.01,12.44,5.639,15.174c5.63,2.734,12.44-0.01,15.174-5.639c1.06-2.17,1.369-4.652,0.845-7.036h-9.687C13.25,12.151,12.545,12.151,12.545,12.151z" fill="#F44336"></path><path d="M12.545,12.151v-3.89h9.687c0.521,2.169,0.246,4.432-0.769,6.406c-0.217,0.436-0.453,0.853-0.725,1.241h-6.284C13.4,15.909,12.545,14.055,12.545,12.151z" fill="#2196F3"></path></svg> Sign in with Google</button></div> <div class="mt-4 text-center"><a href="/reset-password" class="text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300">Forgot password?</a></div> <div class="mt-4 text-center"><p class="text-sm text-gray-600 dark:text-gray-400">Don't have an account? <a href="/register" class="font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300">Sign up</a></p></div></div>`);function Te(T,E){U(E,!1);const[x,V]=ee(),_=()=>L(xe,"$authError",x),b=()=>L(re,"$loading",x);let v=ge(E,"redirectTo",8,"/"),d=y(""),m=y(""),h=y(""),a=y({}),c=y(!1);function u(e){const i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);return H(a,t(a).email=i?void 0:"Please enter a valid email address"),i}function P(e){const r=e.length>=6;return H(a,t(a).password=r?void 0:"Password must be at least 6 characters"),r}async function te(){l(c,!0),l(h,""),l(a,{});const e=u(t(d)),r=P(t(m));if(!e||!r){l(c,!1);return}try{await he(t(d),t(m)),console.log(`Login successful, will redirect to: ${v()}`)}catch{}finally{l(c,!1)}}async function ae(){l(c,!0),l(h,""),l(a,{});try{await ye(),console.log(`Google login successful, will redirect to: ${v()}`)}catch{}finally{l(c,!1)}}Z();var q=Ge(),z=n(o(q),2);{var oe=e=>{var r=$e();p(e,r)};g(z,e=>{v()&&v()!=="/"&&e(oe)})}var D=n(z,2);{var se=e=>{var r=Le(),i=o(r),S=o(i,!0);s(i),s(r),$(()=>G(S,_())),p(e,r)};g(D,e=>{_()&&e(se)})}var I=n(D,2);{var ie=e=>{var r=Ee(),i=o(r),S=o(i,!0);s(i),s(r),$(()=>G(S,t(h))),p(e,r)};g(I,e=>{t(h)&&e(ie)})}var j=n(I,2),A=o(j),w=n(o(A),2);K(w);var le=n(w,2);{var de=e=>{var r=Pe(),i=o(r,!0);s(r),$(()=>G(i,t(a).email)),p(e,r)};g(le,e=>{t(a).email&&e(de)})}s(A);var C=n(A,2),k=n(o(C),2);K(k);var ne=n(k,2);{var ce=e=>{var r=je(),i=o(r,!0);s(r),$(()=>G(i,t(a).password)),p(e,r)};g(ne,e=>{t(a).password&&e(ce)})}s(C);var R=n(C,2),M=o(R),ue=o(M);{var me=e=>{var r=Fe();p(e,r)};g(ue,e=>{(b()||t(c))&&e(me)})}Y(),s(M),s(R),s(j);var B=n(j,2),W=o(B);s(B),Y(4),s(q),$(()=>{N(w,1,`mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${(t(a).email?"border-red-500":"")??""}`),N(k,1,`mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${(t(a).password?"border-red-500":"")??""}`),M.disabled=b()||t(c),W.disabled=b()||t(c)}),O(w,()=>t(d),e=>l(d,e)),F("blur",w,()=>u(t(d))),O(k,()=>t(m),e=>l(m,e)),F("blur",k,()=>P(t(m))),F("submit",j,be(te)),F("click",W,ae),p(T,q),X(),V()}var Ve=f('<div class="flex flex-col items-center justify-center"><div class="w-16 h-16 border-4 border-t-blue-500 border-blue-200 rounded-full animate-spin"></div> <p class="mt-4 text-gray-600 dark:text-gray-400">Loading...</p></div>'),qe=f('<div class="min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"><!></div>');function Xe(T,E){U(E,!1);const[x,V]=ee(),_=()=>L(ke,"$page",x),b=()=>L(_e,"$isAuthenticated",x),v=()=>L(re,"$loading",x),d=y();we(()=>{b()&&Q(t(d))}),J(()=>_(),()=>{l(d,_().url.searchParams.get("redirect")||"/")}),J(()=>(v(),b(),t(d)),()=>{!v()&&b()&&Q(t(d))}),pe(),Z();var m=qe();ve(u=>{fe.title="Login - LearnFlow"});var h=o(m);{var a=u=>{var P=Ve();p(u,P)},c=u=>{Te(u,{get redirectTo(){return t(d)}})};g(h,u=>{v()?u(a):u(c,!1)})}s(m),p(T,m),X(),V()}export{Xe as component};
