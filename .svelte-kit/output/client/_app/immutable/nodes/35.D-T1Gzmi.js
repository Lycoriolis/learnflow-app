var W=($,_,v)=>new Promise((P,f)=>{var k=e=>{try{n(v.next(e))}catch(u){f(u)}},g=e=>{try{n(v.throw(e))}catch(u){f(u)}},n=e=>e.done?P(e.value):Promise.resolve(e.value).then(k,g);n((v=v.apply($,_)).next())});import"../chunks/COm6N4YE.js";import"../chunks/69_IOA4Y.js";import{p as te,c as y,d,g as a,m as R,n as q,r as l,b as se,t as E,s as i,j as z,$ as oe}from"../chunks/HPQed-Yx.js";import{h as ie}from"../chunks/Bkjpsbyi.js";import{t as b,a as p,e as B,i as de}from"../chunks/ZM6Rlk1U.js";import{i as h}from"../chunks/Da7F0fHf.js";import{a as L,s as G}from"../chunks/CGqtlgv0.js";import{s as A}from"../chunks/PqlH_gqs.js";import{r as le,s as M}from"../chunks/G1Z7eEzt.js";import{s as ne}from"../chunks/XjHDu-gE.js";import{b as me}from"../chunks/D8Qc2aSm.js";import{i as ue}from"../chunks/D0cPXSkH.js";import{p as ce}from"../chunks/BWjJF4ZV.js";import{a as D,i as ve,l as H,m as pe}from"../chunks/BRK8y73W.js";import{o as be}from"../chunks/Bpt9IQqH.js";import{g as fe}from"../chunks/GvWXBGfm.js";var ge=b('<div class="bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4" role="alert"><span class="block sm:inline"> </span></div>'),xe=b('<div class="bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4" role="alert"><span class="block sm:inline"> </span></div>'),ye=b('<div class="bg-green-100 dark:bg-green-900/30 border border-green-400 dark:border-green-800 text-green-700 dark:text-green-300 px-4 py-3 rounded mb-4" role="alert"><span class="block sm:inline"> </span> <div class="mt-2"><a href="/login" class="font-medium text-green-700 dark:text-green-300 underline">Return to login</a></div></div>'),he=b('<p id="email-error" class="mt-1 text-sm text-red-600 dark:text-red-400"> </p>'),_e=b('<span class="inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" aria-hidden="true"></span> <span>Sending...</span>',1),ke=b(`<form class="space-y-4"><div><label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email</label> <input type="email" id="email" required autocomplete="email"> <p id="email-help" class="text-xs text-gray-500 dark:text-gray-400 mt-1">We'll send you a link to reset your password</p> <!></div> <div><button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></form>`),we=b(`<div class="w-full max-w-md mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md"><h2 class="text-2xl font-bold mb-6 text-center text-gray-800 dark:text-white">Reset Password</h2> <!> <!> <!> <!> <div class="mt-6 text-center"><p class="text-sm text-gray-600 dark:text-gray-400">Remember your password? <a href="/login" class="font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300">Log in</a></p></div> <div class="mt-4 text-center"><p class="text-sm text-gray-600 dark:text-gray-400">Don't have an account? <a href="/register" class="font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300">Sign up</a></p></div></div>`);function $e($,_){te(_,!1);const[v,P]=G(),f=()=>L(ve,"$isAuthenticated",v),k=()=>L(D,"$authError",v),g=()=>L(H,"$loading",v);ce(_,"redirectTo",8,"/login");let n=R(""),e=R(""),u=R(""),w=R(!1),c=R({});be(()=>{f()&&fe("/"),D.set("")});function F(t){const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t);return s?z(c,a(c).email=void 0):z(c,a(c).email="Please enter a valid email address"),i(c,a(c)),s}function I(t){return W(this,null,function*(){if(t.preventDefault(),i(w,!0),i(e,""),i(u,""),D.set(""),!F(a(n))){i(w,!1);return}try{yield pe(a(n)),i(u,"Password reset email sent. Check your inbox for further instructions."),i(n,"")}catch(r){if(r instanceof Error){const s=r.message;s.includes("user-not-found")?i(e,"No account found with this email address."):s.includes("too-many-requests")?i(e,"Too many requests. Please try again later."):i(e,"Failed to send reset email. Please try again later.")}else i(e,"An unexpected error occurred. Please try again later.")}finally{i(w,!1)}})}ue();var S=we(),T=y(d(S),2);{var J=t=>{var r=ge(),s=d(r),o=d(s,!0);l(s),l(r),E(()=>A(o,k())),p(t,r)};h(T,t=>{k()&&t(J)})}var C=y(T,2);{var K=t=>{var r=xe(),s=d(r),o=d(s,!0);l(s),l(r),E(()=>A(o,a(e))),p(t,r)};h(C,t=>{a(e)&&t(K)})}var N=y(C,2);{var O=t=>{var r=ye(),s=d(r),o=d(s,!0);l(s),q(2),l(r),E(()=>A(o,a(u))),p(t,r)};h(N,t=>{a(u)&&t(O)})}var Q=y(N,2);{var U=t=>{var r=ke(),s=d(r),o=y(d(s),2);le(o);var X=y(o,4);{var Y=m=>{var x=he(),ae=d(x,!0);l(x),E(()=>A(ae,a(c).email)),p(m,x)};h(X,m=>{a(c).email&&m(Y)})}l(s);var V=y(s,2),j=d(V),Z=d(j);{var ee=m=>{var x=_e();q(2),p(m,x)},re=m=>{var x=de("Send Reset Link");p(m,x)};h(Z,m=>{g()||a(w)?m(ee):m(re,!1)})}l(j),l(V),l(r),E(()=>{ne(o,1,`mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${a(c).email?"border-red-500":""}`),M(o,"aria-invalid",a(c).email?"true":"false"),M(o,"aria-describedby",a(c).email?"email-error":"email-help"),j.disabled=g()||a(w),M(j,"aria-busy",g()||a(w))}),me(o,()=>a(n),m=>i(n,m)),B("blur",o,()=>F(a(n))),B("submit",r,I),p(t,r)};h(Q,t=>{a(u)||t(U)})}q(4),l(S),p($,S),se(),P()}var Pe=b('<div class="flex flex-col items-center justify-center"><div class="w-16 h-16 border-4 border-t-blue-500 border-blue-200 rounded-full animate-spin"></div> <p class="mt-4 text-gray-600 dark:text-gray-400">Loading...</p></div>'),Re=b('<div class="min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"><!></div>');function He($){const[_,v]=G(),P=()=>L(H,"$loading",_);var f=Re();ie(e=>{oe.title="Reset Password - LearnFlow"});var k=d(f);{var g=e=>{var u=Pe();p(e,u)},n=e=>{$e(e,{})};h(k,e=>{P()?e(g):e(n,!1)})}l(f),p($,f),v()}export{He as component};
//# sourceMappingURL=35.D-T1Gzmi.js.map
