{"version":3,"file":"39.CQnX9K7P.js","sources":["../../../../../../src/routes/tools/calculator/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { calcDisplay, calcCurrentInput, calcOperator, calcPreviousValue, calcWaitingForSecondOperand } from '$lib/stores/pipStores';\n  import { onMount, onDestroy } from 'svelte';\n\n  let scientificMode = false;\n  let showHistory = false;\n  let calculationHistory: string[] = [];\n  let angleMode: 'deg' | 'rad' = 'deg';\n\n  onMount(() => {\n    window.addEventListener('keydown', handleKeydown);\n  });\n\n  onDestroy(() => {\n    window.removeEventListener('keydown', handleKeydown);\n  });\n\n  function inputDigit(digit: string) {\n    if ($calcWaitingForSecondOperand) {\n      calcDisplay.set(digit);\n      calcWaitingForSecondOperand.set(false);\n    } else {\n      calcDisplay.set($calcDisplay === '0' ? digit : $calcDisplay + digit);\n    }\n    calcCurrentInput.set($calcDisplay);\n  }\n\n  function inputDecimal() {\n    if ($calcWaitingForSecondOperand) {\n      calcDisplay.set('0.');\n      calcWaitingForSecondOperand.set(false);\n      return;\n    }\n\n    if (!$calcDisplay.includes('.')) {\n      calcDisplay.set($calcDisplay + '.');\n      calcCurrentInput.set($calcDisplay);\n    }\n  }\n\n  function clearAll() {\n    calcDisplay.set('0');\n    calcCurrentInput.set('');\n    calcOperator.set(null);\n    calcPreviousValue.set(null);\n    calcWaitingForSecondOperand.set(false);\n  }\n\n  function handleOperator(nextOperator: string) {\n    const inputValue = parseFloat($calcDisplay);\n\n    if ($calcPreviousValue === null) {\n      calcPreviousValue.set(inputValue);\n    } else if ($calcOperator) {\n      const result = performCalculation();\n      calcDisplay.set(String(result));\n      calcPreviousValue.set(result);\n    }\n\n    calcWaitingForSecondOperand.set(true);\n    calcOperator.set(nextOperator);\n  }\n\n  function performCalculation(): number {\n    const prevValue = $calcPreviousValue;\n    const currentValue = parseFloat($calcDisplay);\n\n    if (prevValue === null) return currentValue;\n\n    let result: number;\n    switch ($calcOperator) {\n      case '+':\n        result = prevValue + currentValue;\n        break;\n      case '-':\n        result = prevValue - currentValue;\n        break;\n      case '*':\n        result = prevValue * currentValue;\n        break;\n      case '/':\n        result = prevValue / currentValue;\n        break;\n      case 'pow':\n        result = Math.pow(prevValue, currentValue);\n        break;\n      default:\n        return currentValue;\n    }\n\n    // Add to history\n    calculationHistory = [...calculationHistory, `${prevValue} ${$calcOperator} ${currentValue} = ${result}`];\n    return result;\n  }\n\n  function handleScientificFunction(fn: string) {\n    const currentValue = parseFloat($calcDisplay);\n    let result: number;\n\n    switch (fn) {\n      case 'sin':\n        result = angleMode === 'deg' ? \n          Math.sin(currentValue * Math.PI / 180) : \n          Math.sin(currentValue);\n        break;\n      case 'cos':\n        result = angleMode === 'deg' ? \n          Math.cos(currentValue * Math.PI / 180) : \n          Math.cos(currentValue);\n        break;\n      case 'tan':\n        result = angleMode === 'deg' ? \n          Math.tan(currentValue * Math.PI / 180) : \n          Math.tan(currentValue);\n        break;\n      case 'sqrt':\n        result = Math.sqrt(currentValue);\n        break;\n      case 'log':\n        result = Math.log10(currentValue);\n        break;\n      case 'ln':\n        result = Math.log(currentValue);\n        break;\n      case 'exp':\n        result = Math.exp(currentValue);\n        break;\n      case 'pi':\n        result = Math.PI;\n        break;\n      case 'e':\n        result = Math.E;\n        break;\n      default:\n        return;\n    }\n\n    calcDisplay.set(String(result));\n    calcCurrentInput.set($calcDisplay);\n    calculationHistory = [...calculationHistory, `${fn}(${currentValue}) = ${result}`];\n  }\n\n  function copyToClipboard() {\n    navigator.clipboard.writeText($calcDisplay);\n  }\n\n  function clearHistory() {\n    calculationHistory = [];\n  }\n\n  // Handle keyboard input\n  function handleKeydown(event: KeyboardEvent) {\n    const key = event.key;\n    \n    if (/[0-9]/.test(key)) {\n      inputDigit(key);\n    } else if (key === '.') {\n      inputDecimal();\n    } else if (['+', '-', '*', '/'].includes(key)) {\n      handleOperator(key);\n    } else if (key === 'Enter' || key === '=') {\n      handleOperator('=');\n    } else if (key === 'Escape') {\n      clearAll();\n    } else if (key === 'Backspace') {\n      calcDisplay.set($calcDisplay.slice(0, -1) || '0');\n    }\n  }\n</script>\n\n<svelte:head>\n  <title>Scientific Calculator | LearnFlow</title>\n</svelte:head>\n\n<div class=\"max-w-2xl mx-auto px-4 py-10\">\n  <div class=\"flex justify-between items-start mb-8\">\n    <div>\n      <h1 class=\"text-3xl font-bold text-gray-900 dark:text-white mb-2 flex items-center\">\n        <i class=\"fas fa-calculator mr-3 text-purple-500\"></i> Scientific Calculator\n      </h1>\n      <p class=\"text-gray-600 dark:text-gray-400\">Advanced calculator with scientific functions</p>\n    </div>\n    <div class=\"flex gap-2\">\n      <button \n        class=\"text-sm px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition\"\n        on:click={() => { showHistory = !showHistory; }}\n      >\n        <i class=\"fas fa-history mr-2\"></i> History\n      </button>\n      <button \n        class=\"text-sm px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition\"\n        on:click={() => { scientificMode = !scientificMode; }}\n      >\n        {scientificMode ? 'Basic' : 'Scientific'}\n      </button>\n    </div>\n  </div>\n\n  <div class=\"grid grid-cols-1 {showHistory ? 'lg:grid-cols-3' : ''} gap-8\">\n    <div class=\"lg:col-span-2\">\n      <div class=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg\">\n        <!-- Display -->\n        <div class=\"mb-4 relative\">\n          <input\n            type=\"text\"\n            class=\"w-full text-right px-4 py-3 text-2xl font-mono bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 rounded-lg\"\n            bind:value={$calcDisplay}\n            readonly\n          >\n          <button\n            class=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300\"\n            on:click={() => { copyToClipboard(); }}\n            title=\"Copy to clipboard\"\n          >\n            <i class=\"fas fa-copy\"></i>\n          </button>\n        </div>\n\n        {#if scientificMode}\n          <!-- Scientific Functions -->\n          <div class=\"grid grid-cols-4 gap-2 mb-4\">\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleScientificFunction('sin'); }}\n            >sin</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleScientificFunction('cos'); }}\n            >cos</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleScientificFunction('tan'); }}\n            >tan</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { angleMode = angleMode === 'deg' ? 'rad' : 'deg'; }}\n            >{angleMode}</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleScientificFunction('log'); }}\n            >log</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleScientificFunction('ln'); }}\n            >ln</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleScientificFunction('exp'); }}\n            >exp</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleScientificFunction('sqrt'); }}\n            >√</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleOperator('pow'); }}\n            >x^y</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleScientificFunction('pi'); }}\n            >π</button>\n            <button \n              class=\"p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n              on:click={() => { handleScientificFunction('e'); }}\n            >e</button>\n          </div>\n        {/if}\n\n        <!-- Basic Calculator Grid -->\n        <div class=\"grid grid-cols-4 gap-2\">\n          <button\n            class=\"p-4 bg-red-600 text-white rounded hover:bg-red-700 transition\"\n            on:click={() => { clearAll(); }}\n          >AC</button>\n          <button\n            class=\"p-4 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n            on:click={() => { calcDisplay.set(String(-parseFloat($calcDisplay))); }}\n          >±</button>\n          <button\n            class=\"p-4 bg-gray-600 text-white rounded hover:bg-gray-700 transition\"\n            on:click={() => { calcDisplay.set(String(parseFloat($calcDisplay) / 100)); }}\n          >%</button>\n          <button\n            class=\"p-4 bg-purple-600 text-white rounded hover:bg-purple-700 transition\"\n            on:click={() => { handleOperator('/'); }}\n          >÷</button>\n          \n          {#each [7, 8, 9, '*', 4, 5, 6, '-', 1, 2, 3, '+', 0, '.', '='] as key}\n            {@const isOperator = ['*', '-', '+', '='].includes(String(key))}\n            {@const isZero = key === 0}\n            <button\n              class=\"p-4 {isOperator ? 'bg-purple-600 hover:bg-purple-700' : 'bg-gray-600 hover:bg-gray-700'} \n                     text-white rounded transition {isZero ? 'col-span-2' : ''}\"\n              on:click={() => {\n                if (typeof key === 'number' || key === '.') {\n                  key === '.' ? inputDecimal() : inputDigit(String(key));\n                } else {\n                  handleOperator(key);\n                }\n              }}\n            >\n              {#if key === '*'}<i class=\"fas fa-times\"></i>\n              {:else if key === '-'}<i class=\"fas fa-minus\"></i>\n              {:else if key === '+'}<i class=\"fas fa-plus\"></i>\n              {:else if key === '='}<i class=\"fas fa-equals\"></i>\n              {:else}{key}{/if}\n            </button>\n          {/each}\n        </div>\n      </div>\n    </div>\n\n    {#if showHistory}\n      <div class=\"lg:col-span-1\">\n        <div class=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg\">\n          <div class=\"flex justify-between items-center mb-4\">\n            <h3 class=\"text-lg font-medium text-gray-900 dark:text-white\">History</h3>\n            <button\n              class=\"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n              on:click={() => { clearHistory(); }}\n            >\n              Clear\n            </button>\n          </div>\n          {#if calculationHistory.length === 0}\n            <p class=\"text-gray-500 dark:text-gray-400 text-sm\">No calculations yet</p>\n          {:else}\n            <div class=\"space-y-2\">\n              {#each calculationHistory as calc}\n                <div class=\"text-sm text-gray-600 dark:text-gray-300 font-mono\">{calc}</div>\n              {/each}\n            </div>\n          {/if}\n        </div>\n      </div>\n    {/if}\n  </div>\n</div>"],"names":["scientificMode","showHistory","calculationHistory","$.mutable_source","angleMode","onMount","handleKeydown","onDestroy","inputDigit","digit","$calcWaitingForSecondOperand","calcDisplay","calcWaitingForSecondOperand","$calcDisplay","calcCurrentInput","inputDecimal","clearAll","calcOperator","calcPreviousValue","handleOperator","nextOperator","inputValue","$calcPreviousValue","$calcOperator","result","performCalculation","prevValue","currentValue","handleScientificFunction","fn","$.get","copyToClipboard","clearHistory","event","key","$.set","$$render","consequent","isOperator","$.derived_safe_equal","isZero","consequent_4","alternate_3","consequent_3","alternate_2","consequent_2","alternate_1","consequent_1","alternate","$.event","button_18","$.each","div_12","calc","consequent_5","alternate_4","consequent_6","$$value","$.store_set"],"mappings":"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"}