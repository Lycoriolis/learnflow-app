import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as je,l as W,a as Ge,b as Ce,$ as Te,s as u,m as k,g as e,c as a,r,e as s,n as ve,t as T,i as Pe,at as Le}from"../chunks/D8Zr53n5.js";import{s as b}from"../chunks/UpSy6tP0.js";import{i as j}from"../chunks/BAqAra_5.js";import{e as ae,i as Se}from"../chunks/8AErAcLY.js";import{t as c,a as d,b as ne}from"../chunks/ByokzzJe.js";import{h as Me,e as se}from"../chunks/CCLz0Z0F.js";import{r as Ee,s as q}from"../chunks/DpNHaJTn.js";import{t as Fe,f as Je}from"../chunks/CwmK-V57.js";import{b as Ne}from"../chunks/Djn-aou_.js";import{b as Ae}from"../chunks/dleV8ATl.js";import{i as De}from"../chunks/BzVavbfz.js";import{o as Oe,a as qe}from"../chunks/DyX_nzx0.js";import"../chunks/z6kK6n-3.js";import{l as Ie,a as Qe,b as ce}from"../chunks/C44GRa1C.js";var Re=c('<div class="flex justify-center items-center h-64 svelte-131r20r"><div class="loader svelte-131r20r"></div></div>'),Ue=c('<option class="svelte-131r20r"> </option>'),Ve=c('<img class="w-full h-32 object-cover svelte-131r20r">'),We=c('<div class="w-full h-32 bg-gradient-to-r from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center svelte-131r20r"><i class="fas fa-users text-4xl text-indigo-400 dark:text-indigo-600 svelte-131r20r"></i></div>'),ze=c('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col svelte-131r20r"><!> <div class="p-5 flex-1 flex flex-col svelte-131r20r"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1 svelte-131r20r"> </h3> <p class="text-sm text-gray-500 dark:text-gray-400 mb-3 svelte-131r20r"> </p> <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2 flex-1 svelte-131r20r"> </p> <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 mb-4 svelte-131r20r"><span class="svelte-131r20r"><i class="fas fa-users mr-1 svelte-131r20r"></i> </span> <span class="svelte-131r20r"> </span></div> <div class="mt-auto flex gap-2 svelte-131r20r"><a class="flex-1 text-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium transition-colors svelte-131r20r">View Group</a> <button class="px-3 py-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-300 rounded-md text-sm font-medium transition-colors svelte-131r20r" title="Leave Group"><i class="fas fa-sign-out-alt svelte-131r20r"></i></button></div></div></div>'),Be=c('<div class="mb-12 svelte-131r20r"><h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4 svelte-131r20r">My Groups</h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 svelte-131r20r"></div></div>'),He=c('<button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium transition-colors svelte-131r20r">Clear Filters</button>'),Ke=c('<a href="/groups/create" class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium transition-colors svelte-131r20r"><i class="fas fa-plus mr-2 svelte-131r20r"></i> Create New Group</a>'),Xe=c('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-8 text-center svelte-131r20r"><div class="w-16 h-16 mx-auto bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4 svelte-131r20r"><i class="fas fa-search text-gray-400 dark:text-gray-500 text-2xl svelte-131r20r"></i></div> <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2 svelte-131r20r">No groups found</h3> <p class="text-gray-600 dark:text-gray-400 mb-6 svelte-131r20r"><!></p> <!></div>'),Ye=c('<img class="w-full h-32 object-cover svelte-131r20r">'),Ze=c('<div class="w-full h-32 bg-gradient-to-r from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center svelte-131r20r"><i class="fas fa-users text-4xl text-indigo-400 dark:text-indigo-600 svelte-131r20r"></i></div>'),$e=c('<button class="w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium transition-colors svelte-131r20r"><i class="fas fa-user-plus mr-2 svelte-131r20r"></i> Join Group</button>'),er=c('<button class="w-full px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium cursor-not-allowed svelte-131r20r" disabled><i class="fas fa-lock mr-2 svelte-131r20r"></i> Request to Join (Private)</button>'),rr=c('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col svelte-131r20r"><!> <div class="p-5 flex-1 flex flex-col svelte-131r20r"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1 svelte-131r20r"> </h3> <p class="text-sm text-gray-500 dark:text-gray-400 mb-3 svelte-131r20r"> </p> <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2 flex-1 svelte-131r20r"> </p> <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 mb-4 svelte-131r20r"><span class="svelte-131r20r"><i class="fas fa-users mr-1 svelte-131r20r"></i> </span> <span class="svelte-131r20r"> </span></div> <div class="mt-auto svelte-131r20r"><!></div></div></div>'),tr=c('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 svelte-131r20r"></div>'),ar=c('<div class="svelte-131r20r"><div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 svelte-131r20r"><div class="svelte-131r20r"><h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2 svelte-131r20r">Study Groups</h1> <p class="text-gray-600 dark:text-gray-400 svelte-131r20r">Connect, collaborate, and learn with fellow students</p></div> <div class="mt-4 md:mt-0 svelte-131r20r"><a href="/groups/create" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium flex items-center transition-colors svelte-131r20r"><i class="fas fa-plus mr-2 svelte-131r20r"></i> Create New Group</a></div></div> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4 mb-8 svelte-131r20r"><div class="flex flex-col md:flex-row gap-4 svelte-131r20r"><div class="relative flex-grow svelte-131r20r"><input type="text" class="w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 svelte-131r20r" placeholder="Search groups by name or description..."> <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none svelte-131r20r"><i class="fas fa-search text-gray-400 svelte-131r20r"></i></div></div> <div class="relative svelte-131r20r"><select class="appearance-none pl-4 pr-10 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[180px] svelte-131r20r"></select> <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none svelte-131r20r"><i class="fas fa-chevron-down text-gray-400 svelte-131r20r"></i></div></div></div></div> <!> <div class="svelte-131r20r"><h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4 svelte-131r20r"> </h2> <!></div></div>'),sr=c('<div class="container mx-auto px-4 py-8 max-w-7xl svelte-131r20r"><!></div>');function hr(me,fe){je(fe,!1);const z=k(),B=k(),H=k(),K=k();let p=k([]),y=k(""),h=k("all");async function ie(t,_){try{if((await fetch(_?"/api/groups/leave":"/api/groups/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group_id:t})})).ok){const P=e(p).findIndex(M=>M.id==t||M.id===t);P!==-1&&(Le(p,e(p)[P].isMember=!_),u(p,[...e(p)]))}else alert("Failed to update group membership.")}catch{alert("Error updating group membership.")}}let X=k(!0),Y=null;Oe(async()=>{Y=await Ie("view_groups","groups"),u(X,!0);try{const t=await fetch("/api/groups/");t.ok?u(p,await t.json()):u(p,[])}catch{u(p,[])}finally{u(X,!1)}}),qe(()=>{Y&&Qe(Y)});function ge(t){ce("join_group",t),ie(t,!1)}function pe(t){ce("leave_group",t),ie(t,!0)}W(()=>e(p),()=>{u(z,["all",...Array.from(new Set(e(p).map(t=>t.topic)))])}),W(()=>(e(p),e(h),e(y)),()=>{u(B,e(p).filter(t=>{const _=e(h)==="all"||t.topic===e(h),G=e(y)===""||t.name.toLowerCase().includes(e(y).toLowerCase())||t.description.toLowerCase().includes(e(y).toLowerCase());return _&&G}))}),W(()=>e(p),()=>{u(H,e(p).filter(t=>t.isMember))}),W(()=>e(B),()=>{u(K,e(B).filter(t=>!t.isMember))}),Ge(),De();var Z=sr();Me(t=>{Te.title="User Groups | LearnFlow"});var xe=a(Z);{var ue=t=>{var _=Re();d(t,_)},be=t=>{var _=ar(),G=s(a(_),2),$=a(G),P=a($),M=a(P);Ee(M),ve(2),r(P);var le=s(P,2),ee=a(le);T(()=>{e(h),Pe(()=>{e(z)})}),ae(ee,5,()=>e(z),Se,(m,n)=>{var f=Ue(),o={},v=a(f,!0);r(f),T(()=>{o!==(o=e(n))&&(f.value=(f.__value=e(n))==null?"":e(n)),b(v,e(n)==="all"?"All Topics":e(n))}),d(m,f)}),r(ee),ve(2),r(le),r($),r(G);var oe=s(G,2);{var _e=m=>{var n=Be(),f=s(a(n),2);ae(f,5,()=>e(H),o=>o.id,(o,v)=>{var w=ze(),L=a(w);{var E=l=>{var g=Ve();T(()=>{q(g,"src",e(v).image),q(g,"alt",e(v).name)}),d(l,g)},S=l=>{var g=We();d(l,g)};j(L,l=>{e(v).image?l(E):l(S,!1)})}var i=s(L,2),x=a(i),F=a(x,!0);r(x);var J=s(x,2),N=a(J);r(J);var A=s(J,2),D=a(A,!0);r(A);var C=s(A,2),O=a(C),I=s(a(O));r(O);var Q=s(O,2),R=a(Q,!0);r(Q),r(C);var U=s(C,2),V=a(U),te=s(V,2);r(U),r(i),r(w),T(()=>{b(F,e(v).name),b(N,`Topic: ${e(v).topic??""}`),b(D,e(v).description),b(I,` ${e(v).memberCount??""} members`),b(R,e(v).isPublic?"Public":"Private"),q(V,"href",`/groups/${e(v).id??""}`)}),se("click",te,()=>pe(e(v).id)),d(o,w)}),r(f),r(n),d(m,n)};j(oe,m=>{e(H).length>0&&m(_e)})}var de=s(oe,2),re=a(de),ye=a(re,!0);r(re);var he=s(re,2);{var we=m=>{var n=Xe(),f=s(a(n),4),o=a(f);{var v=i=>{var x=ne("Try adjusting your search or filter criteria.");d(i,x)},w=i=>{var x=ne("There are no available groups to join right now. Why not create one?");d(i,x)};j(o,i=>{e(y)||e(h)!=="all"?i(v):i(w,!1)})}r(f);var L=s(f,2);{var E=i=>{var x=He();se("click",x,()=>{u(y,""),u(h,"all")}),d(i,x)},S=i=>{var x=Ke();d(i,x)};j(L,i=>{e(y)||e(h)!=="all"?i(E):i(S,!1)})}r(n),d(m,n)},ke=m=>{var n=tr();ae(n,5,()=>e(K),f=>f.id,(f,o)=>{var v=rr(),w=a(v);{var L=l=>{var g=Ye();T(()=>{q(g,"src",e(o).image),q(g,"alt",e(o).name)}),d(l,g)},E=l=>{var g=Ze();d(l,g)};j(w,l=>{e(o).image?l(L):l(E,!1)})}var S=s(w,2),i=a(S),x=a(i,!0);r(i);var F=s(i,2),J=a(F);r(F);var N=s(F,2),A=a(N,!0);r(N);var D=s(N,2),C=a(D),O=s(a(C));r(C);var I=s(C,2),Q=a(I,!0);r(I),r(D);var R=s(D,2),U=a(R);{var V=l=>{var g=$e();se("click",g,()=>ge(e(o).id)),d(l,g)},te=l=>{var g=er();d(l,g)};j(U,l=>{e(o).isPublic?l(V):l(te,!1)})}r(R),r(S),r(v),T(()=>{b(x,e(o).name),b(J,`Topic: ${e(o).topic??""}`),b(A,e(o).description),b(O,` ${e(o).memberCount??""} members`),b(Q,e(o).isPublic?"Public":"Private")}),d(f,v)}),r(n),d(m,n)};j(he,m=>{e(K).length===0?m(we):m(ke,!1)})}r(de),r(_),T(()=>b(ye,e(y)||e(h)!=="all"?"Filtered Groups":"Discover Groups")),Ne(M,()=>e(y),m=>u(y,m)),Ae(ee,()=>e(h),m=>u(h,m)),Fe(1,_,()=>Je,()=>({duration:300})),d(t,_)};j(xe,t=>{e(X)?t(ue):t(be,!1)})}r(Z),d(me,Z),Ce()}export{hr as component};
