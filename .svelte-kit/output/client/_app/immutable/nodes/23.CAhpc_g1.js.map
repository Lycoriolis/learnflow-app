{"version":3,"file":"23.CAhpc_g1.js","sources":["../../../../../../src/routes/forums/category/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { page } from '$app/stores';\n  import { categories, topics, loadCategories, loadTopics, isLoading, error, getCategoryById } from '$lib/stores/forumStore';\n  import CreateTopicForm from '$lib/components/forums/CreateTopicForm.svelte';\n  import Icon from '@iconify/svelte';\n  \n  let categoryId = $page.params.id;\n  let searchQuery = '';\n  let filteredTopics: typeof $topics = [];\n  let showCreateForm = false;\n  let category: ReturnType<typeof getCategoryById>;\n  \n  $: {\n    // Filter topics based on search query\n    filteredTopics = searchQuery ? \n      $topics.filter(topic => \n        topic.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        topic.content.toLowerCase().includes(searchQuery.toLowerCase())\n      ) : \n      $topics;\n  }\n  \n  $: {\n    category = getCategoryById(categoryId);\n  }\n  \n  onMount(async () => {\n    await loadCategories();\n    await loadTopics(categoryId);\n  });\n  \n  function toggleCreateForm() {\n    showCreateForm = !showCreateForm;\n  }\n</script>\n\n<div class=\"container mx-auto px-4 py-8\">\n  <div class=\"mb-6\">\n    <a href=\"/forums\" class=\"inline-flex items-center text-cherry-600 dark:text-cherry-400 hover:underline mb-4\">\n      <Icon icon=\"mdi:arrow-left\" class=\"w-5 h-5 mr-1\" />\n      Back to Forums\n    </a>\n    \n    {#if category}\n      <h1 class=\"text-2xl font-bold text-gray-900 dark:text-white\">{category.name}</h1>\n      <p class=\"text-gray-600 dark:text-gray-400 mt-2\">{category.description}</p>\n    {:else if !$isLoading}\n      <h1 class=\"text-2xl font-bold text-gray-900 dark:text-white\">Category</h1>\n      <p class=\"text-gray-600 dark:text-gray-400 mt-2\">Loading category details...</p>\n    {/if}\n  </div>\n  \n  <div class=\"flex justify-between items-center mb-6\">\n    <div class=\"relative\">\n      <input\n        type=\"text\"\n        bind:value={searchQuery}\n        placeholder=\"Search topics...\"\n        class=\"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400\"\n      />\n      <Icon icon=\"mdi:magnify\" class=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n    </div>\n    \n    <button \n      on:click={toggleCreateForm}\n      class=\"px-4 py-2 bg-cherry-600 text-white rounded-md hover:bg-cherry-700 dark:bg-cherry-500 dark:hover:bg-cherry-600 transition-colors\"\n    >\n      {showCreateForm ? 'Cancel' : 'Create New Topic'}\n    </button>\n  </div>\n  \n  {#if showCreateForm}\n    <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6\">\n      <CreateTopicForm {categoryId} />\n    </div>\n  {/if}\n  \n  {#if $isLoading}\n    <div class=\"flex justify-center items-center py-12\">\n      <div class=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cherry-500\"></div>\n    </div>\n  {:else if $error}\n    <div class=\"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-4 rounded-md mb-6\">\n      <p>{$error}</p>\n    </div>\n  {:else if filteredTopics.length === 0}\n    <div class=\"text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow-md\">\n      <Icon icon=\"mdi:forum-outline\" class=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\n      <h3 class=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">No topics found</h3>\n      {#if searchQuery}\n        <p class=\"text-gray-600 dark:text-gray-400\">No topics match your search criteria.</p>\n      {:else}\n        <p class=\"text-gray-600 dark:text-gray-400\">There are no topics in this category yet. Be the first to create one!</p>\n      {/if}\n    </div>\n  {:else}\n    <div class=\"space-y-4\">\n      {#each filteredTopics as topic}\n        <a href=\"/forums/topic/{topic.id}\" class=\"block\">\n          <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow {topic.isPinned ? 'border-l-4 border-cherry-500 dark:border-cherry-400' : ''}\">\n            <div class=\"p-4\">\n              <div class=\"flex items-start\">\n                {#if topic.isPinned}\n                  <div class=\"flex-shrink-0 mr-3\">\n                    <Icon icon=\"mdi:pin\" class=\"w-5 h-5 text-cherry-600 dark:text-cherry-400\" />\n                  </div>\n                {/if}\n                \n                <div class=\"flex-1\">\n                  <h4 class=\"text-lg font-medium text-gray-900 dark:text-white mb-1\">{topic.title}</h4>\n                  \n                  <div class=\"flex items-center text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                    <span>{topic.authorName || 'Unknown'}</span>\n                    <span class=\"mx-2\">•</span>\n                    <span>{new Date(topic.createdAt).toLocaleDateString()}</span>\n                    <span class=\"mx-2\">•</span>\n                    <span class=\"flex items-center\">\n                      <Icon icon=\"mdi:eye-outline\" class=\"w-4 h-4 mr-1\" />\n                      {topic.viewCount}\n                    </span>\n                    <span class=\"mx-2\">•</span>\n                    <span class=\"flex items-center\">\n                      <Icon icon=\"mdi:comment-outline\" class=\"w-4 h-4 mr-1\" />\n                      {topic.replyCount}\n                    </span>\n                  </div>\n                  \n                  {#if topic.tags && topic.tags.length > 0}\n                    <div class=\"flex flex-wrap gap-2\">\n                      {#each topic.tags as tag}\n                        <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300\">\n                          {tag}\n                        </span>\n                      {/each}\n                    </div>\n                  {/if}\n                </div>\n              </div>\n            </div>\n          </div>\n        </a>\n      {/each}\n    </div>\n  {/if}\n</div>"],"names":["categoryId","$page","searchQuery","filteredTopics","$.mutable_source","showCreateForm","category","onMount","__async","loadCategories","loadTopics","toggleCreateForm","$.set","$.get","$topics","topic","getCategoryById","$.set_text","text","text_1","$isLoading","$$render","consequent_1","consequent","alternate","consequent_2","$error","consequent_5","alternate_3","$.each","div_8","consequent_7","$.index","$$anchor","tag","consequent_8","$.set_attribute","a_1","$.set_class","div_9","text_4","text_7","text_8","consequent_6","alternate_4","consequent_4","alternate_2","consequent_3","alternate_1","$.bind_value","input","$$value"],"mappings":"kwHAOM,IAAAA,EAAaC,IAAM,OAAO,GAC1BC,IAAc,EAAE,EAChBC,EAA8BC,EAAA,EAAA,EAC9BC,IAAiB,EAAK,EACtBC,EAA4CF,EAAA,EAgBhDG,GAAoB,IAAAC,GAAA,4BACZC,GAAc,EACd,MAAAC,GAAWV,CAAU,GAC5B,EAEQ,SAAAW,IAAmB,CAC1BC,EAAAP,KAAkBA,CAAc,CAAA,CAClC,wBAnBEO,EAAAT,EAAiBU,EAAAX,CAAW,EAC1BY,EAAO,EAAC,OAAOC,GACbA,EAAM,MAAM,YAAc,EAAA,SAASF,EAAAX,CAAW,EAAC,YAAW,CAC1D,GAAAa,EAAM,QAAQ,YAAW,EAAG,SAASF,EAAAX,CAAW,EAAC,gBAEnDY,EAAO,CAAA,qBAITR,EAAWU,GAAgBhB,CAAU,CAAA,2MAqB2BiB,EAAAC,EAAAL,EAAAP,CAAQ,EAAC,IAAI,EACzBW,EAAAE,EAAAN,EAAAP,CAAQ,EAAC,WAAW,mEAC7Dc,EAAU,GAAAC,EAAAC,CAAA,mBAHhBhB,CAAQ,EAAAe,EAAAE,EAAA,EAAAF,EAAAG,GAAA,EAAA,oSA4BVnB,CAAc,GAAAgB,EAAAI,EAAA,wHAYXC,EAAM,CAAA,CAAA,4MAMLxB,CAAW,EAAAmB,EAAAM,CAAA,EAAAN,EAAAO,EAAA,EAAA,kCAQTC,GAAAC,EAAA,EAAA,IAAAjB,EAAAV,CAAc,QAAIY,IAAK,wKAKfF,EAAAE,CAAK,EAAC,UAAQM,EAAAU,EAAA,gXA2BNhB,CAAK,EAAC,KAAIiB,GAAA,CAAAC,EAAIC,IAAG,4CAEnBA,CAAG,CAAA,CAAA,oCAJPnB,CAAK,EAAC,MAAQF,EAAAE,CAAK,EAAC,KAAK,OAAS,GAACM,EAAAc,EAAA,8CA7B1BC,GAAAC,EAAA,OAAA,kBAAAxB,EAAAA,EAAAE,CAAK,EAAC,KAANF,KAAAA,EAAQ,EAAA,EAAA,EACgFyB,GAAAC,EAAA,EAAA,oGAAA1B,EAAAE,CAAK,EAAC,SAAW,sDAAwD,EAAE,EAAA,EAU7GE,EAAAuB,GAAA3B,EAAAE,CAAK,EAAC,KAAK,SAGtEA,CAAK,EAAC,YAAc,SAAS,UAMjCE,EAAAwB,GAAA,KAAA5B,EAAAA,EAAAE,CAAK,EAAC,YAANF,KAAAA,EAAe,EAAA,EAAA,EAKfI,EAAAyB,GAAA,KAAA7B,EAAAA,EAAAE,CAAK,EAAC,aAANF,KAAAA,EAAgB,EAAA,EAAA,IATR,IAAA,IAAA,KAAKA,EAAAE,CAAK,EAAC,SAAS,EAAE,mBAAkB,uCA7B3DZ,CAAc,EAAC,SAAW,EAACkB,EAAAsB,CAAA,EAAAtB,EAAAuB,EAAA,EAAA,gBAJ3BlB,EAAM,EAAAL,EAAAwB,CAAA,EAAAxB,EAAAyB,EAAA,EAAA,iBAJX1B,EAAU,EAAAC,EAAA0B,EAAA,EAAA1B,EAAA2B,GAAA,EAAA,sBAVV3C,CAAc,EAAG,SAAW,kBAAkB,CAAA,EAXjC4C,GAAAC,EAAA,IAAArC,EAAAX,CAAW,OAAXA,EAAWiD,CAAA,CAAA,eAQfxC,EAAgB"}