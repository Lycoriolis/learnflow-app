import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as _e,l as j,a as he,f as W,b as ye,$ as we,s as t,m as f,g as r,e as o,c as s,r as a,t as F}from"../chunks/D8Zr53n5.js";import{s as I}from"../chunks/UpSy6tP0.js";import{i as $}from"../chunks/BAqAra_5.js";import{e as $e}from"../chunks/8AErAcLY.js";import{c as ke,a as n,t as g}from"../chunks/ByokzzJe.js";import{h as Le,e as T}from"../chunks/CCLz0Z0F.js";import{s as X}from"../chunks/DpNHaJTn.js";import{s as E}from"../chunks/Cw_GgyMt.js";import{s as Ce}from"../chunks/DbFW2zKx.js";import{i as Pe}from"../chunks/BzVavbfz.js";import{s as Ae,a as k}from"../chunks/CYIMW-vo.js";import{o as De,a as Me}from"../chunks/DyX_nzx0.js";import{a as Z,i as je,l as Fe,b as Ie}from"../chunks/QfzvdxsM.js";import{l as Te}from"../chunks/LciTkaa2.js";import{g as Be}from"../chunks/BMc8ARJA.js";import{w as Ge}from"../chunks/B51PyqUg.js";var Ne=g('<div class="flex items-center justify-center min-h-[60vh]"><i class="fas fa-spinner fa-spin text-4xl text-indigo-500"></i></div>'),Ue=g('<div class="flex flex-col items-center justify-center min-h-[60vh]"><p class="text-xl text-gray-600 dark:text-gray-300 mb-4">Please log in to view your learning progress.</p> <button class="px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md">Log In</button></div>'),Ve=g('<div class="text-red-500 mb-4"> </div>'),Ye=g('<div class="text-center text-gray-600 dark:text-gray-400 py-20"><p>You are not enrolled in any courses yet.</p> <a href="/courses" class="mt-4 inline-block px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md">Browse Courses</a></div>'),qe=g('<div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow mb-6"><h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Continue Learning</h2> <p class="text-gray-700 dark:text-gray-300"> </p> <a class="mt-4 inline-block text-indigo-600 hover:underline">Go to Course</a></div>'),ze=g('<div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow flex flex-col"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2"> </h3> <div class="flex items-center mb-2"><div class="w-full bg-gray-200 dark:bg-gray-700 h-2 rounded-full overflow-hidden"><div class="h-2 bg-indigo-600 dark:bg-indigo-500"></div></div> <span class="ml-2 text-sm"> </span></div> <a class="mt-auto text-indigo-600 hover:underline">View Course</a></div>'),Ee=g('<!> <div class="mb-4 border-b border-gray-200 dark:border-gray-700"><button>In Progress</button> <button>Completed</button> <button>All</button></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>',1),He=g('<div class="max-w-7xl mx-auto px-4 py-6"><h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">My Learning</h1> <!> <!></div>');function dr(ee,re){_e(re,!1);const[_,te]=Ae(),oe=()=>k(Ie,"$userProfile",_),H=()=>k(je,"$isAuthenticated",_),u=()=>k(B,"$coursesData",_),ae=()=>k(Fe,"$authLoading",_),se=()=>k(Z,"$userProfileLoading",_),J=f(),K=f(),h=f(),L=f();let B=Ge([]),C=f(!1),P=f(null),l=f("in-progress"),G;function ie(){Be("/login?redirect=/my-learning")}async function ne(){var b;t(C,!0),t(P,null);const e=oe();if(!((b=e==null?void 0:e.preferences)!=null&&b.enrollments)){B.set([]),t(C,!1);return}try{const y=await Promise.all(e.preferences.enrollments.map(async A=>({meta:await Te("course",A.id),enrollment:A})));B.set(y)}catch(y){console.error(y),t(P,"Failed to load enrolled courses")}finally{t(C,!1)}}De(()=>{H()&&(G=Z.subscribe(e=>{e||ne()}))}),Me(()=>{G&&G()}),j(()=>u(),()=>{t(J,u().filter(e=>e.enrollment.progress>0&&e.enrollment.progress<100))}),j(()=>u(),()=>{t(K,u().filter(e=>e.enrollment.progress===100))}),j(()=>u(),()=>{t(h,u())}),j(()=>r(h),()=>{t(L,r(h).find(e=>e.enrollment.progress>0&&e.enrollment.progress<100))}),he(),Pe();var O=ke();Le(e=>{we.title="My Learning | LearnFlow"});var le=W(O);{var de=e=>{var b=Ne();n(e,b)},ce=(e,b)=>{{var y=x=>{var v=Ue(),D=o(s(v),2);a(v),T("click",D,ie),n(x,v)},A=x=>{var v=He(),D=o(s(v),2);{var ge=i=>{var d=Ve(),M=s(d,!0);a(d),F(()=>I(M,r(P))),n(i,d)};$(D,i=>{r(P)&&i(ge)})}var ve=o(D,2);{var me=i=>{var d=Ye();n(i,d)},pe=i=>{var d=Ee(),M=W(d);{var fe=m=>{var c=qe(),p=o(s(c),2),w=s(p);a(p);var Y=o(p,2);a(c),F(()=>{I(w,`Next: ${r(L).meta.title??""}`),X(Y,"href",`/courses/${r(L).meta.id}`)}),n(m,c)};$(M,m=>{r(L)&&m(fe)})}var N=o(M,2),U=s(N),V=o(U,2),Q=o(V,2);a(N);var R=o(N,2);$e(R,5,()=>r(l)==="in-progress"?r(J):r(l)==="completed"?r(K):r(h),m=>m.meta.id,(m,c)=>{var p=ze(),w=s(p),Y=s(w,!0);a(w);var q=o(w,2),z=s(q),ue=s(z);a(z);var S=o(z,2),be=s(S);a(S),a(q);var xe=o(q,2);a(p),F(()=>{I(Y,r(c).meta.title),Ce(ue,`width:${r(c).enrollment.progress??""}%`),I(be,`${r(c).enrollment.progress??""}%`),X(xe,"href",`/courses/${r(c).meta.id}`)}),n(m,p)}),a(R),F(()=>{E(U,1,`py-2 px-4 ${r(l)==="in-progress"?"border-b-2 border-indigo-500 text-indigo-600":""}`),E(V,1,`py-2 px-4 ${r(l)==="completed"?"border-b-2 border-indigo-500 text-indigo-600":""}`),E(Q,1,`py-2 px-4 ${r(l)==="all"?"border-b-2 border-indigo-500 text-indigo-600":""}`)}),T("click",U,()=>t(l,"in-progress")),T("click",V,()=>t(l,"completed")),T("click",Q,()=>t(l,"all")),n(i,d)};$(ve,i=>{r(h).length===0?i(me):i(pe,!1)})}a(v),n(x,v)};$(e,x=>{H()?x(A,!1):x(y)},b)}};$(le,e=>{ae()||se()||r(C)?e(de):e(ce,!1)})}n(ee,O),ye(),te()}export{dr as component};
