import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as le,m as n,t as c,g as r,b as se,$ as de,e as l,c as i,r as o,i as U,s}from"../chunks/D8Zr53n5.js";import{s as g}from"../chunks/UpSy6tP0.js";import{i as J}from"../chunks/BAqAra_5.js";import{e as L,i as Q}from"../chunks/8AErAcLY.js";import{t as p,a as f}from"../chunks/ByokzzJe.js";import{h as ne,e as R,r as ce}from"../chunks/CCLz0Z0F.js";import{r as ue}from"../chunks/DpNHaJTn.js";import{s as ve}from"../chunks/Cw_GgyMt.js";import{t as me,f as be}from"../chunks/CwmK-V57.js";import{b as z}from"../chunks/Djn-aou_.js";import{b as H}from"../chunks/dleV8ATl.js";import{p as ge}from"../chunks/Bfc47y5P.js";import{i as fe}from"../chunks/BzVavbfz.js";import{p as pe}from"../chunks/D0guHZRM.js";import{g as K}from"../chunks/BMc8ARJA.js";var ye=p('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"> </div>'),xe=p('<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4"> </div>'),_e=p("<option> </option>"),he=p("<option> </option>"),ke=p('<div class="container mx-auto px-4 py-8"><a href="/admin/forums" class="text-blue-600 hover:underline mb-4 inline-block">&larr; Back to Forum Management</a> <h1 class="text-2xl font-bold mb-6">Edit Category</h1> <!> <!> <form class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md"><div class="mb-4"><label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Category Name</label> <input id="name" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required></div> <div class="mb-4"><label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label> <textarea id="description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required></textarea></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><div><label for="icon" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Icon</label> <div class="flex items-center space-x-2"><select id="icon" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"></select> <div class="w-10 h-10 flex items-center justify-center bg-gray-100 dark:bg-gray-600 rounded-md"><i></i></div></div></div> <div><label for="color" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Color</label> <select id="color" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"></select></div></div> <div class="flex justify-between"><button type="submit" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md disabled:opacity-50"> </button> <button type="button" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md">Delete Category</button></div></form></div>');function Pe(V,F){le(F,!1);let W=pe(F,"data",8),{category:u}=W(),w=n(u.name),C=n(u.description),v=n(u.icon||"fa-folder"),m=n(u.color||"blue"),y=n(!1),d=n(""),x=n("");const X=[{value:"blue",label:"Blue"},{value:"green",label:"Green"},{value:"red",label:"Red"},{value:"purple",label:"Purple"},{value:"orange",label:"Orange"},{value:"indigo",label:"Indigo"},{value:"gray",label:"Gray"}],Y=[{value:"fa-folder",label:"Folder"},{value:"fa-code",label:"Code"},{value:"fa-question-circle",label:"Question"},{value:"fa-book",label:"Book"},{value:"fa-graduation-cap",label:"Education"},{value:"fa-users",label:"Users"},{value:"fa-cogs",label:"Settings"},{value:"fa-laptop",label:"Computer"},{value:"fa-chart-bar",label:"Chart"}];async function Z(){s(y,!0),s(d,""),s(x,"");try{const e=await fetch(`/api/forum/categories/${u.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r(w),description:r(C),icon:r(v),color:r(m)})});if(e.ok)s(x,"Category updated successfully!"),setTimeout(()=>K("/admin/forums"),1500);else{const a=await e.json();s(d,a.message||"Failed to update category.")}}catch(e){s(d,"An unexpected error occurred."),console.error(e)}finally{s(y,!1)}}async function ee(){if(confirm("Are you sure you want to delete this category? This cannot be undone and will fail if there are topics in this category."))try{const e=await fetch(`/api/forum/categories/${u.id}`,{method:"DELETE"});if(e.ok)K("/admin/forums");else{const a=await e.json();s(d,a.message||"Failed to delete category.")}}catch(e){s(d,"An unexpected error occurred."),console.error(e)}}fe();var _=ke();ne(e=>{de.title="Edit Category | Admin"});var O=l(i(_),4);{var re=e=>{var a=ye(),t=i(a,!0);o(a),c(()=>g(t,r(d))),f(e,a)};J(O,e=>{r(d)&&e(re)})}var q=l(O,2);{var ae=e=>{var a=xe(),t=i(a,!0);o(a),c(()=>g(t,r(x))),f(e,a)};J(q,e=>{r(x)&&e(ae)})}var E=l(q,2),$=i(E),B=l(i($),2);ue(B),o($);var j=l($,2),M=l(i(j),2);ce(M),o(j);var D=l(j,2),S=i(D),G=l(i(S),2),h=i(G);c(()=>{r(v),U(()=>{})}),L(h,5,()=>Y,Q,(e,a)=>{var t=_e(),b={},A=i(t,!0);o(t),c(()=>{b!==(b=r(a).value)&&(t.value=(t.__value=r(a).value)==null?"":r(a).value),g(A,r(a).label)}),f(e,t)}),o(h);var I=l(h,2),oe=i(I);o(I),o(G),o(S);var N=l(S,2),T=l(i(N),2);c(()=>{r(m),U(()=>{})}),L(T,5,()=>X,Q,(e,a)=>{var t=he(),b={},A=i(t,!0);o(t),c(()=>{b!==(b=r(a).value)&&(t.value=(t.__value=r(a).value)==null?"":r(a).value),g(A,r(a).label)}),f(e,t)}),o(T),o(N),o(D);var P=l(D,2),k=i(P),te=i(k,!0);o(k);var ie=l(k,2);o(P),o(E),o(_),c(()=>{ve(oe,1,`fas ${r(v)} text-${r(m)}-500`),k.disabled=r(y),g(te,r(y)?"Saving...":"Save Changes")}),z(B,()=>r(w),e=>s(w,e)),z(M,()=>r(C),e=>s(C,e)),H(h,()=>r(v),e=>s(v,e)),H(T,()=>r(m),e=>s(m,e)),R("click",ie,ee),R("submit",E,ge(Z)),me(1,_,()=>be),f(V,_),se()}export{Pe as component};
