import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as Le,b as De,$ as Se,s as n,m as g,c as r,r as t,e as a,f as Ne,g as e,t as F,i as Ae,at as B}from"../chunks/D8Zr53n5.js";import{s as le}from"../chunks/UpSy6tP0.js";import{i as O}from"../chunks/BAqAra_5.js";import{t as y,a as b}from"../chunks/ByokzzJe.js";import{h as Me,e as W}from"../chunks/CCLz0Z0F.js";import{r as m,a as Ie}from"../chunks/DpNHaJTn.js";import{b as f}from"../chunks/Djn-aou_.js";import{b as Te}from"../chunks/dleV8ATl.js";import{i as Ue}from"../chunks/BzVavbfz.js";import{s as je,a as k}from"../chunks/CYIMW-vo.js";import{o as Ce}from"../chunks/DyX_nzx0.js";import{b as ne,l as Ee,a as Fe,i as Oe,u as We,d as qe,g as ze,e as Ge}from"../chunks/QfzvdxsM.js";import{g as He}from"../chunks/BMc8ARJA.js";import{t as de}from"../chunks/DXDQnthP.js";import{u as Je}from"../chunks/z6kK6n-3.js";var Ke=y('<div class="flex justify-center items-center min-h-[50vh]"><i class="fas fa-spinner fa-spin text-3xl text-indigo-500"></i></div>'),Qe=y('<div class="text-red-500 mb-4"> </div>'),Re=y('<h1 class="text-2xl font-bold mb-4">Account Settings</h1> <!> <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 space-y-6"><div><h2 class="text-lg font-semibold mb-2">Profile</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="displayName" class="block text-sm font-medium mb-1">Display Name</label> <input type="text" id="displayName" class="w-full rounded border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"></div> <div><label for="email" class="block text-sm font-medium mb-1">Email (cannot change)</label> <input type="email" id="email" readonly="" class="w-full rounded border-gray-300 dark:border-gray-600 p-2 bg-gray-100 dark:bg-gray-600 text-gray-500"></div></div></div> <div><h2 class="text-lg font-semibold mb-2">Preferences</h2> <div class="space-y-4"><div><label for="theme" class="block text-sm font-medium mb-1">Theme</label> <select id="theme" class="w-full rounded border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"><option>Auto</option><option>Light</option><option>Dark</option></select></div> <div><fieldset class="space-y-4"><legend class="text-sm font-medium mb-1">Pomodoro Durations (minutes)</legend> <div class="grid grid-cols-2 gap-4"><div><label for="work-duration" class="block text-sm text-gray-500">Work Duration</label> <input type="number" id="work-duration" min="1" class="w-full rounded border-gray-300 dark:border-gray-600 p-2"></div> <div><label for="short-break" class="block text-sm text-gray-500">Short Break</label> <input type="number" id="short-break" min="1" class="w-full rounded border-gray-300 dark:border-gray-600 p-2"></div> <div><label for="long-break" class="block text-sm text-gray-500">Long Break</label> <input type="number" id="long-break" min="1" class="w-full rounded border-gray-300 dark:border-gray-600 p-2"></div> <div><label for="interval" class="block text-sm text-gray-500">Sessions Before Long Break</label> <input type="number" id="interval" min="1" class="w-full rounded border-gray-300 dark:border-gray-600 p-2"></div></div></fieldset></div></div></div> <div class="flex justify-end space-x-2"><button class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Sign Out</button> <button class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"> </button></div></div>',1),Ve=y('<div class="text-center py-20"><p class="text-lg text-gray-600 dark:text-gray-300 mb-4">Please log in to manage your settings.</p> <button class="px-6 py-2 bg-indigo-600 text-white rounded">Log In</button></div>'),Xe=y('<div class="max-w-3xl mx-auto px-4 py-6"><!></div>');function pa(ue,ve){Le(ve,!1);const[c,ge]=je(),q=()=>k(ne,"$userProfile",c),me=()=>k(Ee,"$authLoading",c),ce=()=>k(Fe,"$userProfileLoading",c),pe=()=>k(Oe,"$isAuthenticated",c),be=()=>k(We,"$user",c);let d=g(""),z=g(""),p=g("auto"),o=g({work:25,shortBreak:5,longBreak:15,interval:4}),_=g(!1),h=g(null),$,P;Ce(()=>($=ne.subscribe(i=>{var s;i&&(n(d,i.displayName||""),n(z,i.email),n(p,((s=i.preferences)==null?void 0:s.theme)||"auto"))}),P=de.subscribe(i=>{n(o,{work:Math.round(i.workDuration/60),shortBreak:Math.round(i.shortBreakDuration/60),longBreak:Math.round(i.longBreakDuration/60),interval:i.longBreakInterval})}),()=>{$&&$(),P&&P()}));async function fe(){var i;n(_,!0),n(h,null);try{const s=ze();s&&e(d)!==s.displayName&&await Je(s,{displayName:e(d)}),s&&await Ge(s.uid,{displayName:e(d),preferences:{theme:e(p),...((i=q())==null?void 0:i.preferences)||{}}}),de.set({workDuration:e(o).work*60,shortBreakDuration:e(o).shortBreak*60,longBreakDuration:e(o).longBreak*60,longBreakInterval:e(o).interval})}catch(s){console.error(s),n(h,s.message)}finally{n(_,!1)}}function ke(){He("/login?redirect=/settings")}Ue();var L=Xe();Me(i=>{Se.title="Account Settings | LearnFlow"});var ye=r(L);{var _e=i=>{var s=Ke();b(i,s)},he=(i,s)=>{{var xe=u=>{var v=Re(),x=a(Ne(v),2);{var Be=l=>{var E=Qe(),Pe=r(E,!0);t(E),F(()=>le(Pe,e(h))),b(l,E)};O(x,l=>{e(h)&&l(Be)})}var G=a(x,2),D=r(G),H=a(r(D),2),S=r(H),J=a(r(S),2);m(J),t(S);var K=a(S,2),Q=a(r(K),2);m(Q),t(K),t(H),t(D);var N=a(D,2),R=a(r(N),2),A=r(R),M=a(r(A),2);F(()=>{e(p),Ae(()=>{})});var I=r(M);I.value=(I.__value="auto")==null?"":"auto";var T=a(I);T.value=(T.__value="light")==null?"":"light";var V=a(T);V.value=(V.__value="dark")==null?"":"dark",t(M),t(A);var X=a(A,2),Y=r(X),Z=a(r(Y),2),U=r(Z),ee=a(r(U),2);m(ee),t(U);var j=a(U,2),ae=a(r(j),2);m(ae),t(j);var C=a(j,2),re=a(r(C),2);m(re),t(C);var te=a(C,2),ie=a(r(te),2);m(ie),t(te),t(Z),t(Y),t(X),t(R),t(N);var oe=a(N,2),se=r(oe),w=a(se,2),$e=r(w,!0);t(w),t(oe),t(G),F(()=>{Ie(Q,e(z)),w.disabled=e(_),le($e,e(_)?"Saving...":"Save Changes")}),f(J,()=>e(d),l=>n(d,l)),Te(M,()=>e(p),l=>n(p,l)),f(ee,()=>e(o).work,l=>B(o,e(o).work=l)),f(ae,()=>e(o).shortBreak,l=>B(o,e(o).shortBreak=l)),f(re,()=>e(o).longBreak,l=>B(o,e(o).longBreak=l)),f(ie,()=>e(o).interval,l=>B(o,e(o).interval=l)),W("click",se,()=>qe()),W("click",w,fe),b(u,v)},we=u=>{var v=Ve(),x=a(r(v),2);t(v),W("click",x,ke),b(u,v)};O(i,u=>{pe()&&be()&&q()?u(xe):u(we,!1)},s)}};O(ye,i=>{me()||ce()?i(_e):i(he,!1)})}t(L),b(ue,L),De(),ge()}export{pa as component};
