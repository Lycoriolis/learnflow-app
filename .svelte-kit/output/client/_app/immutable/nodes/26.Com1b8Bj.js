var Ar=(C,L,g)=>new Promise((E,R)=>{var U=h=>{try{$(g.next(h))}catch(w){R(w)}},o=h=>{try{$(g.throw(h))}catch(w){R(w)}},$=h=>h.done?E(h.value):Promise.resolve(h.value).then(U,o);$((g=g.apply(C,L)).next())});import"../chunks/COm6N4YE.js";import"../chunks/69_IOA4Y.js";import{p as Sr,b as jr,s as T,m as ar,d as e,r,t as I,n as K,c as s,e as or,g as a}from"../chunks/HPQed-Yx.js";import{t as n,a as d,r as ee,e as te}from"../chunks/ZM6Rlk1U.js";import{i as Fr}from"../chunks/D0cPXSkH.js";import{s as Lr,a as O}from"../chunks/CGqtlgv0.js";import{p as ae}from"../chunks/BBukhNps.js";import{s as m}from"../chunks/PqlH_gqs.js";import{i as b}from"../chunks/Da7F0fHf.js";import{e as Tr,i as Mr}from"../chunks/ErG-rR4v.js";import{s as sr}from"../chunks/G1Z7eEzt.js";import{b as oe}from"../chunks/D8Qc2aSm.js";import{p as se}from"../chunks/BWjJF4ZV.js";import{o as ie}from"../chunks/Bpt9IQqH.js";import{d as Pr,i as de,e as ne,h as le,j as ce}from"../chunks/DucSn23Y.js";import{I as S}from"../chunks/BC8mezXZ.js";import{M as Ir}from"../chunks/D-UabZxA.js";import{l as ve}from"../chunks/BWnoWNEX.js";import{a as me}from"../chunks/D8i9UXqZ.js";var pe=n('<div class="flex justify-center items-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cherry-500"></div></div>'),ue=n('<div class="bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-4 rounded-md mb-6"><p> </p></div>'),ge=n('<a class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"> </a>'),he=n('<div class="flex flex-wrap gap-2 mb-4"></div>'),xe=n('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-center"><!> <p class="text-gray-600 dark:text-gray-400">No replies yet. Be the first to reply!</p></div>'),fe=n('<img class="w-10 h-10 rounded-full">'),_e=n('<div class="w-10 h-10 rounded-full bg-cherry-100 dark:bg-cherry-900/30 flex items-center justify-center"><span class="text-cherry-600 dark:text-cherry-400 text-lg font-medium"> </span></div>'),ye=n('<div class="mt-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400"><!> Accepted Answer</div>'),be=n('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"><div class="p-5"><div class="flex items-start"><div class="flex-shrink-0 mr-4"><!></div> <div class="flex-1"><div class="flex items-center justify-between mb-2"><span class="font-medium text-gray-900 dark:text-white"> </span> <span class="text-sm text-gray-500 dark:text-gray-400"> </span></div> <div class="prose dark:prose-invert max-w-none"><!></div> <!></div></div></div></div>'),we=n('<div class="space-y-4"></div>'),ke=n('<div class="text-red-600 dark:text-red-400 text-sm mt-2"> </div>'),$e=n('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-5"><textarea placeholder="Write your reply here... (Markdown supported)" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400 min-h-[150px]"></textarea> <!> <div class="flex justify-end mt-4"><button class="px-4 py-2 bg-cherry-600 text-white rounded-md hover:bg-cherry-700 dark:bg-cherry-500 dark:hover:bg-cherry-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"> </button></div></div>'),Ae=n('<div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-5 text-center"><p class="text-gray-700 dark:text-gray-300 mb-3">You need to be logged in to reply to this topic.</p> <a href="/login" class="inline-block px-4 py-2 bg-cherry-600 text-white rounded-md hover:bg-cherry-700 dark:bg-cherry-500 dark:hover:bg-cherry-600 transition-colors">Log In to Reply</a></div>'),Te=n('<div class="mt-8"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Add Your Reply</h3> <!></div>'),Me=n('<div class="mt-8 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 text-center text-yellow-800 dark:text-yellow-400"><!> This topic is locked. New replies are not allowed.</div>'),Pe=n('<div class="mb-6"><a class="inline-flex items-center text-cherry-600 dark:text-cherry-400 hover:underline mb-4"><!> Back to Forum</a> <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2"> </h1> <div class="flex items-center text-sm text-gray-600 dark:text-gray-400 mb-4"><span class="flex items-center"><!> </span> <span class="mx-2">•</span> <span> </span> <span class="mx-2">•</span> <span class="flex items-center"><!> </span> <span class="mx-2">•</span> <span class="flex items-center"><!> </span></div> <!> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-5 mb-6"><div class="prose dark:prose-invert max-w-none"><!></div></div> <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4"> </h2> <!> <!></div>'),Ie=n(`<div class="text-center py-12"><!> <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">Topic not found</h3> <p class="text-gray-600 dark:text-gray-400">The topic you're looking for doesn't exist or has been removed.</p> <a href="/forums" class="inline-block mt-4 px-4 py-2 bg-cherry-600 text-white rounded-md hover:bg-cherry-700 dark:bg-cherry-500 dark:hover:bg-cherry-600 transition-colors">Back to Forums</a></div>`),Se=n('<div class="forum-topic"><!></div>');function je(C,L){Sr(L,!1);const[g,E]=Lr(),R=()=>O(de,"$isLoading",g),U=()=>O(ne,"$error",g),o=()=>O(le,"$currentTopic",g),$=()=>O(ce,"$posts",g);let h=se(L,"topicId",8),w=ar(""),N=ar(!1),Y=ar(null),Q=ar(!1);ie(()=>{const l=me();return T(Q,!!l.currentUser),Pr(h()),l.onAuthStateChanged(A=>{T(Q,!!A)})});function Rr(){return Ar(this,null,function*(){if(!(!a(w).trim()||!a(Q))){T(N,!0),T(Y,null);try{(yield ve({topic_id:h(),content:a(w)}))?(T(w,""),yield Pr(h())):T(Y,"Failed to create post. Please try again.")}catch(l){console.error("Error submitting post:",l),T(Y,"An error occurred while submitting your post.")}finally{T(N,!1)}}})}function xr(l){if(!l)return"Unknown date";const A=new Date().getTime()-l.getTime();if(A<24*60*60*1e3){const M=Math.floor(A/36e5);if(M<1){const k=Math.floor(A/6e4);return k<1?"Just now":`${k} minute${k!==1?"s":""} ago`}return`${M} hour${M!==1?"s":""} ago`}if(A<7*24*60*60*1e3){const M=Math.floor(A/864e5);return`${M} day${M!==1?"s":""} ago`}return l.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}Fr();var ir=Se(),Ur=e(ir);{var Br=l=>{var q=pe();d(l,q)},Dr=(l,q)=>{{var A=k=>{var J=ue(),V=e(J),dr=e(V,!0);r(V),r(J),I(()=>m(dr,U())),d(k,J)},M=(k,J)=>{{var V=B=>{var W=Pe(),D=e(W),z=e(D);S(z,{icon:"mdi:arrow-left",class:"w-5 h-5 mr-1"}),K(),r(D);var j=s(D,2),nr=e(j,!0);r(j);var lr=s(j,2),cr=e(lr),fr=e(cr);S(fr,{icon:"mdi:account",class:"w-4 h-4 mr-1"});var Cr=s(fr);r(cr);var vr=s(cr,4),Er=e(vr,!0);r(vr);var mr=s(vr,4),_r=e(mr);S(_r,{icon:"mdi:eye-outline",class:"w-4 h-4 mr-1"});var Nr=s(_r);r(mr);var yr=s(mr,4),br=e(yr);S(br,{icon:"mdi:comment-outline",class:"w-4 h-4 mr-1"});var Yr=s(br);r(yr),r(lr);var wr=s(lr,2);{var qr=i=>{var t=he();Tr(t,5,()=>o().tags,Mr,(p,c)=>{var v=ge(),x=e(v,!0);r(v),I(()=>{var f;sr(v,"href",`/forums/tag/${(f=a(c))!=null?f:""}`),m(x,a(c))}),d(p,v)}),r(t),d(i,t)};b(wr,i=>{o().tags&&o().tags.length>0&&i(qr)})}var pr=s(wr,2),kr=e(pr),Jr=e(kr);Ir(Jr,{get content(){return o().content}}),r(kr),r(pr);var ur=s(pr,2),Wr=e(ur);r(ur);var $r=s(ur,2);{var zr=i=>{var t=xe(),p=e(t);S(p,{icon:"mdi:comment-text-outline",class:"w-12 h-12 mx-auto text-gray-400 mb-2"}),K(2),r(t),d(i,t)},Gr=i=>{var t=we();Tr(t,5,$,Mr,(p,c)=>{var v=be(),x=e(v),f=e(x),P=e(f),X=e(P);{var gr=u=>{var y=fe();I(()=>{sr(y,"src",a(c).authorAvatar),sr(y,"alt",a(c).author_name)}),d(u,y)},Z=u=>{var y=_e(),er=e(y),re=e(er,!0);r(er),r(y),I(tr=>m(re,tr),[()=>{var tr;return((tr=a(c).author_name)==null?void 0:tr.charAt(0))||"A"}],or),d(u,y)};b(X,u=>{a(c).authorAvatar?u(gr):u(Z,!1)})}r(P);var F=s(P,2),G=e(F),_=e(G),H=e(_,!0);r(_);var rr=s(_,2),Qr=e(rr,!0);r(rr),r(G);var hr=s(G,2),Vr=e(hr);Ir(Vr,{get content(){return a(c).content}}),r(hr);var Xr=s(hr,2);{var Zr=u=>{var y=ye(),er=e(y);S(er,{icon:"mdi:check-circle",class:"w-4 h-4 mr-1"}),K(),r(y),d(u,y)};b(Xr,u=>{a(c).is_answer&&u(Zr)})}r(F),r(f),r(x),r(v),I(u=>{m(H,a(c).author_name||"Unknown"),m(Qr,u)},[()=>xr(a(c).created_at)],or),d(p,v)}),r(t),d(i,t)};b($r,i=>{$().length===0?i(zr):i(Gr,!1)})}var Hr=s($r,2);{var Kr=i=>{var t=Te(),p=s(e(t),2);{var c=x=>{var f=$e(),P=e(f);ee(P);var X=s(P,2);{var gr=_=>{var H=ke(),rr=e(H,!0);r(H),I(()=>m(rr,a(Y))),d(_,H)};b(X,_=>{a(Y)&&_(gr)})}var Z=s(X,2),F=e(Z),G=e(F,!0);r(F),r(Z),r(f),I(_=>{P.disabled=a(N),F.disabled=_,m(G,a(N)?"Submitting...":"Post Reply")},[()=>a(N)||!a(w).trim()],or),oe(P,()=>a(w),_=>T(w,_)),te("click",F,Rr),d(x,f)},v=x=>{var f=Ae();d(x,f)};b(p,x=>{a(Q)?x(c):x(v,!1)})}r(t),d(i,t)},Or=i=>{var t=Me(),p=e(t);S(p,{icon:"mdi:lock",class:"w-5 h-5 inline-block mr-2"}),K(),r(t),d(i,t)};b(Hr,i=>{o().is_locked?i(Or,!1):i(Kr)})}r(W),I(i=>{var t,p,c,v;sr(D,"href",`/forums/category/${(t=o().category_id)!=null?t:""}`),m(nr,o().title),m(Cr,` ${o().author_name||"Unknown"}`),m(Er,i),m(Nr,` ${(p=o().views)!=null?p:""} view${o().views!==1?"s":""}`),m(Yr,` ${(c=o().post_count)!=null?c:""} repl${o().post_count!==1?"ies":"y"}`),m(Wr,`Replies (${(v=$().length)!=null?v:""})`)},[()=>xr(o().created_at)],or),d(B,W)},dr=(B,W)=>{{var D=z=>{var j=Ie(),nr=e(j);S(nr,{icon:"mdi:alert-circle-outline",class:"w-16 h-16 mx-auto text-gray-400 mb-4"}),K(6),r(j),d(z,j)};b(B,z=>{R()||z(D)},W)}};b(k,B=>{o()?B(V):B(dr,!1)},J)}};b(l,k=>{U()?k(A):k(M,!1)},q)}};b(Ur,l=>{R()?l(Br):l(Dr,!1)})}r(ir),d(C,ir),jr(),E()}var Fe=n('<div class="container mx-auto px-4 py-8"><!></div>');function Ze(C,L){Sr(L,!1);const[g,E]=Lr(),U=O(ae,"$page",g).params.id;Fr();var o=Fe(),$=e(o);je($,{topicId:U}),r(o),d(C,o),jr(),E()}export{Ze as component};
//# sourceMappingURL=26.Com1b8Bj.js.map
