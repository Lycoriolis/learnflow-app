import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as q,l as z,a as C,f as p,b as G,g as c,m as I,s as L}from"../chunks/D8Zr53n5.js";import{c as v,a as l,t as y}from"../chunks/ByokzzJe.js";import{i as h}from"../chunks/BAqAra_5.js";import{s as M}from"../chunks/ycPwrSgR.js";import{t as b,f as x}from"../chunks/CwmK-V57.js";import{i as P}from"../chunks/BzVavbfz.js";import{s as V,a as d}from"../chunks/CYIMW-vo.js";import{g as Y}from"../chunks/BMc8ARJA.js";import{p as B}from"../chunks/Doo5AiZ_.js";import{u as D,l as E,i as F}from"../chunks/QfzvdxsM.js";import{o as H}from"../chunks/DyX_nzx0.js";var J=y('<div class="fixed inset-0 bg-white dark:bg-gray-900 z-50 flex justify-center items-center"><div class="flex flex-col items-center"><div class="w-16 h-16 border-4 border-t-indigo-500 border-indigo-200 rounded-full animate-spin"></div> <p class="mt-4 text-gray-600 dark:text-gray-400">Verifying authentication...</p></div></div>'),K=y('<div class="flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900"><div class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg max-w-md w-full"><div class="text-center"><div class="mb-4 flex justify-center"><div class="h-16 w-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center"><i class="fas fa-lock text-red-600 dark:text-red-400 text-2xl"></i></div></div> <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Authentication Required</h2> <p class="text-gray-600 dark:text-gray-400 mb-6">You need to be logged in to access this page.</p> <a href="/login" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded">Go to Login</a></div></div></div>');function oe(_,f){q(f,!1);const[o,k]=V(),a=()=>d(F,"$isAuthenticated",o),i=()=>d(E,"$loading",o),m=()=>d(D,"$user",o),g=()=>d(B,"$page",o);let r=I(!1);H(()=>{console.log("Protected layout mounted",{isAuthenticated:a(),loading:i(),user:m()?{email:m().email}:null})}),z(()=>(i(),c(r),a(),g()),()=>{!i()&&!c(r)&&(L(r,!0),console.log("Auth check in protected layout:",{isAuthenticated:a(),loading:i()}),a()||(console.warn("User not authenticated, redirecting to login"),Y("/login?redirect="+encodeURIComponent(g().url.pathname))))}),C(),P();var u=v(),w=p(u);{var A=e=>{var n=J();b(1,n,()=>x),l(e,n)},$=(e,n)=>{{var j=t=>{var s=v(),U=p(s);M(U,f,"default",{}),l(t,s)},R=t=>{var s=K();b(1,s,()=>x),l(t,s)};h(e,t=>{a()?t(j):t(R,!1)},n)}};h(w,e=>{i()||!c(r)?e(A):e($,!1)})}l(_,u),G(),k()}export{oe as component};
