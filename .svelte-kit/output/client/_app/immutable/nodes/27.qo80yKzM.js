var ie=(Y,Z,k)=>new Promise((N,L)=>{var A=n=>{try{u(k.next(n))}catch(S){L(S)}},f=n=>{try{u(k.throw(n))}catch(S){L(S)}},u=n=>n.done?N(n.value):Promise.resolve(n.value).then(A,f);u((k=k.apply(Y,Z)).next())});import"../chunks/COm6N4YE.js";import"../chunks/69_IOA4Y.js";import{p as je,l as X,a as Ge,b as Ce,$ as Te,s as y,m as j,g as e,d as t,r,c as i,n as me,t as P,k as Pe,j as Le}from"../chunks/HPQed-Yx.js";import{s as _}from"../chunks/PqlH_gqs.js";import{i as G}from"../chunks/Da7F0fHf.js";import{e as le,i as Se}from"../chunks/ErG-rR4v.js";import{t as m,a as v,e as oe,i as fe}from"../chunks/ZM6Rlk1U.js";import{h as Me}from"../chunks/Bkjpsbyi.js";import{r as Fe,s as W}from"../chunks/G1Z7eEzt.js";import{t as Je,f as Ne}from"../chunks/D3PCwpG5.js";import{b as Ae}from"../chunks/D8Qc2aSm.js";import{b as Oe}from"../chunks/RqW7FABT.js";import{i as qe}from"../chunks/D0cPXSkH.js";import{o as De}from"../chunks/Bpt9IQqH.js";var Ee=m('<div class="flex justify-center items-center h-64 svelte-131r20r"><div class="loader svelte-131r20r"></div></div>'),Qe=m('<option class="svelte-131r20r"> </option>'),Re=m('<img class="w-full h-32 object-cover svelte-131r20r">'),Ue=m('<div class="w-full h-32 bg-gradient-to-r from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center svelte-131r20r"><i class="fas fa-users text-4xl text-indigo-400 dark:text-indigo-600 svelte-131r20r"></i></div>'),Ve=m('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col svelte-131r20r"><!> <div class="p-5 flex-1 flex flex-col svelte-131r20r"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1 svelte-131r20r"> </h3> <p class="text-sm text-gray-500 dark:text-gray-400 mb-3 svelte-131r20r"> </p> <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2 flex-1 svelte-131r20r"> </p> <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 mb-4 svelte-131r20r"><span class="svelte-131r20r"><i class="fas fa-users mr-1 svelte-131r20r"></i> </span> <span class="svelte-131r20r"> </span></div> <div class="mt-auto flex gap-2 svelte-131r20r"><a class="flex-1 text-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium transition-colors svelte-131r20r">View Group</a> <button class="px-3 py-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-300 rounded-md text-sm font-medium transition-colors svelte-131r20r" title="Leave Group"><i class="fas fa-sign-out-alt svelte-131r20r"></i></button></div></div></div>'),We=m('<div class="mb-12 svelte-131r20r"><h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4 svelte-131r20r">My Groups</h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 svelte-131r20r"></div></div>'),ze=m('<button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium transition-colors svelte-131r20r">Clear Filters</button>'),Be=m('<a href="/groups/create" class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium transition-colors svelte-131r20r"><i class="fas fa-plus mr-2 svelte-131r20r"></i> Create New Group</a>'),He=m('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-8 text-center svelte-131r20r"><div class="w-16 h-16 mx-auto bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4 svelte-131r20r"><i class="fas fa-search text-gray-400 dark:text-gray-500 text-2xl svelte-131r20r"></i></div> <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2 svelte-131r20r">No groups found</h3> <p class="text-gray-600 dark:text-gray-400 mb-6 svelte-131r20r"><!></p> <!></div>'),Ie=m('<img class="w-full h-32 object-cover svelte-131r20r">'),Ke=m('<div class="w-full h-32 bg-gradient-to-r from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center svelte-131r20r"><i class="fas fa-users text-4xl text-indigo-400 dark:text-indigo-600 svelte-131r20r"></i></div>'),Xe=m('<button class="w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium transition-colors svelte-131r20r"><i class="fas fa-user-plus mr-2 svelte-131r20r"></i> Join Group</button>'),Ye=m('<button class="w-full px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium cursor-not-allowed svelte-131r20r" disabled><i class="fas fa-lock mr-2 svelte-131r20r"></i> Request to Join (Private)</button>'),Ze=m('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col svelte-131r20r"><!> <div class="p-5 flex-1 flex flex-col svelte-131r20r"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1 svelte-131r20r"> </h3> <p class="text-sm text-gray-500 dark:text-gray-400 mb-3 svelte-131r20r"> </p> <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2 flex-1 svelte-131r20r"> </p> <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 mb-4 svelte-131r20r"><span class="svelte-131r20r"><i class="fas fa-users mr-1 svelte-131r20r"></i> </span> <span class="svelte-131r20r"> </span></div> <div class="mt-auto svelte-131r20r"><!></div></div></div>'),$e=m('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 svelte-131r20r"></div>'),er=m('<div class="svelte-131r20r"><div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 svelte-131r20r"><div class="svelte-131r20r"><h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2 svelte-131r20r">Study Groups</h1> <p class="text-gray-600 dark:text-gray-400 svelte-131r20r">Connect, collaborate, and learn with fellow students</p></div> <div class="mt-4 md:mt-0 svelte-131r20r"><a href="/groups/create" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium flex items-center transition-colors svelte-131r20r"><i class="fas fa-plus mr-2 svelte-131r20r"></i> Create New Group</a></div></div> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4 mb-8 svelte-131r20r"><div class="flex flex-col md:flex-row gap-4 svelte-131r20r"><div class="relative flex-grow svelte-131r20r"><input type="text" class="w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 svelte-131r20r" placeholder="Search groups by name or description..."> <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none svelte-131r20r"><i class="fas fa-search text-gray-400 svelte-131r20r"></i></div></div> <div class="relative svelte-131r20r"><select class="appearance-none pl-4 pr-10 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[180px] svelte-131r20r"></select> <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none svelte-131r20r"><i class="fas fa-chevron-down text-gray-400 svelte-131r20r"></i></div></div></div></div> <!> <div class="svelte-131r20r"><h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4 svelte-131r20r"> </h2> <!></div></div>'),rr=m('<div class="container mx-auto px-4 py-8 max-w-7xl svelte-131r20r"><!></div>');function ur(Y,Z){je(Z,!1);const k=j(),N=j(),L=j(),A=j();let f=j([]),u=j(""),n=j("all");function S(a,h){return ie(this,null,function*(){try{if((yield fetch(h?"/api/groups/leave":"/api/groups/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group_id:a})})).ok){const M=e(f).findIndex(O=>O.id==a||O.id===a);M!==-1&&(Le(f,e(f)[M].isMember=!h),y(f,[...e(f)]))}else alert("Failed to update group membership.")}catch(C){alert("Error updating group membership.")}})}let $=j(!0);De(()=>ie(null,null,function*(){y($,!0);try{const a=yield fetch("/api/groups/");a.ok?y(f,yield a.json()):y(f,[])}catch(a){y(f,[])}finally{y($,!1)}}));function ge(a){S(a,!1)}function pe(a){S(a,!0)}X(()=>e(f),()=>{y(k,["all",...Array.from(new Set(e(f).map(a=>a.topic)))])}),X(()=>(e(f),e(n),e(u)),()=>{y(N,e(f).filter(a=>{const h=e(n)==="all"||a.topic===e(n),C=e(u)===""||a.name.toLowerCase().includes(e(u).toLowerCase())||a.description.toLowerCase().includes(e(u).toLowerCase());return h&&C}))}),X(()=>e(f),()=>{y(L,e(f).filter(a=>a.isMember))}),X(()=>e(N),()=>{y(A,e(N).filter(a=>!a.isMember))}),Ge(),qe();var ee=rr();Me(a=>{Te.title="User Groups | LearnFlow"});var xe=t(ee);{var ue=a=>{var h=Ee();v(a,h)},be=a=>{var h=er(),C=i(t(h),2),re=t(C),M=t(re),O=t(M);Fe(O),me(2),r(M);var de=i(M,2),te=t(de);P(()=>{e(n),Pe(()=>{e(k)})}),le(te,5,()=>e(k),Se,(g,p)=>{var x=Qe(),d={},c=t(x,!0);r(x),P(()=>{var w;d!==(d=e(p))&&(x.value=(w=x.__value=e(p))!=null?w:""),_(c,e(p)==="all"?"All Topics":e(p))}),v(g,x)}),r(te),me(2),r(de),r(re),r(C);var ve=i(C,2);{var ye=g=>{var p=We(),x=i(t(p),2);le(x,5,()=>e(L),d=>d.id,(d,c)=>{var w=Ve(),F=t(w);{var q=s=>{var l=Re();P(()=>{W(l,"src",e(c).image),W(l,"alt",e(c).name)}),v(s,l)},J=s=>{var l=Ue();v(s,l)};G(F,s=>{e(c).image?s(q):s(J,!1)})}var o=i(F,2),b=t(o),D=t(b,!0);r(b);var E=i(b,2),Q=t(E);r(E);var R=i(E,2),U=t(R,!0);r(R);var T=i(R,2),V=t(T),z=i(t(V));r(V);var B=i(V,2),H=t(B,!0);r(B),r(T);var I=i(T,2),K=t(I),se=i(K,2);r(I),r(o),r(w),P(()=>{var s,l,ce;_(D,e(c).name),_(Q,`Topic: ${(s=e(c).topic)!=null?s:""}`),_(U,e(c).description),_(z,` ${(l=e(c).memberCount)!=null?l:""} members`),_(H,e(c).isPublic?"Public":"Private"),W(K,"href",`/groups/${(ce=e(c).id)!=null?ce:""}`)}),oe("click",se,()=>pe(e(c).id)),v(d,w)}),r(x),r(p),v(g,p)};G(ve,g=>{e(L).length>0&&g(ye)})}var ne=i(ve,2),ae=t(ne),_e=t(ae,!0);r(ae);var he=i(ae,2);{var we=g=>{var p=He(),x=i(t(p),4),d=t(x);{var c=o=>{var b=fe("Try adjusting your search or filter criteria.");v(o,b)},w=o=>{var b=fe("There are no available groups to join right now. Why not create one?");v(o,b)};G(d,o=>{e(u)||e(n)!=="all"?o(c):o(w,!1)})}r(x);var F=i(x,2);{var q=o=>{var b=ze();oe("click",b,()=>{y(u,""),y(n,"all")}),v(o,b)},J=o=>{var b=Be();v(o,b)};G(F,o=>{e(u)||e(n)!=="all"?o(q):o(J,!1)})}r(p),v(g,p)},ke=g=>{var p=$e();le(p,5,()=>e(A),x=>x.id,(x,d)=>{var c=Ze(),w=t(c);{var F=s=>{var l=Ie();P(()=>{W(l,"src",e(d).image),W(l,"alt",e(d).name)}),v(s,l)},q=s=>{var l=Ke();v(s,l)};G(w,s=>{e(d).image?s(F):s(q,!1)})}var J=i(w,2),o=t(J),b=t(o,!0);r(o);var D=i(o,2),E=t(D);r(D);var Q=i(D,2),R=t(Q,!0);r(Q);var U=i(Q,2),T=t(U),V=i(t(T));r(T);var z=i(T,2),B=t(z,!0);r(z),r(U);var H=i(U,2),I=t(H);{var K=s=>{var l=Xe();oe("click",l,()=>ge(e(d).id)),v(s,l)},se=s=>{var l=Ye();v(s,l)};G(I,s=>{e(d).isPublic?s(K):s(se,!1)})}r(H),r(J),r(c),P(()=>{var s,l;_(b,e(d).name),_(E,`Topic: ${(s=e(d).topic)!=null?s:""}`),_(R,e(d).description),_(V,` ${(l=e(d).memberCount)!=null?l:""} members`),_(B,e(d).isPublic?"Public":"Private")}),v(x,c)}),r(p),v(g,p)};G(he,g=>{e(A).length===0?g(we):g(ke,!1)})}r(ne),r(h),P(()=>_(_e,e(u)||e(n)!=="all"?"Filtered Groups":"Discover Groups")),Ae(O,()=>e(u),g=>y(u,g)),Oe(te,()=>e(n),g=>y(n,g)),Je(1,h,()=>Ne,()=>({duration:300})),v(a,h)};G(xe,a=>{e($)?a(ue):a(be,!1)})}r(ee),v(Y,ee),Ce()}export{ur as component};
//# sourceMappingURL=27.qo80yKzM.js.map
