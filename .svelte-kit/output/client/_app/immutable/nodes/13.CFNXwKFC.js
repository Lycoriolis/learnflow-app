var Ce=(Z,B,f)=>new Promise((ge,ae)=>{var I=T=>{try{h(f.next(T))}catch(m){ae(m)}},a=T=>{try{h(f.throw(T))}catch(m){ae(m)}},h=T=>T.done?ge(T.value):Promise.resolve(T.value).then(I,a);h((f=f.apply(Z,B)).next())});import"../chunks/COm6N4YE.js";import"../chunks/69_IOA4Y.js";import{p as nr,s as d,m as b,g as e,l as De,ah as Lr,a as dr,d as t,r,b as lr,f as tr,c as l,t as U,n as cr,e as ue,k as Mr}from"../chunks/HPQed-Yx.js";import{s as V}from"../chunks/PqlH_gqs.js";import{i as p}from"../chunks/Da7F0fHf.js";import{e as Ne,i as $e}from"../chunks/ErG-rR4v.js";import{t as v,a as c,e as te,r as Nr}from"../chunks/ZM6Rlk1U.js";import{a as ar,r as $r}from"../chunks/G1Z7eEzt.js";import{b as vr}from"../chunks/D8Qc2aSm.js";import{b as Hr}from"../chunks/RqW7FABT.js";import{i as ur}from"../chunks/D0cPXSkH.js";import{s as Rr,a as Se}from"../chunks/CGqtlgv0.js";import{o as fr}from"../chunks/Bpt9IQqH.js";import{w as Pe}from"../chunks/CToUoAZH.js";import{a as Ur,b as Br}from"../chunks/BLhgBMGu.js";import{C as Fr}from"../chunks/DRwqVxuN.js";import{s as qr}from"../chunks/XjHDu-gE.js";import{t as Ae,b as Ee}from"../chunks/D3PCwpG5.js";import{p as Ge}from"../chunks/BWjJF4ZV.js";import{M as ye}from"../chunks/D-UabZxA.js";import{E as zr,a as Vr}from"../chunks/B0eKqkWg.js";import{a as sr,g as or,d as Le,e as ir,s as Me}from"../chunks/D8i9UXqZ.js";import{I as fe}from"../chunks/BC8mezXZ.js";import{a as Zr,n as Or}from"../chunks/CNZtGARX.js";const gr=Pe([]),mr=Pe([]),Je=Pe(null),Ke=Pe(!1),We=Pe(null);function Qr(){return Ce(this,null,function*(){Ke.set(!0),We.set(null);try{const[Z,B]=yield Promise.all([Ur(),Br()]);gr.set(Z),mr.set(B)}catch(Z){console.error("Error initializing course store:",Z),We.set("Failed to load courses. Please try again later.")}finally{Ke.set(!1)}})}var Gr=v('<span class="text-sm font-medium text-cherry-700 dark:text-cherry-500 bg-cherry-100 dark:bg-cherry-900/30 px-2.5 py-0.5 rounded-full mt-2 inline-block"> </span>'),Jr=v('<span class="text-xs font-medium text-secondary-700 dark:text-secondary-300 bg-secondary-100 dark:bg-secondary-900/30 px-2 py-0.5 rounded-full"> </span>'),Kr=v('<div class="mt-3 flex flex-wrap gap-2"></div>'),Wr=v('<div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-md mt-1"><!></div>'),Xr=v('<div class="hint-container"><button class="flex items-center justify-between w-full p-3 text-left border rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"><span class="font-medium"></span> <!></button> <!></div>'),Yr=v('<div class="mt-6 border-t border-gray-200 dark:border-gray-700 pt-4"><h3 class="text-lg font-semibold mb-3">Hints</h3> <div class="space-y-3"></div></div>'),et=v('<div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mb-4"><div class="bg-cherry-600 dark:bg-cherry-500 h-2.5 rounded-full"></div></div>'),rt=v("<div><!></div>"),tt=v('<div class="p-4 border border-gray-200 dark:border-gray-700 rounded-md"><!></div>'),at=v('<div class="mt-6 border-t border-gray-200 dark:border-gray-700 pt-4"><div class="flex justify-between items-center mb-3"><h3 class="text-lg font-semibold">Solution</h3> <button class="px-3 py-1.5 text-sm font-medium rounded-md bg-cherry-100 dark:bg-cherry-900/30 text-cherry-700 dark:text-cherry-400 hover:bg-cherry-200 dark:hover:bg-cherry-800/50 transition-colors"> </button></div> <!> <!></div>'),st=v("<!> <!> <!>",1),ot=v('<span class="text-xs text-gray-500 dark:text-gray-400"> </span>'),it=v('<span class="text-xs text-gray-500 dark:text-gray-400"> </span>'),nt=v('<div class="mt-2"><textarea class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-surface dark:bg-surface-dark text-text dark:text-text-light focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400 min-h-[100px]" placeholder="Add your notes here..."></textarea> <div class="flex justify-end mt-2"><button class="px-3 py-1.5 text-sm font-medium rounded-md bg-cherry-600 text-white hover:bg-cherry-700 dark:bg-cherry-500 dark:hover:bg-cherry-600 transition-colors">Save Notes</button></div></div>'),dt=v('<p class="text-gray-500 dark:text-gray-400 italic">No notes yet. Click "Edit" to add notes.</p>'),lt=v('<div class="mt-2 p-3 border border-gray-200 dark:border-gray-700 rounded-md min-h-[50px] bg-gray-50 dark:bg-gray-800"><!> <div class="flex justify-end mt-2"><button class="px-3 py-1.5 text-sm font-medium rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Edit</button></div></div>'),ct=v("<div><!></div>"),vt=v('<div class="flex-shrink-0 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"><!></div>'),ut=v('<div class="flex-shrink-0 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center justify-between"><h2 class="text-xl sm:text-2xl font-jakarta font-semibold text-text dark:text-text-light truncate pr-4"> </h2> <div class="flex items-center space-x-2"><button class="text-cherry-600 hover:text-cherry-700 dark:hover:text-cherry-400 transition-colors p-1 rounded-full" aria-label="View full details"><!></button> <button class="text-gray-400 hover:text-cherry-600 dark:hover:text-cherry-400 transition-colors p-1 rounded-full -mr-1" aria-label="Close viewer"><!></button></div></div> <!> <!></div> <div class="flex-grow overflow-y-auto prose dark:prose-invert prose-cherry lg:prose-lg scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent pr-2 -mr-2"><!></div> <div class="flex-shrink-0 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"><div class="flex justify-between items-center mb-2"><button class="flex items-center text-sm font-medium text-cherry-600 dark:text-cherry-400 hover:text-cherry-700 dark:hover:text-cherry-300"><!> </button> <div class="flex items-center space-x-2"><button> </button> <!> <!></div></div> <!></div> <!>',1),ft=v('<div class="flex flex-col items-center justify-center h-full text-center text-text-secondary dark:text-text-secondary-light"><!> <p class="text-lg font-medium">Select an item</p> <p class="text-sm">Choose an exercise or course from the list to view its details here.</p></div>'),gt=v('<div class="content-viewer bg-surface dark:bg-surface-dark text-text dark:text-text-light p-4 sm:p-6 lg:p-8 rounded-squircle shadow-card flex flex-col h-full overflow-hidden"><!></div>');function mt(Z,B){nr(B,!1);const f=b(),ge=b(),ae=b(),I=b();let a=Ge(B,"item",8,null),h=Ge(B,"type",8,"exercise"),T=Ge(B,"onBack",8,()=>{}),m=b(!1),M=!1,se=b(null),K=b(""),oe=b(!1),O=b(!1),S=b(0),be=5,D=b([]),W=b([]),X=b(null),ie=b(0),ne=null;fr(()=>{let s=()=>{};return Ce(null,null,function*(){a()&&h()==="exercise"&&(d(X,new Date),ne=window.setInterval(Ue,1e3),yield He())}),s=()=>{ne&&clearInterval(ne)},s});function He(){return Ce(this,null,function*(){var o;if(!a())return;const s=sr();if(s.currentUser)try{const u=or(),y=Le(u,"users",s.currentUser.uid,"progress",h()==="exercise"?"exercises":"courses"),x=yield ir(y);if(x.exists()){const P=x.data();P.completed&&P.completed[a().id]?d(m,!0):P.inProgress&&P.inProgress[a().id]&&(M=!0)}const de=Le(u,"users",s.currentUser.uid,h()==="exercise"?"exercises":"courses",a().id),le=yield ir(de);if(le.exists()){const P=le.data();d(K,P.notes||""),d(se,((o=P.lastAttemptDate)==null?void 0:o.toDate())||null),d(D,P.checkedHints||[])}}catch(u){console.error("Error loading user progress:",u)}})}function me(s){return Ce(this,null,function*(){if(!a())return;const o=sr();if(o.currentUser)try{const u=or(),y=Le(u,"users",o.currentUser.uid,"progress",h()==="exercise"?"exercises":"courses");s==="completed"?(yield Me(y,{completed:{[a().id]:!0},inProgress:{[a().id]:!1}},{merge:!0}),d(m,!0),M=!1):s==="inProgress"?(yield Me(y,{inProgress:{[a().id]:!0},completed:{[a().id]:!1}},{merge:!0}),M=!0,d(m,!1)):(yield Me(y,{inProgress:{[a().id]:!1},completed:{[a().id]:!1}},{merge:!0}),M=!1,d(m,!1));const x=Le(u,"users",o.currentUser.uid,h()==="exercise"?"exercises":"courses",a().id);yield Me(x,{timeSpent:e(ie)+(Re()||0),lastAttemptDate:new Date,notes:e(K),checkedHints:e(D)},{merge:!0})}catch(u){console.error("Error saving progress:",u)}})}function Re(){return e(X)?Math.floor((new Date().getTime()-e(X).getTime())/1e3):null}function Ue(){e(X)&&d(ie,Math.floor((new Date().getTime()-e(X).getTime())/1e3))}function g(s){const o=Math.floor(s/3600),u=Math.floor(s%3600/60),y=s%60;return o>0?`${o}h ${u}m ${y}s`:u>0?`${u}m ${y}s`:`${y}s`}function N(s){const o={main:s},u=s.matchAll(/^##\s+([A-Za-z\s]+)\s*$([\s\S]*?)(?=^##\s+[A-Za-z\s]+\s*$|$)/gm);for(const x of u)if(x[1]&&x[2]){const de=x[1].trim().toLowerCase(),le=x[2].trim();o[de]=le}const y=o.hints||"";if(y){const x=y.split(/\n?(?:^###\s+Hint \d+\s*$|^\*\s+)/gm).map(de=>de.trim()).filter(Boolean);x.length>0&&d(W,x)}return h()==="exercise"&&(Object.keys(o).length>1&&delete o.main,o.problem&&(o.content=o.problem,delete o.problem)),o}function $(){if(e(I))d(I,!1),d(S,0);else{d(S,0);const s=setInterval(()=>{d(S,e(S)+5),e(S)>=100&&(clearInterval(s),d(I,!0))},100)}}function pe(){d(oe,!e(oe)),d(O,e(oe)&&e(O))}function F(){d(O,!0)}function j(){d(O,!1),a()&&me(e(m)?"completed":"inProgress")}function Y(){e(m)?me("reset"):me("completed")}function _e(s){const o=`hint-${s}`;e(D).includes(o)?d(D,e(D).filter(u=>u!==o)):d(D,[...e(D),o]),a()&&me(e(m)?"completed":"inProgress")}function Be(){a()&&(h()==="exercise"&&a().id?Zr(a().id):h()==="course"&&a().id&&Or(a().id))}De(()=>Lr(a()),()=>{d(f,a()?N(a().content||""):{})}),De(()=>e(f),()=>{d(ge,!!e(f).solution)}),De(()=>e(f),()=>{d(ae,!!e(f).content||!!e(f).main)}),De(()=>{},()=>{d(I,!1)}),dr(),ur();var xe=gt(),Ie=t(xe);{var Fe=s=>{var o=ut(),u=tr(o),y=t(u),x=t(y),de=t(x,!0);r(x);var le=l(x,2),P=t(le),pr=t(P);fe(pr,{icon:"mdi:open-in-new",class:"w-5 h-5"}),r(P);var qe=l(P,2),xr=t(qe);fe(xr,{icon:"mdi:close",class:"w-6 h-6"}),r(qe),r(le),r(y);var Xe=l(y,2);{var hr=i=>{var n=Gr(),_=t(n,!0);r(n),U(()=>V(_,a().category)),c(i,n)};p(Xe,i=>{a().category&&i(hr)})}var yr=l(Xe,2);{var br=i=>{var n=Kr();Ne(n,5,()=>a().tags,$e,(_,k)=>{var w=Jr(),C=t(w,!0);r(w),U(()=>V(C,e(k))),c(_,w)}),r(n),c(i,n)};p(yr,i=>{a().tags&&a().tags.length>0&&i(br)})}r(u);var ze=l(u,2),_r=t(ze);{var kr=i=>{var n=st(),_=tr(n);const k=ue(()=>e(f).content||e(f).main);zr(_,{get markdown(){return e(k)}});var w=l(_,2);{var C=A=>{var H=Yr(),R=l(t(H),2);Ne(R,5,()=>e(W),$e,(ce,q,G)=>{var we=Xr(),he=t(we),je=t(he);je.textContent=`Hint ${G+1}`;var Oe=l(je,2);const E=ue(()=>e(D).includes(`hint-${G}`)?"mdi:chevron-up":"mdi:chevron-down");fe(Oe,{get icon(){return e(E)},class:"w-5 h-5"}),r(he);var L=l(he,2);{var ve=z=>{var J=Wr(),Qe=t(J);ye(Qe,{get content(){return e(q)}}),r(J),Ae(3,J,()=>Ee),c(z,J)};p(L,z=>{e(D).includes(`hint-${G}`)&&z(ve)})}r(we),te("click",he,()=>_e(G)),c(ce,we)}),r(R),r(H),c(A,H)};p(w,A=>{e(W)&&e(W).length>0&&A(C)})}var Q=l(w,2);{var re=A=>{var H=at(),R=t(H),ce=l(t(R),2),q=t(ce,!0);r(ce),r(R);var G=l(R,2);{var we=E=>{var L=et(),ve=t(L);r(L),U(()=>{var z;return ar(ve,`width: ${(z=e(S))!=null?z:""}%`)}),c(E,L)};p(G,E=>{e(S)>0&&!e(I)&&E(we)})}var he=l(G,2);{var je=E=>{var L=rt(),ve=t(L);ye(ve,{get content(){return e(f).solution}}),r(L),Ae(3,L,()=>Ee),c(E,L)},Oe=(E,L)=>{{var ve=z=>{var J=tt(),Qe=t(J);ye(Qe,{get content(){return e(f).solution}}),r(J),U(()=>ar(J,`filter: blur(${be-be*e(S)/100}px);`)),c(z,J)};p(E,z=>{e(S)>0&&z(ve)},L)}};p(he,E=>{e(I)?E(je):E(Oe,!1)})}r(H),U(()=>V(q,e(I)?"Hide Solution":"Show Solution")),te("click",ce,$),c(A,H)};p(Q,A=>{e(ge)&&A(re)})}c(i,n)},wr=(i,n)=>{{var _=w=>{const C=ue(()=>e(f).content||e(f).main);ye(w,{get content(){return e(C)}})},k=w=>{const C=ue(()=>e(f).content||e(f).main);ye(w,{get content(){return e(C)}})};p(i,w=>{h()==="course"?w(_):w(k,!1)},n)}};p(_r,i=>{h()==="exercise"?i(kr):i(wr,!1)})}r(ze);var Ve=l(ze,2),Ze=t(Ve),Te=t(Ze),Ye=t(Te);fe(Ye,{icon:"mdi:note-text-outline",class:"w-5 h-5 mr-1"});var Cr=l(Ye);r(Te);var er=l(Te,2),ke=t(er),Sr=t(ke,!0);r(ke);var rr=l(ke,2);{var Dr=i=>{var n=ot(),_=t(n);r(n),U(k=>V(_,`Last attempt: ${k!=null?k:""}`),[()=>e(se).toLocaleDateString()],ue),c(i,n)};p(rr,i=>{e(se)&&i(Dr)})}var Pr=l(rr,2);{var Ir=i=>{var n=it(),_=t(n);r(n),U(k=>V(_,`Time: ${k!=null?k:""}`),[()=>g(e(ie))],ue),c(i,n)};p(Pr,i=>{e(X)&&i(Ir)})}r(er),r(Ze);var Tr=l(Ze,2);{var jr=i=>{var n=ct(),_=t(n);{var k=C=>{var Q=nt(),re=t(Q);Nr(re);var A=l(re,2),H=t(A);r(A),r(Q),vr(re,()=>e(K),R=>d(K,R)),te("click",H,j),c(C,Q)},w=C=>{var Q=lt(),re=t(Q);{var A=q=>{ye(q,{get content(){return e(K)}})},H=q=>{var G=dt();c(q,G)};p(re,q=>{e(K)?q(A):q(H,!1)})}var R=l(re,2),ce=t(R);r(R),r(Q),te("click",ce,F),c(C,Q)};p(_,C=>{e(O)?C(k):C(w,!1)})}r(n),Ae(3,n,()=>Ee),c(i,n)};p(Tr,i=>{e(oe)&&i(jr)})}r(Ve);var Ar=l(Ve,2);{var Er=i=>{var n=vt(),_=t(n);Vr(_,{get exerciseId(){return a().id}}),r(n),c(i,n)};p(Ar,i=>{h()==="exercise"&&i(Er)})}U(()=>{V(de,a().title),V(Cr,` ${e(oe)?"Hide Notes":"Show Notes"}`),qr(ke,1,`px-3 py-1.5 text-sm font-medium rounded-md ${e(m)?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"} hover:opacity-90 transition-colors`),V(Sr,e(m)?"Completed":"Mark Complete")}),te("click",P,Be),te("click",qe,function(...i){var n;(n=T())==null||n.apply(this,i)}),te("click",Te,pe),te("click",ke,Y),c(s,o)},ee=s=>{var o=ft(),u=t(o);fe(u,{icon:"mdi:information-outline",class:"w-12 h-12 mb-4 text-gray-400 dark:text-gray-500"}),cr(4),r(o),c(s,o)};p(Ie,s=>{a()?s(Fe):s(ee,!1)})}r(xe),Ae(3,xe,()=>Ee),c(Z,xe),lr()}var pt=v("<option> </option>"),xt=v('<div class="flex justify-center items-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cherry-500"></div></div>'),ht=v('<div class="bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-4 rounded-md"><p> </p></div>'),yt=v('<div class="flex flex-col items-center justify-center py-12 text-center"><!> <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">No courses found</h3> <p class="text-gray-600 dark:text-gray-400">Try adjusting your filters or search query.</p></div>'),bt=v('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>'),_t=v('<div class="grid grid-cols-1 gap-6 md:grid-cols-3 lg:grid-cols-4"><div class="md:col-span-2 lg:col-span-3"><!></div> <div class="md:col-span-1 sticky top-4"><!></div></div>'),kt=v('<div class="container mx-auto px-4 py-8"><div class="flex items-center justify-between mb-6"><h1 class="text-2xl font-bold text-gray-900 dark:text-white">Courses</h1> <div class="flex space-x-2"><div class="relative"><input type="text" placeholder="Search courses..." class="pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400"> <!></div> <select class="px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400"><option>All Categories</option><!></select></div></div> <!></div>');function Gt(Z,B){nr(B,!1);const[f,ge]=Rr(),ae=()=>Se(gr,"$courseItems",f),I=()=>Se(mr,"$courseCategories",f),a=()=>Se(Ke,"$isLoading",f),h=()=>Se(We,"$error",f),T=()=>Se(Je,"$selectedCourse",f);let m=b("all"),M=b(""),se=b([]);function K(g){Je.set(g.detail.course)}function oe(){Je.set(null)}fr(()=>{Qr()}),De(()=>(ae(),e(m),e(M)),()=>{d(se,ae().filter(g=>{const N=e(m)==="all"||g.category===e(m),$=!e(M)||g.title.toLowerCase().includes(e(M).toLowerCase())||g.description&&g.description.toLowerCase().includes(e(M).toLowerCase());return N&&$}))}),dr(),ur();var O=kt(),S=t(O),be=l(t(S),2),D=t(be),W=t(D);$r(W);var X=l(W,2);fe(X,{icon:"mdi:magnify",class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r(D);var ie=l(D,2);U(()=>{e(m),Mr(()=>{I()})});var ne=t(ie);ne.value=ne.__value="all";var He=l(ne);Ne(He,1,I,$e,(g,N)=>{var $=pt(),pe={},F=t($,!0);r($),U(()=>{var j;pe!==(pe=e(N).id)&&($.value=(j=$.__value=e(N).id)!=null?j:""),V(F,e(N).name)}),c(g,$)}),r(ie),r(be),r(S);var me=l(S,2);{var Re=g=>{var N=xt();c(g,N)},Ue=(g,N)=>{{var $=F=>{var j=ht(),Y=t(j),_e=t(Y,!0);r(Y),r(j),U(()=>V(_e,h())),c(F,j)},pe=F=>{var j=_t(),Y=t(j),_e=t(Y);{var Be=ee=>{var s=yt(),o=t(s);fe(o,{icon:"mdi:book-open-page-variant",class:"w-16 h-16 text-gray-400 mb-4"}),cr(4),r(s),c(ee,s)},xe=ee=>{var s=bt();Ne(s,5,()=>e(se),$e,(o,u)=>{const y=ue(()=>{var x;return((x=T())==null?void 0:x.id)===e(u).id});Fr(o,{get course(){return e(u)},get isSelected(){return e(y)},$$events:{select:K}})}),r(s),c(ee,s)};p(_e,ee=>{e(se).length===0?ee(Be):ee(xe,!1)})}r(Y);var Ie=l(Y,2),Fe=t(Ie);mt(Fe,{get item(){return T()},type:"course",onBack:oe}),r(Ie),r(j),c(F,j)};p(g,F=>{h()?F($):F(pe,!1)},N)}};p(me,g=>{a()?g(Re):g(Ue,!1)})}r(O),vr(W,()=>e(M),g=>d(M,g)),Hr(ie,()=>e(m),g=>d(m,g)),c(Z,O),lr(),ge()}export{Gt as component};
//# sourceMappingURL=13.CFNXwKFC.js.map
