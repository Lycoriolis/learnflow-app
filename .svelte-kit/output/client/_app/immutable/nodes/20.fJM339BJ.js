import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as B,m as x,c as s,b as D,$ as G,e as r,g as f,r as a,s as b}from"../chunks/D8Zr53n5.js";import{h as I,e as K}from"../chunks/CCLz0Z0F.js";import{t as k,a as T}from"../chunks/ByokzzJe.js";import{i as M}from"../chunks/BAqAra_5.js";import{t as Q,f as R}from"../chunks/CwmK-V57.js";import{i as W}from"../chunks/BzVavbfz.js";import{p as X}from"../chunks/D0guHZRM.js";import{s as Y,a as F}from"../chunks/CYIMW-vo.js";import{u as Z}from"../chunks/QfzvdxsM.js";import{F as ee,a as te,b as oe,s as g,C as se}from"../chunks/BJI8ZFFo.js";var ae=k('<div class="fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-lg relative"><button class="absolute top-2 right-2">&times;</button> <!></div></div>'),re=k('<div class="container mx-auto px-4 py-8 max-w-7xl"><!> <!> <div class="grid grid-cols-1 lg:grid-cols-12 gap-8"><div class="lg:col-span-9"><h2 class="text-2xl font-bold mb-4"></h2> <!></div> <div class="lg:col-span-3"><!></div></div></div>');function he(S,h){B(h,!1);const[$,j]=Y(),L=()=>F(g,"$subscribedTopics",$),N=()=>F(Z,"$user",$);let n=X(h,"data",8),c=x(n().topics),d=n().categories,l=n().selectedCategory,p=x(!1);function O(){b(p,!0)}function V(){}function z(e){b(c,[e.detail,...f(c)])}function E(e){L().includes(e)||g.update(t=>[...t,e])}function H(e){g.update(t=>t.filter(o=>o!==e))}function J(e,t){var o;fetch(`/api/forum/topics/${e}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:(o=N())==null?void 0:o.uid,vote_type:t==="up"?1:-1})}).then(i=>{if(!i.ok)throw new Error("Vote failed")}).catch(console.error)}W();var u=re();I(e=>{G.title=`Category: ${l??""} | LearnFlow Forums`});var _=s(u);ee(_,{$$events:{newTopic:O,toggleSubscriptions:V}});var y=r(_,2);{var P=e=>{var t=ae(),o=s(t),i=s(o),A=r(i,2);se(A,{categories:d,$$events:{topicCreated:z}}),a(o),a(t),K("click",i,()=>b(p,!1)),T(e,t)};M(y,e=>{f(p)&&e(P)})}var v=r(y,2),m=s(v),C=s(m);C.textContent=`Category: ${l??""}`;var U=r(C,2);te(U,{get topics(){return f(c)},categories:d,$$events:{subscribe:({detail:e})=>E(e),unsubscribe:({detail:e})=>H(e),vote:({detail:e})=>J(e.id,e.type)}}),a(m);var w=r(m,2),q=s(w);oe(q,{categories:d,filterCategory:l}),a(w),a(v),a(u),Q(1,v,()=>R,()=>({duration:300})),T(S,u),D(),j()}export{he as component};
