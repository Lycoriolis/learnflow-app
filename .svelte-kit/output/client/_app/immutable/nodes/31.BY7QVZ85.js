var O=(F,$,m)=>new Promise((M,_)=>{var x=i=>{try{u(m.next(i))}catch(g){_(g)}},b=i=>{try{u(m.throw(i))}catch(g){_(g)}},u=i=>i.done?M(i.value):Promise.resolve(i.value).then(x,b);u((m=m.apply(F,$)).next())});import"../chunks/COm6N4YE.js";import"../chunks/69_IOA4Y.js";import{p as ne,c as f,d,g as r,m as k,r as l,n as T,t as q,s as t,b as ce,j as oe,l as ie,a as Me,$ as Ge}from"../chunks/HPQed-Yx.js";import{h as Te}from"../chunks/Bkjpsbyi.js";import{t as v,e as L,a as p,i as qe,n as Ve}from"../chunks/ZM6Rlk1U.js";import{i as w}from"../chunks/Da7F0fHf.js";import{i as ue}from"../chunks/D0cPXSkH.js";import{a as j,s as me}from"../chunks/CGqtlgv0.js";import{s as I}from"../chunks/PqlH_gqs.js";import{r as W,s as A}from"../chunks/G1Z7eEzt.js";import{s as de}from"../chunks/XjHDu-gE.js";import{b as le,a as Ce}from"../chunks/D8Qc2aSm.js";import{p as Ie}from"../chunks/BWjJF4ZV.js";import{a as R,i as be,l as fe,c as Re,k as Se}from"../chunks/BRK8y73W.js";import{o as pe}from"../chunks/Bpt9IQqH.js";import{g as Y}from"../chunks/GvWXBGfm.js";import{p as ze}from"../chunks/BBukhNps.js";var De=v(`<div class="bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300 px-4 py-3 rounded mb-4" role="alert"><span class="block sm:inline">You'll be redirected to the requested page after login.</span></div>`),Be=v('<div class="bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4" role="alert"><span class="block sm:inline"> </span></div>'),Ne=v('<div class="bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4" role="alert"><span class="block sm:inline"> </span></div>'),Oe=v('<p id="email-error" class="mt-1 text-sm text-red-600 dark:text-red-400"> </p>'),We=v('<p id="password-error" class="mt-1 text-sm text-red-600 dark:text-red-400"> </p>'),Ye=v('<span class="inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" aria-hidden="true"></span> <span>Logging in...</span>',1),He=v('<span class="inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700 dark:border-gray-200 mr-2" aria-hidden="true"></span>'),Je=Ve('<svg class="h-5 w-5 mr-2" viewBox="0 0 24 24" aria-hidden="true"><path d="M12.545,12.151L12.545,12.151c0,1.054,0.855,1.909,1.909,1.909h3.536c-0.607,1.972-2.101,3.467-4.26,3.866c-3.431,0.589-6.663-1.727-7.253-5.157c-0.589-3.431,1.727-6.663,5.157-7.253c2.136-0.367,4.296,0.317,5.743,1.878l2.72-2.72c-2.099-2.099-5.271-2.853-8.135-1.879C8.234,3.708,4.766,6.152,3.032,9.686c-2.734,5.63,0.01,12.44,5.639,15.174c5.63,2.734,12.44-0.01,15.174-5.639c1.06-2.17,1.369-4.652,0.845-7.036h-9.687C13.25,12.151,12.545,12.151,12.545,12.151z" fill="#F44336"></path><path d="M12.545,12.151v-3.89h9.687c0.521,2.169,0.246,4.432-0.769,6.406c-0.217,0.436-0.453,0.853-0.725,1.241h-6.284C13.4,15.909,12.545,14.055,12.545,12.151z" fill="#2196F3"></path></svg> Sign in with Google',1),Ke=v(`<div class="w-full max-w-md mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md"><h2 class="text-2xl font-bold mb-6 text-center text-gray-800 dark:text-white">Log In</h2> <!> <!> <!> <form class="space-y-4" autocomplete="off"><div><label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email</label> <input type="email" id="email" required autocomplete="username"> <!></div> <div><label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Password</label> <input type="password" id="password" required autocomplete="current-password"> <!></div> <div class="flex items-center justify-between"><div class="flex items-center"><input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="remember-me" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">Remember me</label></div> <div class="text-sm"><a href="/reset-password" class="font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300">Forgot password?</a></div></div> <div><button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></form> <div class="mt-6 relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300 dark:border-gray-600"></div></div> <div class="relative flex justify-center text-sm"><span class="px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400">Or continue with</span></div></div> <div class="mt-6"><button type="button" class="w-full flex justify-center items-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div> <div class="mt-6 text-center"><p class="text-sm text-gray-600 dark:text-gray-400">Don't have an account? <a href="/register" class="font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300">Sign up</a></p></div></div>`);function Qe(F,$){ne($,!1);const[m,M]=me(),_=()=>j(be,"$isAuthenticated",m),x=()=>j(R,"$authError",m),b=()=>j(fe,"$loading",m);let u=Ie($,"redirectTo",8,"/"),i=k(""),g=k(""),n=k(""),s=k({}),o=k(!1),P=k(!1),H=!1,J=!1;pe(()=>{_()&&Y(u()),R.set("")});function K(e){if(!e&&!H)return!0;const c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);return oe(s,r(s).email=c?void 0:"Please enter a valid email address"),t(s,r(s)),c}function Q(e){if(!e&&!J)return!0;const a=e.length>=6;return oe(s,r(s).password=a?void 0:"Password must be at least 6 characters"),t(s,r(s)),a}function U(e){e==="email"&&(H=!0),e==="password"&&(J=!0)}function ge(e){return O(this,null,function*(){e.preventDefault(),t(o,!0),t(n,""),R.set("");const a=K(r(i)),c=Q(r(g));if(!a||!c){t(o,!1);return}try{yield Re(r(i),r(g),r(P))}catch(E){if(E instanceof Error){const N=E.message;N.includes("user-not-found")?t(n,"No account found with this email. Please check your email or sign up."):N.includes("wrong-password")?t(n,"Incorrect password. Please try again or reset your password."):N.includes("too-many-requests")?t(n,"Too many failed login attempts. Please try again later or reset your password."):t(n,"Login failed. Please check your credentials and try again.")}else t(n,"An unexpected error occurred. Please try again later.")}finally{t(o,!1)}})}function ve(){return O(this,null,function*(){t(o,!0),t(n,""),R.set("");try{yield Se(r(P))}catch(e){if(e instanceof Error){const a=e.message;a.includes("popup-closed-by-user")?t(n,"Google sign-in was cancelled. Please try again."):a.includes("account-exists-with-different-credential")?t(n,"An account already exists with the same email but different sign-in method."):t(n,"Google sign-in failed. Please try again later.")}else t(n,"An unexpected error occurred. Please try again later.")}finally{t(o,!1)}})}ue();var S=Ke(),X=f(d(S),2);{var xe=e=>{var a=De();p(e,a)};w(X,e=>{u()&&u()!=="/"&&e(xe)})}var Z=f(X,2);{var ye=e=>{var a=Be(),c=d(a),E=d(c,!0);l(c),l(a),q(()=>I(E,x())),p(e,a)};w(Z,e=>{x()&&e(ye)})}var ee=f(Z,2);{var he=e=>{var a=Ne(),c=d(a),E=d(c,!0);l(c),l(a),q(()=>I(E,r(n))),p(e,a)};w(ee,e=>{r(n)&&e(he)})}var V=f(ee,2),z=d(V),y=f(d(z),2);W(y);var we=f(y,2);{var _e=e=>{var a=Oe(),c=d(a,!0);l(a),q(()=>I(c,r(s).email)),p(e,a)};w(we,e=>{r(s).email&&e(_e)})}l(z);var D=f(z,2),h=f(d(D),2);W(h);var ke=f(h,2);{var $e=e=>{var a=We(),c=d(a,!0);l(a),q(()=>I(c,r(s).password)),p(e,a)};w(ke,e=>{r(s).password&&e($e)})}l(D);var B=f(D,2),re=d(B),ae=d(re);W(ae),T(2),l(re),T(2),l(B);var te=f(B,2),C=d(te),Pe=d(C);{var Ee=e=>{var a=Ye();T(2),p(e,a)},Le=e=>{var a=qe("Log In");p(e,a)};w(Pe,e=>{b()||r(o)?e(Ee):e(Le,!1)})}l(C),l(te),l(V);var se=f(V,4),G=d(se),Ae=d(G);{var je=e=>{var a=He();p(e,a)},Fe=e=>{var a=Je();T(),p(e,a)};w(Ae,e=>{b()||r(o)?e(je):e(Fe,!1)})}l(G),l(se),T(2),l(S),q(()=>{de(y,1,`mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${r(s).email?"border-red-500":""}`),A(y,"aria-invalid",r(s).email?"true":"false"),A(y,"aria-describedby",r(s).email?"email-error":void 0),de(h,1,`mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${r(s).password?"border-red-500":""}`),A(h,"aria-invalid",r(s).password?"true":"false"),A(h,"aria-describedby",r(s).password?"password-error":void 0),C.disabled=b()||r(o),A(C,"aria-busy",b()||r(o)),G.disabled=b()||r(o),A(G,"aria-busy",b()||r(o))}),le(y,()=>r(i),e=>t(i,e)),L("blur",y,()=>K(r(i))),L("focus",y,()=>U("email")),le(h,()=>r(g),e=>t(g,e)),L("blur",h,()=>Q(r(g))),L("focus",h,()=>U("password")),Ce(ae,()=>r(P),e=>t(P,e)),L("submit",V,ge),L("click",G,ve),p(F,S),ce(),M()}var Ue=v('<div class="flex flex-col items-center justify-center"><div class="w-16 h-16 border-4 border-t-blue-500 border-blue-200 rounded-full animate-spin"></div> <p class="mt-4 text-gray-600 dark:text-gray-400">Loading...</p></div>'),Xe=v('<div class="min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"><!></div>');function vr(F,$){ne($,!1);const[m,M]=me(),_=()=>j(ze,"$page",m),x=()=>j(be,"$isAuthenticated",m),b=()=>j(fe,"$loading",m),u=k();pe(()=>{x()&&Y(r(u))}),ie(()=>_(),()=>{t(u,_().url.searchParams.get("redirect")||"/")}),ie(()=>(b(),x(),r(u)),()=>{!b()&&x()&&Y(r(u))}),Me(),ue();var i=Xe();Te(o=>{Ge.title="Login - LearnFlow"});var g=d(i);{var n=o=>{var P=Ue();p(o,P)},s=o=>{Qe(o,{get redirectTo(){return r(u)}})};w(g,o=>{b()?o(n):o(s,!1)})}l(i),p(F,i),ce(),M()}export{vr as component};
//# sourceMappingURL=31.BY7QVZ85.js.map
