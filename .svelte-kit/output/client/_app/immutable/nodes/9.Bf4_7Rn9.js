import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as oe,m as l,t as m,g as t,b as ae,$ as ie,e as i,c as s,s as o,r as a,i as se,n as O}from"../chunks/D8Zr53n5.js";import{s as g}from"../chunks/UpSy6tP0.js";import{i as U}from"../chunks/BAqAra_5.js";import{e as de,i as ne}from"../chunks/8AErAcLY.js";import{t as y,a as x}from"../chunks/ByokzzJe.js";import{h as le,e as z,r as ce}from"../chunks/CCLz0Z0F.js";import{r as $}from"../chunks/DpNHaJTn.js";import{t as me,f as ue}from"../chunks/CwmK-V57.js";import{b as G,a as H}from"../chunks/Djn-aou_.js";import{b as pe}from"../chunks/dleV8ATl.js";import{p as be}from"../chunks/Bfc47y5P.js";import{i as fe}from"../chunks/BzVavbfz.js";import{p as ve}from"../chunks/D0guHZRM.js";import{g as K}from"../chunks/BMc8ARJA.js";var ge=y('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"> </div>'),xe=y('<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4"> </div>'),ye=y("<option> </option>"),he=y('<div class="container mx-auto px-4 py-8"><a href="/admin/forums" class="text-blue-600 hover:underline mb-4 inline-block">&larr; Back to Forum Management</a> <h1 class="text-2xl font-bold mb-6">Edit Topic</h1> <!> <!> <form class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md"><div class="mb-4"><label for="title" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label> <input id="title" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required></div> <div class="mb-4"><label for="category" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Category</label> <select id="category" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required></select></div> <div class="mb-4"><label for="content" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Content</label> <textarea id="content" rows="10" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required></textarea></div> <div class="mb-4 flex items-center"><input id="is-pinned" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"> <label for="is-pinned" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">Pin this topic</label></div> <div class="mb-6 flex items-center"><input id="is-locked" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"> <label for="is-locked" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">Lock this topic (prevent new replies)</label></div> <div class="flex justify-between"><button type="submit" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md disabled:opacity-50"> </button> <button type="button" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md">Delete Topic</button></div></form></div>');function Be(Q,q){oe(q,!1);let R=ve(q,"data",8),{topic:n,categories:V}=R(),h=l(n.title),_=l(n.content),u=l(n.category),k=l(n.is_pinned||!1),w=l(n.is_locked||!1),p=l(!1),c=l(""),b=l("");async function W(){o(p,!0),o(c,""),o(b,"");try{const e=await fetch(`/api/forum/topics/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n.id,title:t(h),content:t(_),category_id:t(u),is_pinned:t(k),is_locked:t(w)})});if(e.ok)o(b,"Topic updated successfully!"),setTimeout(()=>K("/admin/forums"),1500);else{const r=await e.json();o(c,r.message||"Failed to update topic.")}}catch(e){o(c,"An unexpected error occurred."),console.error(e)}finally{o(p,!1)}}async function X(){if(confirm("Are you sure you want to delete this topic? This cannot be undone."))try{const e=await fetch(`/api/forum/topics/${n.id}`,{method:"DELETE"});if(e.ok)K("/admin/forums");else{const r=await e.json();o(c,r.message||"Failed to delete topic.")}}catch(e){o(c,"An unexpected error occurred."),console.error(e)}}fe();var f=he();le(e=>{ie.title="Edit Topic | Admin"});var F=i(s(f),4);{var Y=e=>{var r=ge(),d=s(r,!0);a(r),m(()=>g(d,t(c))),x(e,r)};U(F,e=>{t(c)&&e(Y)})}var L=i(F,2);{var Z=e=>{var r=xe(),d=s(r,!0);a(r),m(()=>g(d,t(b))),x(e,r)};U(L,e=>{t(b)&&e(Z)})}var T=i(L,2),E=s(T),M=i(s(E),2);$(M),a(E);var j=i(E,2),A=i(s(j),2);m(()=>{t(u),se(()=>{})}),de(A,5,()=>V,ne,(e,r)=>{var d=ye(),N={},re=s(d,!0);a(d),m(()=>{N!==(N=t(r).id)&&(d.value=(d.__value=t(r).id)==null?"":t(r).id),g(re,t(r).name)}),x(e,d)}),a(A),a(j);var C=i(j,2),P=i(s(C),2);ce(P),a(C);var D=i(C,2),B=s(D);$(B),O(2),a(D);var S=i(D,2),I=s(S);$(I),O(2),a(S);var J=i(S,2),v=s(J),ee=s(v,!0);a(v);var te=i(v,2);a(J),a(T),a(f),m(()=>{v.disabled=t(p),g(ee,t(p)?"Saving...":"Save Changes")}),G(M,()=>t(h),e=>o(h,e)),pe(A,()=>t(u),e=>o(u,e)),G(P,()=>t(_),e=>o(_,e)),H(B,()=>t(k),e=>o(k,e)),H(I,()=>t(w),e=>o(w,e)),z("click",te,X),z("submit",T,be(W)),me(1,f,()=>ue),x(Q,f),ae()}export{Be as component};
