import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as B,m as w,c as o,b as D,$ as G,g as m,e as r,s as f,r as s}from"../chunks/D8Zr53n5.js";import{h as I,e as K}from"../chunks/CCLz0Z0F.js";import{t as F,a as C}from"../chunks/ByokzzJe.js";import{i as M}from"../chunks/BAqAra_5.js";import{t as Q,f as R}from"../chunks/CwmK-V57.js";import{i as W}from"../chunks/BzVavbfz.js";import{p as X}from"../chunks/D0guHZRM.js";import{s as Y,a as k}from"../chunks/CYIMW-vo.js";import{u as Z}from"../chunks/QfzvdxsM.js";import{F as ee,a as te,b as ae,s as g,C as oe}from"../chunks/BJI8ZFFo.js";var se=F('<div class="fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-lg relative"><button class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">&times;</button> <!></div></div>'),re=F('<div class="container mx-auto px-4 py-8 max-w-7xl"><!> <!> <div class="grid grid-cols-1 lg:grid-cols-12 gap-8"><div class="lg:col-span-9"><h2 class="text-2xl font-bold mb-4"></h2> <!></div> <div class="lg:col-span-3"><!></div></div></div>');function he(S,b){B(b,!1);const[h,j]=Y(),L=()=>k(g,"$subscribedTopics",h),N=()=>k(Z,"$user",h);let n=X(b,"data",8),c=w(n().topics),d=n().categories,$=n().selectedTag,l=w(!1);function O(){f(l,!0)}function V(){}function z(e){f(c,[e.detail,...m(c)])}function E(e){L().includes(e)||g.update(t=>[...t,e])}function H(e){g.update(t=>t.filter(a=>a!==e))}function J(e,t){var a;fetch(`/api/forum/topics/${e}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:(a=N())==null?void 0:a.uid,vote_type:t==="up"?1:-1})}).then(i=>{if(!i.ok)throw new Error("Vote failed")}).catch(console.error)}W();var p=re();I(e=>{G.title=`Tag: ${$??""} | LearnFlow Forums`});var _=o(p);ee(_,{$$events:{newTopic:O,toggleSubscriptions:V}});var T=r(_,2);{var P=e=>{var t=se(),a=o(t),i=o(a),A=r(i,2);oe(A,{categories:d,$$events:{topicCreated:z}}),s(a),s(t),K("click",i,()=>f(l,!1)),C(e,t)};M(T,e=>{m(l)&&e(P)})}var u=r(T,2),v=o(u),x=o(v);x.textContent=`Tag: ${$??""}`;var U=r(x,2);te(U,{get topics(){return m(c)},categories:d,$$events:{subscribe:({detail:e})=>E(e),unsubscribe:({detail:e})=>H(e),vote:({detail:e})=>J(e.id,e.type)}}),s(v);var y=r(v,2),q=o(y);ae(q,{categories:d,filterCategory:"all"}),s(y),s(u),s(p),Q(1,u,()=>R,()=>({duration:300})),C(S,p),D(),j()}export{he as component};
