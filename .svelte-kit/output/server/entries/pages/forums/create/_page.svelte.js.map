{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../src/lib/components/forums/CreateTopicForm.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { categories, loadCategories } from '$lib/stores/forumStore';\n  import { createForumTopic } from '$lib/services/forums/forumService';\n  import type { ForumTopic } from '$lib/types/forumTypes';\n  import { goto } from '$app/navigation';\n  import Icon from '@iconify/svelte';\n  \n  export let categoryId: string | null = null;\n  \n  let title = '';\n  let content = '';\n  let selectedCategoryId = categoryId;\n  let tags: string[] = [];\n  let newTag = '';\n  \n  let isSubmitting = false;\n  let error: string | null = null;\n  \n  onMount(() => {\n    loadCategories();\n  });\n  \n  function addTag() {\n    if (newTag.trim() && !tags.includes(newTag.trim())) {\n      tags = [...tags, newTag.trim()];\n      newTag = '';\n    }\n  }\n  \n  function removeTag(tag: string) {\n    tags = tags.filter(t => t !== tag);\n  }\n  \n  function handleKeydown(event: KeyboardEvent) {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      addTag();\n    }\n  }\n  \n  async function handleSubmit() {\n    if (!title.trim() || !content.trim() || !selectedCategoryId) {\n      error = 'Please fill in all required fields';\n      return;\n    }\n    \n    isSubmitting = true;\n    error = null;\n    \n    try {\n      const newTopic = await createForumTopic({\n        title: title.trim(),\n        content: content.trim(),\n        category_id: selectedCategoryId,\n        tags: tags.length > 0 ? tags : undefined\n      } as Omit<ForumTopic, 'id' | 'created_at' | 'views' | 'post_count' | 'updated_at'>);\n      \n      if (newTopic) {\n        goto(`/forums/topic/${newTopic.id}`);\n      } else {\n        error = 'Failed to create topic. Please try again.';\n      }\n    } catch (err) {\n      console.error('Error creating topic:', err);\n      error = 'An error occurred while creating your topic.';\n    } finally {\n      isSubmitting = false;\n    }\n  }\n</script>\n\n<!-- Placeholder for CreateTopicForm.svelte -->\n\n<div class=\"create-topic-form\">\n  <h2 class=\"text-xl font-semibold text-gray-900 dark:text-white mb-6\">Create New Topic</h2>\n  \n  <div class=\"space-y-6\">\n    {#if error}\n      <div class=\"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-4 rounded-md\">\n        <p>{error}</p>\n      </div>\n    {/if}\n    \n    <div>\n      <label for=\"title\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n        Title *\n      </label>\n      <input\n        type=\"text\"\n        id=\"title\"\n        bind:value={title}\n        placeholder=\"Enter a descriptive title for your topic\"\n        class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400\"\n        disabled={isSubmitting}\n      />\n    </div>\n    \n    <div>\n      <label for=\"category\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n        Category *\n      </label>\n      <select\n        id=\"category\"\n        bind:value={selectedCategoryId}\n        class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400\"\n        disabled={isSubmitting || !!categoryId}\n      >\n        <option value=\"\" disabled>Select a category</option>\n        {#each $categories as category}\n          <option value={category.id}>{category.name}</option>\n        {/each}\n      </select>\n    </div>\n    \n    <div>\n      <label for=\"content\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n        Content *\n      </label>\n      <textarea\n        id=\"content\"\n        bind:value={content}\n        placeholder=\"Write your topic content here... (Markdown supported)\"\n        class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400 min-h-[200px]\"\n        disabled={isSubmitting}\n      ></textarea>\n      <p class=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n        You can use Markdown formatting to structure your content.\n      </p>\n    </div>\n    \n    <div>\n      <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n        Tags\n      </label>\n      <div class=\"flex\">\n        <input\n          type=\"text\"\n          bind:value={newTag}\n          on:keydown={handleKeydown}\n          placeholder=\"Add tags (press Enter to add)\"\n          class=\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400\"\n          disabled={isSubmitting}\n        />\n        <button\n          on:click={addTag}\n          type=\"button\"\n          class=\"px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 border-l-0 rounded-r-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\n          disabled={isSubmitting || !newTag.trim()}\n        >\n          Add\n        </button>\n      </div>\n      \n      {#if tags.length > 0}\n        <div class=\"flex flex-wrap gap-2 mt-2\">\n          {#each tags as tag}\n            <div class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300\">\n              {tag}\n              <button\n                on:click={() => removeTag(tag)}\n                type=\"button\"\n                class=\"ml-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200\"\n                disabled={isSubmitting}\n              >\n                <Icon icon=\"mdi:close\" class=\"w-4 h-4\" />\n              </button>\n            </div>\n          {/each}\n        </div>\n      {/if}\n    </div>\n    \n    <div class=\"flex justify-end\">\n      <button\n        on:click={handleSubmit}\n        disabled={isSubmitting || !title.trim() || !content.trim() || !selectedCategoryId}\n        class=\"px-4 py-2 bg-cherry-600 text-white rounded-md hover:bg-cherry-700 dark:bg-cherry-500 dark:hover:bg-cherry-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n      >\n        {isSubmitting ? 'Creating Topic...' : 'Create Topic'}\n      </button>\n    </div>\n  </div>\n</div>"],"names":["$.attr","$.escape"],"mappings":";;;;;;;;;;;AAQa,MAAA,6CAA4B,IAAI;AAEvC,MAAA,QAAQ;AACR,MAAA,UAAU;AACV,MAAA,qBAAqB;MACrB,OAAc,CAAA;AACd,MAAA,SAAS;AAET,MAAA,eAAe;;;;;;AA2ED,YAAA,OAAA,yJAAAA,KAAA,SAAA,KAAK,CAGP,wSAAAA,KAAA,YAAA,cAYA,IAAA,CAAA,oYAAAA,KAAA,cAAkB,YAAU,IAAA,CAAA;;QAGhB,WAAQ,WAAA,OAAA;AACb,cAAA,OAAA,UAAAA,KAAA,SAAA,SAAS,EAAE,CAAG,IAAAC,YAAA,SAAS,IAAI,CAAA;AAAA;ygBAclC,cAAY,IAAA,CAAA;6BAHV,OAAO;;;;AAiBL,YAAA,OAAA,kRAAAD,KAAA,SAAA,MAAM,iTAIR,cAAY,IAAA,CAAA,yOAAAA,KAAA,YAMK,CAAA,OAAO,KAAI,GAAA,IAAA,CAAA;MAMrC,KAAK,SAAS,GAAC;;2CAET,IAAI;;;UAAI,MAAG,aAAA,SAAA;AAEb,gBAAA,OAAA,sJAAAC,YAAA,GAAG,wIAKQ,cAAY,IAAA,CAAA;;;;;;;;AAapB,YAAA,OAAA,uDAAAD,KAAA,YAAiB,CAAA,MAAM,WAAW,QAAQ,KAAI,KAAA,CAAO,oBAG9D,IAAA,CAAA,4LAAAC,YAAqC,cAAc,CAAA;;;;;;;;;;;;"}