{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../src/routes/forums/category/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { page } from '$app/stores';\n  import { categories, topics, loadCategories, loadTopics, isLoading, error, getCategoryById } from '$lib/stores/forumStore';\n  import CreateTopicForm from '$lib/components/forums/CreateTopicForm.svelte';\n  import Icon from '@iconify/svelte';\n  \n  let categoryId = $page.params.id;\n  let searchQuery = '';\n  let filteredTopics: typeof $topics = [];\n  let showCreateForm = false;\n  let category: ReturnType<typeof getCategoryById>;\n  \n  $: {\n    // Filter topics based on search query\n    filteredTopics = searchQuery ? \n      $topics.filter(topic => \n        topic.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        topic.content.toLowerCase().includes(searchQuery.toLowerCase())\n      ) : \n      $topics;\n  }\n  \n  $: {\n    category = getCategoryById(categoryId);\n  }\n  \n  onMount(async () => {\n    await loadCategories();\n    await loadTopics(categoryId);\n  });\n  \n  function toggleCreateForm() {\n    showCreateForm = !showCreateForm;\n  }\n</script>\n\n<div class=\"container mx-auto px-4 py-8\">\n  <div class=\"mb-6\">\n    <a href=\"/forums\" class=\"inline-flex items-center text-cherry-600 dark:text-cherry-400 hover:underline mb-4\">\n      <Icon icon=\"mdi:arrow-left\" class=\"w-5 h-5 mr-1\" />\n      Back to Forums\n    </a>\n    \n    {#if category}\n      <h1 class=\"text-2xl font-bold text-gray-900 dark:text-white\">{category.name}</h1>\n      <p class=\"text-gray-600 dark:text-gray-400 mt-2\">{category.description}</p>\n    {:else if !$isLoading}\n      <h1 class=\"text-2xl font-bold text-gray-900 dark:text-white\">Category</h1>\n      <p class=\"text-gray-600 dark:text-gray-400 mt-2\">Loading category details...</p>\n    {/if}\n  </div>\n  \n  <div class=\"flex justify-between items-center mb-6\">\n    <div class=\"relative\">\n      <input\n        type=\"text\"\n        bind:value={searchQuery}\n        placeholder=\"Search topics...\"\n        class=\"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400\"\n      />\n      <Icon icon=\"mdi:magnify\" class=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n    </div>\n    \n    <button \n      on:click={toggleCreateForm}\n      class=\"px-4 py-2 bg-cherry-600 text-white rounded-md hover:bg-cherry-700 dark:bg-cherry-500 dark:hover:bg-cherry-600 transition-colors\"\n    >\n      {showCreateForm ? 'Cancel' : 'Create New Topic'}\n    </button>\n  </div>\n  \n  {#if showCreateForm}\n    <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6\">\n      <CreateTopicForm {categoryId} />\n    </div>\n  {/if}\n  \n  {#if $isLoading}\n    <div class=\"flex justify-center items-center py-12\">\n      <div class=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cherry-500\"></div>\n    </div>\n  {:else if $error}\n    <div class=\"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-4 rounded-md mb-6\">\n      <p>{$error}</p>\n    </div>\n  {:else if filteredTopics.length === 0}\n    <div class=\"text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow-md\">\n      <Icon icon=\"mdi:forum-outline\" class=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\n      <h3 class=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">No topics found</h3>\n      {#if searchQuery}\n        <p class=\"text-gray-600 dark:text-gray-400\">No topics match your search criteria.</p>\n      {:else}\n        <p class=\"text-gray-600 dark:text-gray-400\">There are no topics in this category yet. Be the first to create one!</p>\n      {/if}\n    </div>\n  {:else}\n    <div class=\"space-y-4\">\n      {#each filteredTopics as topic}\n        <a href=\"/forums/topic/{topic.id}\" class=\"block\">\n          <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow {topic.isPinned ? 'border-l-4 border-cherry-500 dark:border-cherry-400' : ''}\">\n            <div class=\"p-4\">\n              <div class=\"flex items-start\">\n                {#if topic.isPinned}\n                  <div class=\"flex-shrink-0 mr-3\">\n                    <Icon icon=\"mdi:pin\" class=\"w-5 h-5 text-cherry-600 dark:text-cherry-400\" />\n                  </div>\n                {/if}\n                \n                <div class=\"flex-1\">\n                  <h4 class=\"text-lg font-medium text-gray-900 dark:text-white mb-1\">{topic.title}</h4>\n                  \n                  <div class=\"flex items-center text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                    <span>{topic.authorName || 'Unknown'}</span>\n                    <span class=\"mx-2\">•</span>\n                    <span>{new Date(topic.createdAt).toLocaleDateString()}</span>\n                    <span class=\"mx-2\">•</span>\n                    <span class=\"flex items-center\">\n                      <Icon icon=\"mdi:eye-outline\" class=\"w-4 h-4 mr-1\" />\n                      {topic.viewCount}\n                    </span>\n                    <span class=\"mx-2\">•</span>\n                    <span class=\"flex items-center\">\n                      <Icon icon=\"mdi:comment-outline\" class=\"w-4 h-4 mr-1\" />\n                      {topic.replyCount}\n                    </span>\n                  </div>\n                  \n                  {#if topic.tags && topic.tags.length > 0}\n                    <div class=\"flex flex-wrap gap-2\">\n                      {#each topic.tags as tag}\n                        <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300\">\n                          {tag}\n                        </span>\n                      {/each}\n                    </div>\n                  {/if}\n                </div>\n              </div>\n            </div>\n          </div>\n        </a>\n      {/each}\n    </div>\n  {/if}\n</div>"],"names":["$.store_get","$.escape","$.attr_class","$.stringify","$.ensure_array_like"],"mappings":";;;;;;;;;;MAOM,aAAUA,UAAA,iBAAA,CAAA,GAAA,SAAA,IAAA,EAAS,OAAO;AAC1B,MAAA,cAAc;MACd,iBAA8B,CAAA;MAE9B;AAED;AAED,qBAGgEA,UAAA,iBAAA,CAAA,GAAA,WAAA,MAAA;AAAA,EAGlE;AAEG;AACD,eAAW,gBAAgB,UAAU;AAAA,EACvC;;;;MAmBO,UAAQ;;AACmD,cAAA,OAAA,gEAAAC,YAAA,SAAS,IAAI,CACzB,0DAAAA,YAAA,SAAS,WAAW,CAAA;AAAA;;;;;;+IAWxD,WAAW,CAAA;;;;;gMAWI,kBAAkB,CAAA;;;;;;;;;;;aAkBzC,eAAe,WAAW,GAAC;;;;;;;;;;;;;;;yCAY1B,cAAc;;;UAAI,QAAK,WAAA,SAAA;oEACJ,MAAM,EAAE,CACgF,EAAA,CAAA,sBAAAC,WAAA,oGAAAC,UAAA,MAAM,WAAW,wDAAwD,EAAE,CAAA,EAAA,CAAA;AAG9K,UAAA,MAAM,UAAQ;;;;;;;;;;;AAOmD,gBAAA,OAAA,mGAAAF,YAAA,MAAM,KAAK,CAGtE,4FAAAA,YAAA,MAAM,cAAc,SAAS,CAAA,6CAAAA,YAAA,IAEzB,KAAK,MAAM,SAAS,EAAE,oBAAkB,CAAA;;;;;AAIhD,gBAAA,OAAA,WAAAA,YAAA,MAAM,SAAS,CAAA;;;;;AAKf,gBAAA,OAAA,WAAAA,YAAA,MAAM,UAAU,CAAA;UAIhB,MAAM,QAAQ,MAAM,KAAK,SAAS,GAAC;;AAE7B,cAAA,eAAAG,kBAAA,MAAM,IAAI;;;cAAI,MAAG,aAAA,OAAA;8LAEnB,GAAG,CAAA;AAAA;;;;;;;;;;;;;"}