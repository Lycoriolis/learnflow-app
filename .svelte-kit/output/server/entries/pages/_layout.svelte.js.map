{"version":3,"file":"_layout.svelte.js","sources":["../../../../../src/lib/stores/sidebarStore.ts","../../../../../src/lib/components/Sidebar.svelte","../../../../../src/lib/components/Header.svelte","../../../../../src/lib/components/PipWidget.svelte","../../../../../src/lib/stores/appStore.ts","../../../../../src/lib/components/courses/CourseModal.svelte","../../../../../src/lib/components/Footer.svelte","../../../../../src/routes/+layout.svelte"],"sourcesContent":["import { writable } from 'svelte/store';\n\n// true = collapsed (icons only), false = expanded (full width)\nexport const sidebarCollapsed = writable(false);","<script lang=\"ts\">\n  import { page } from '$app/stores';\n  import { onMount, onDestroy } from 'svelte';\n  import { slide } from 'svelte/transition';\n  import type { SlideParams } from 'svelte/transition';\n  import { isAuthenticated, user, loading } from '$lib/stores/authStore.js';\n  import { sidebarCollapsed } from '$lib/stores/sidebarStore.js';\n  import { browser } from '$app/environment';\n  import { navigateToLogin } from '$lib/utils/navigation';\n  \n  type NavItem = {\n    name: string;\n    href: string;\n    icon: string;\n    authRequired: boolean;\n  };\n  \n  type NavCategory = {\n    title: string;\n    items: NavItem[];\n  };\n  \n  const navigation: NavCategory[] = [\n    {\n      title: 'Main',\n      items: [\n        { name: 'Dashboard', href: '/', icon: 'fa-home', authRequired: false },\n        { name: 'Courses', href: '/courses', icon: 'fa-book', authRequired: false },\n        { name: 'Exercises', href: '/exercises', icon: 'fa-pencil-alt', authRequired: false },\n        { name: 'My Learning', href: '/my-learning', icon: 'fa-graduation-cap', authRequired: true },\n        { name: 'Statistics', href: '/statistics', icon: 'fa-chart-line', authRequired: true },\n        { name: 'Calendar', href: '/calendar', icon: 'fa-calendar', authRequired: true }\n      ]\n    },\n    {\n      title: 'Community',\n      items: [\n        { name: 'Discussion Forums', href: '/forums', icon: 'fa-comments', authRequired: false },\n        { name: 'User Groups', href: '/groups', icon: 'fa-users', authRequired: true },\n        { name: 'Events', href: '/events', icon: 'fa-calendar-alt', authRequired: false }\n      ]\n    },\n    {\n      title: 'Resources',\n      items: [\n        { name: 'Help Center', href: '/help', icon: 'fa-question-circle', authRequired: false },\n        { name: 'Contact Support', href: '/support', icon: 'fa-headset', authRequired: false }\n      ]\n    },\n    {\n      title: 'Tools',\n      items: [\n        { name: 'Workspace', href: '/tools/workspace', icon: 'fa-tools', authRequired: false },\n        { name: 'Notepad', href: '/tools/notepad', icon: 'fa-sticky-note', authRequired: false },\n        { name: 'Tasks', href: '/tools/tasks', icon: 'fa-list-check', authRequired: false },\n        { name: 'AI Study Chat', href: '/tools/chat', icon: 'fa-robot', authRequired: false }\n      ]\n    }\n  ];\n  \n  let mobileMenuOpen = false;\n  let path = '';\n  let expanded: Record<string, boolean> = {};\n  let pageUnsubscribe: () => void;\n  \n  // Close mobile menu when clicking outside\n  let handleOutsideClick: ((event: MouseEvent) => void) | null = null;\n  \n  // Handle keyboard navigation\n  function handleKeyDown(event: KeyboardEvent): void {\n    if (!browser) return;\n    \n    // Escape key closes mobile menu\n    if (event.key === 'Escape' && mobileMenuOpen) {\n      toggleMobileMenu();\n    }\n  }\n  \n  onMount(() => {\n    if (browser) {\n      // Set initial expanded state based on current path\n      navigation.forEach(category => {\n        if (category.items.some(item => path.startsWith(item.href))) {\n          expanded[category.title] = true;\n        } else {\n          expanded[category.title] = false;\n        }\n      });\n      \n      // Set up event listeners\n      handleOutsideClick = (event: MouseEvent) => {\n        const sidebar = document.getElementById('sidebar');\n        const target = event.target as Node;\n        \n        if (mobileMenuOpen && sidebar && !sidebar.contains(target)) {\n          mobileMenuOpen = false;\n        }\n      };\n      \n      document.addEventListener('click', handleOutsideClick);\n      document.addEventListener('keydown', handleKeyDown);\n      \n      // Subscribe to page changes\n      pageUnsubscribe = page.subscribe(value => {\n        path = value.url.pathname;\n        // Close mobile menu on navigation\n        mobileMenuOpen = false;\n      });\n    }\n  });\n  \n  onDestroy(() => {\n    if (browser) {\n      // Clean up event listeners\n      if (handleOutsideClick) {\n        document.removeEventListener('click', handleOutsideClick);\n      }\n      document.removeEventListener('keydown', handleKeyDown);\n      \n      // Unsubscribe from page store\n      if (pageUnsubscribe) {\n        pageUnsubscribe();\n      }\n    }\n  });\n\n  function toggleMobileMenu() {\n    mobileMenuOpen = !mobileMenuOpen;\n  }\n\n  function toggleCollapse() {\n    sidebarCollapsed.update(v => !v);\n  }\n  \n  function toggleCategory(category: string) {\n    expanded = { ...expanded, [category]: !expanded[category] };\n  }\n  \n  // Determine if a navigation item is active\n  function isActive(href: string): boolean {\n    return path === href || path.startsWith(href + '/');\n  }\n</script>\n\n<!-- Mobile Menu Button -->\n<div class=\"lg:hidden fixed top-4 left-4 z-50\">\n  <button \n    on:click={toggleMobileMenu} \n    class=\"p-2 rounded-full bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-200 shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n    aria-label=\"Toggle menu\"\n    aria-expanded={mobileMenuOpen}\n  >\n    <i class=\"fas fa-bars\"></i>\n  </button>\n</div>\n\n<!-- External Expand Button (visible when collapsed) -->\n{#if $sidebarCollapsed}\n  <div class=\"fixed top-4 left-4 z-50 hidden lg:block\">\n    <button\n      on:click={toggleCollapse}\n      class=\"p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 shadow focus:outline-none focus:ring\"\n      aria-label=\"Expand sidebar\"\n    >\n      <i class=\"fas fa-angle-right\"></i>\n    </button>\n  </div>\n{/if}\n\n<!-- Overlay for mobile -->\n{#if mobileMenuOpen}\n  <div \n    class=\"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden\" \n    aria-hidden=\"true\"\n  ></div>\n{/if}\n\n<!-- Sidebar -->\n<nav id=\"sidebar\"\n     class=\"sidebar w-64 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 fixed h-full z-30 flex flex-col transform transition-transform duration-300 ease-in-out -translate-x-full\"\n     class:translate-x-0={mobileMenuOpen}\n     class:lg:translate-x-0={!$sidebarCollapsed}\n     class:lg:-translate-x-full={$sidebarCollapsed}\n     aria-label=\"Main navigation\">\n  <!-- Internal Collapse Toggle Button -->\n  <button\n    on:click={toggleCollapse}\n    class=\"absolute top-4 right-4 hidden lg:block p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring\"\n    aria-label={$sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}\n  >\n    <i class={`fas ${$sidebarCollapsed ? 'fa-angle-right' : 'fa-angle-left'}`}></i>\n  </button>\n\n  <!-- Logo/Header -->\n  <div class=\"p-4 flex items-center\">\n    <div class=\"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center mr-3\">\n      <i class=\"fas fa-graduation-cap text-white\"></i>\n    </div>\n    <h1 class=\"text-xl font-bold text-gray-800 dark:text-indigo-300\">LearnFlow</h1>\n  </div>\n\n  <!-- Scrollable Navigation -->\n  <div class=\"flex-1 overflow-y-auto px-2\">\n    {#each navigation as category}\n      <div class=\"mb-4\">\n        <button\n          class=\"w-full flex justify-between items-center px-3 py-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 tracking-wider focus:outline-none focus:ring-1 focus:ring-indigo-500 rounded-md\"\n          on:click={() => toggleCategory(category.title)}\n          aria-expanded={expanded[category.title] || false}\n          aria-controls={`category-${category.title.toLowerCase().replace(/\\s+/g, '-')}`}\n        >\n          <span>{category.title}</span>\n          <i class={`fas ${expanded[category.title] ? 'fa-chevron-down text-gray-400' : 'fa-chevron-right text-gray-600'}`}></i>\n        </button>\n        \n        {#if expanded[category.title]}\n          <ul \n            id={`category-${category.title.toLowerCase().replace(/\\s+/g, '-')}`}\n            in:slide={{ duration: 200 } as SlideParams} \n            out:slide={{ duration: 200 } as SlideParams}\n            class=\"mt-2 space-y-1\"\n            role=\"menu\"\n          >\n            {#each category.items as item}\n              {#if !item.authRequired || $isAuthenticated}\n                <li role=\"none\">\n                  <a\n                    href={item.href}\n                    data-sveltekit-preload-data=\"hover\"\n                    aria-current={isActive(item.href) ? 'page' : undefined}\n                    class={`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150 ease-in-out ${\n                      isActive(item.href) \n                        ? 'bg-indigo-100 text-indigo-700 dark:bg-indigo-700 dark:text-indigo-100' \n                        : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800'\n                    }`}\n                    role=\"menuitem\"\n                  >\n                    <i class={`fas ${item.icon} mr-3 w-5 text-center`} aria-hidden=\"true\"></i>\n                    <span>{item.name}</span>\n                  </a>\n                </li>\n              {/if}\n            {/each}\n          </ul>\n        {/if}\n      </div>\n    {/each}\n  </div>\n\n  <!-- Account Section -->\n  <div class=\"p-4 border-t border-gray-200 dark:border-gray-700\">\n    {#if browser && $loading}\n      <div class=\"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg animate-pulse\">\n        <div class=\"flex items-center mb-2\">\n          <div class=\"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 mr-2\"></div>\n          <div class=\"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4\"></div>\n        </div>\n        <div class=\"h-8 bg-gray-300 dark:bg-gray-600 rounded w-full\"></div>\n      </div>\n    {:else if browser && $isAuthenticated && $user}\n      <div class=\"p-4 bg-gray-100 dark:bg-gray-800 rounded-lg\">\n        <div class=\"flex items-center mb-3\">\n          <div class=\"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center mr-2 text-white text-sm font-medium\">\n            {$user.displayName?.charAt(0).toUpperCase() ?? $user.email?.charAt(0).toUpperCase() ?? 'U'}\n          </div>\n          <span class=\"font-medium text-sm text-gray-800 dark:text-gray-100 truncate\">\n            {$user.displayName ?? $user.email ?? 'User'}\n          </span>\n        </div>\n        <a \n          href=\"/settings\" \n          class=\"w-full py-2 px-3 bg-gray-200 dark:bg-gray-700 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 block text-center transition duration-150\"\n          aria-label=\"Go to account settings\"\n        >\n          Account Settings\n        </a>\n      </div>\n    {:else}\n      <div class=\"p-4 bg-gray-100 dark:bg-gray-800 rounded-lg text-center\">\n        <p class=\"text-sm text-gray-600 dark:text-gray-300 mb-3\">Log in to track your progress and access personalized features.</p>\n        <button \n          class=\"w-full py-2 px-3 bg-indigo-600 hover:bg-indigo-700 rounded-md text-sm font-medium text-white transition duration-150 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n          on:click={navigateToLogin}\n          aria-label=\"Log in or sign up\"\n        >\n          Log In / Sign Up\n        </button>\n      </div>\n    {/if}\n  </div>\n</nav>\n\n<style>\n  /* Prevent scrolling when mobile menu is open */\n  :global(body.sidebar-open) {\n    overflow: hidden;\n  }\n  \n  /* Improve focus states for keyboard navigation */\n  :global(a:focus), :global(button:focus) {\n    outline: 2px solid #818cf8;\n    outline-offset: 2px;\n  }\n  \n  /* Animation for mobile menu */\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  \n  /* Screen reader utilities */\n  .sr-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border-width: 0;\n  }\n</style>","<script lang=\"ts\">\n  import { pipVisible } from '$lib/stores/pipStores.js';\n  import { isAuthenticated, user, loading } from '$lib/stores/authStore.js';\n  import { logout } from '$lib/authService.js';\n  import { slide } from 'svelte/transition';\n  import { navigateToLogin } from '$lib/utils/navigation';\n  import { goto } from '$app/navigation';\n\n  export let onTogglePip = () => pipVisible.update((v: boolean) => !v);\n  \n  let searchQuery = '';\n  \n  function handleSearch() {\n    if (searchQuery.trim()) {\n      // Navigate to search results page (implementation would depend on your routing)\n      console.log('Searching for:', searchQuery);\n    }\n  }\n  \n  function navigateTo(path: string) {\n    goto(path);\n  }\n</script>\n\n<header class=\"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-40\">\n  <div class=\"max-w-full mx-auto px-4 py-3 sm:px-6 lg:px-8 flex justify-between items-center\">\n    <!-- Logo and Navigation -->\n    <div class=\"flex items-center\">\n      <a href=\"/\" class=\"flex items-center space-x-2 text-indigo-600 dark:text-indigo-400\">\n        <i class=\"fas fa-graduation-cap text-2xl\"></i>\n        <span class=\"font-bold text-xl hidden sm:inline\">LearnFlow</span>\n      </a>\n      \n      <nav class=\"ml-6 hidden md:flex space-x-4\">\n        <a href=\"/courses\" class=\"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400\">Courses</a>\n        <a href=\"/exercises\" class=\"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400\">Exercises</a>\n        <a href=\"/forums\" class=\"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400\">Forums</a>\n        {#if $isAuthenticated}\n          <a href=\"/my-learning\" class=\"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400\">My Learning</a>\n        {/if}\n      </nav>\n    </div>\n\n    <!-- Centered Search Container -->\n    <div class=\"flex-1 relative max-w-lg mx-auto px-4\">\n      <form on:submit|preventDefault={handleSearch} class=\"relative\">\n        <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n          <i class=\"fas fa-search text-gray-400\"></i>\n        </div>\n        <input\n          type=\"text\"\n          bind:value={searchQuery}\n          class=\"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n          placeholder=\"Search courses, exercises...\"\n        />\n        <button type=\"submit\" class=\"absolute inset-y-0 right-0 pr-3 flex items-center\" aria-label=\"Search\">\n          <i class=\"fas fa-arrow-right text-gray-400 hover:text-indigo-500\"></i>\n        </button>\n      </form>\n    </div>\n\n    <div class=\"ml-4 flex items-center space-x-3\">\n      <button \n        class=\"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n        aria-label=\"Show notifications\"\n      >\n        <i class=\"fas fa-bell\"></i>\n      </button>\n      \n      <button \n        id=\"pipToggle\" \n        class=\"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n        on:click={onTogglePip}\n        aria-label=\"Toggle learning tools widget\"\n      >\n        <i class=\"fas fa-puzzle-piece\"></i>\n      </button>\n\n      {#if $loading}\n        <div class=\"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse\"></div>\n      {:else if $isAuthenticated && $user}\n        <div class=\"flex items-center space-x-3\">\n          <div class=\"relative group\">\n            <button class=\"h-8 w-8 rounded-full bg-indigo-500 flex items-center justify-center text-white text-sm font-medium hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\">\n              {$user.displayName?.charAt(0).toUpperCase() ?? $user.email?.charAt(0).toUpperCase() ?? 'U'}\n            </button>\n            <div class=\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 hidden group-hover:block\">\n              <a href=\"/settings\" class=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700\">Profile Settings</a>\n              <a href=\"/my-learning\" class=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700\">My Learning</a>\n              <button \n                class=\"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700\"\n                on:click={logout}\n              >\n                Log out\n              </button>\n            </div>\n          </div>\n        </div>\n      {:else}\n        <button \n          class=\"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out\"\n          on:click={navigateToLogin}\n        >\n          Log in\n        </button>\n      {/if}\n    </div>\n  </div>\n</header>","<script lang=\"ts\">\n  import { fly } from 'svelte/transition';\n  import { quintOut } from 'svelte/easing';\n  import { pipVisible, activeTool } from '$lib/stores/pipStores';\n  import { onMount, tick, onDestroy } from 'svelte';\n  import { browser } from '$app/environment';\n  \n  // Import the tool components\n  import PipTimer from './pip/PipTimer.svelte';\n  import PipTodo from './pip/PipTodo.svelte';\n  import PipNotes from './pip/PipNotes.svelte';\n  import PipCalculator from './pip/PipCalculator.svelte';\n  import PipFlashcards from './pip/PipFlashcards.svelte';\n  import PipDictionary from './pip/PipDictionary.svelte';\n  \n  // Tools configuration - Updated for Dark Theme\n  const tools = [\n    { id: 'timer', name: 'Timer', icon: 'fa-stopwatch', bgClass: 'bg-indigo-800', textClass: 'text-indigo-100', hoverClass: 'hover:bg-indigo-700' },\n    { id: 'todo', name: 'Todo', icon: 'fa-list-check', bgClass: 'bg-green-800', textClass: 'text-green-100', hoverClass: 'hover:bg-green-700' },\n    { id: 'notes', name: 'Notes', icon: 'fa-sticky-note', bgClass: 'bg-yellow-800', textClass: 'text-yellow-100', hoverClass: 'hover:bg-yellow-700' },\n    { id: 'calculator', name: 'Calculator', icon: 'fa-calculator', bgClass: 'bg-purple-800', textClass: 'text-purple-100', hoverClass: 'hover:bg-purple-700' },\n    { id: 'flashcards', name: 'Flashcards', icon: 'fa-layer-group', bgClass: 'bg-orange-800', textClass: 'text-orange-100', hoverClass: 'hover:bg-orange-700' },\n    { id: 'dictionary', name: 'Dictionary', icon: 'fa-book', bgClass: 'bg-cyan-800', textClass: 'text-cyan-100', hoverClass: 'hover:bg-cyan-700' }\n  ];\n  \n  let minimized = false;\n  let widgetElement: HTMLElement | null = null;\n  let isDragging = false;\n  let startX = 0;\n  let startY = 0;\n  let initialLeft = 0;\n  let initialTop = 0;\n  \n  // Use these variables for CSS instead of direct style manipulation\n  let widgetLeft = 'auto';\n  let widgetTop = 'auto';\n  let widgetBottom = '1rem';\n  let widgetRight = '1rem';\n  let widgetCursor = 'grab';\n  let widgetUserSelect = 'auto';\n  \n  // Safely close the pip widget\n  function closePip() {\n    if (browser) {\n      pipVisible.set(false);\n      minimized = false;\n    }\n  }\n  \n  // Toggle minimized state\n  function minimizePip() {\n    minimized = !minimized;\n  }\n  \n  // Switch between tools\n  function setTool(id: string) {\n    activeTool.set(id);\n    minimized = false;\n  }\n  \n  // Draggable functionality\n  function handleMouseDown(e: MouseEvent) {\n    if (!browser || !widgetElement) return;\n    \n    // Only drag via the header (check if the event target is within the header)\n    const header = widgetElement.querySelector('.pip-header');\n    if (!header || !header.contains(e.target as Node)) return;\n\n    // Prevent dragging if clicking on buttons inside the header\n    if (e.target instanceof Element && e.target.closest('button')) return; \n\n    isDragging = true;\n    startX = e.clientX;\n    startY = e.clientY;\n    \n    const rect = widgetElement.getBoundingClientRect();\n    initialLeft = rect.left;\n    initialTop = rect.top;\n\n    // Style changes for dragging state\n    widgetCursor = 'grabbing';\n    widgetUserSelect = 'none'; // Prevent text selection\n    widgetBottom = 'auto'; // Ensure absolute positioning takes over\n    widgetRight = 'auto';\n    \n    // Set explicit position\n    widgetLeft = `${initialLeft}px`;\n    widgetTop = `${initialTop}px`;\n  }\n  \n  function handleMouseMove(e: MouseEvent) {\n    if (!browser || !isDragging) return;\n    \n    const dx = e.clientX - startX;\n    const dy = e.clientY - startY;\n    \n    widgetLeft = `${initialLeft + dx}px`;\n    widgetTop = `${initialTop + dy}px`;\n  }\n  \n  function handleMouseUp() {\n    if (!browser) return;\n    \n    if (isDragging) {\n      isDragging = false;\n      widgetCursor = 'grab';\n      widgetUserSelect = 'auto'; // Re-enable text selection\n    }\n  }\n  \n  // Keep track of event listeners to clean up properly\n  let mouseMoveListener: ((e: MouseEvent) => void) | null = null;\n  let mouseUpListener: (() => void) | null = null;\n  \n  onMount(() => {\n    if (!browser) return;\n    \n    // Add event listeners to document for reliable drag tracking\n    mouseMoveListener = handleMouseMove;\n    mouseUpListener = handleMouseUp;\n    \n    document.addEventListener('mousemove', mouseMoveListener);\n    document.addEventListener('mouseup', mouseUpListener);\n  });\n  \n  // Ensure cleanup of event listeners when component is destroyed\n  onDestroy(() => {\n    if (!browser) return;\n    \n    if (mouseMoveListener) {\n      document.removeEventListener('mousemove', mouseMoveListener);\n    }\n    \n    if (mouseUpListener) {\n      document.removeEventListener('mouseup', mouseUpListener);\n    }\n  });\n  \n  // Function for keyboard accessibility\n  async function handleKeyDown(e: KeyboardEvent) {\n    if (!browser || !widgetElement) return;\n    \n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      // We need to create a synthetic MouseEvent for handleMouseDown\n      // First, wait for the DOM to be updated\n      await tick();\n      \n      const rect = widgetElement.getBoundingClientRect();\n      const mouseEvent = new MouseEvent('mousedown', {\n        clientX: rect.left + rect.width / 2,\n        clientY: rect.top + 20, // Position in the header\n        bubbles: true\n      });\n      handleMouseDown(mouseEvent);\n    }\n  }\n</script>\n\n{#if browser && $pipVisible}\n  <div\n    bind:this={widgetElement}\n    class=\"pip-widget {minimized ? 'minimized' : ''} bg-gray-800 text-gray-100 rounded-2xl overflow-hidden shadow-lg fixed squircle\"\n    style=\"position: fixed; bottom: {widgetBottom}; right: {widgetRight}; left: {widgetLeft}; top: {widgetTop}; cursor: {widgetCursor}; user-select: {widgetUserSelect};\"\n    role=\"region\" \n    aria-label=\"Quick Tools Widget\"\n    transition:fly={{ y: 20, duration: 300, easing: quintOut }}\n  >\n    <div \n      class=\"pip-header bg-indigo-600 text-white p-2 flex justify-between items-center cursor-grab\" \n      on:mousedown={handleMouseDown}\n      role=\"button\" \n      tabindex=\"0\"\n      aria-label=\"Drag quick tools widget\"\n      on:keydown={handleKeyDown}\n    >\n      <h3 class=\"font-medium text-sm pl-2\">Quick Tools</h3>\n      <div>\n        <button \n          on:click={minimizePip} \n          class=\"p-1 text-indigo-100 hover:bg-indigo-500 rounded-full focus:outline-none focus:ring-2 focus:ring-white\"\n          aria-label={minimized ? 'Expand widget' : 'Minimize widget'}\n        >\n          <i class=\"fas {minimized ? 'fa-expand' : 'fa-window-minimize'} w-3 h-3\"></i>\n        </button>\n        <button \n          on:click={closePip} \n          class=\"p-1 text-indigo-100 hover:bg-indigo-500 rounded-full ml-1 focus:outline-none focus:ring-2 focus:ring-white\"\n          aria-label=\"Close widget\"\n        >\n          <i class=\"fas fa-times w-3 h-3\"></i>\n        </button>\n      </div>\n    </div>\n    \n    {#if !minimized}\n      <div class=\"p-3 border-b border-gray-700\">\n        <div class=\"grid grid-cols-4 gap-2\">\n          {#each tools as tool}\n            <button\n              on:click={() => setTool(tool.id)}\n              class=\"p-2 {tool.bgClass} rounded-lg {tool.textClass} {tool.hoverClass} flex flex-col items-center text-center transition duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 { $activeTool === tool.id ? 'ring-2 ring-white' : 'ring-0' }\"\n              aria-label={`Open ${tool.name} tool`}\n            >\n              <i class=\"fas {tool.icon} text-base mb-1\"></i>\n              <span class=\"text-xs font-medium\">{tool.name}</span>\n            </button>\n          {/each}\n        </div>\n      </div>\n      \n      <div class=\"p-2 tool-content-area\">\n        {#if $activeTool === 'timer'}\n          <PipTimer />\n        {:else if $activeTool === 'todo'}\n          <PipTodo />\n        {:else if $activeTool === 'notes'}\n          <PipNotes />\n        {:else if $activeTool === 'calculator'}\n          <PipCalculator />\n        {:else if $activeTool === 'flashcards'}\n          <PipFlashcards />\n        {:else if $activeTool === 'dictionary'}\n          <PipDictionary />\n        {/if}\n      </div>\n    {/if}\n  </div>\n{/if}\n\n<style lang=\"postcss\">\n  .pip-widget {\n    width: 280px; /* Adjust width as needed */\n    will-change: transform;\n    transition: width 0.2s ease-out, height 0.2s ease-out;\n  }\n  .pip-widget.minimized {\n     height: 44px; /* Adjust to match header height */\n     width: auto; /* Or a fixed minimized width */\n     overflow: hidden;\n  }\n  .tool-content-area {\n      min-height: 150px; /* Give it some default height */\n  }\n\n  /* Custom scrollbar for the content area - Dark Theme */\n  .tool-content-area ::-webkit-scrollbar {\n      width: 6px;\n  }\n  .tool-content-area ::-webkit-scrollbar-track {\n      background: transparent;\n  }\n  .tool-content-area ::-webkit-scrollbar-thumb {\n      background-color: rgba(156, 163, 175, 0.4); /* gray-400 with opacity */\n      border-radius: 3px;\n      border: 1px solid transparent;\n      background-clip: content-box;\n  }\n  .tool-content-area ::-webkit-scrollbar-thumb:hover {\n      background-color: rgba(156, 163, 175, 0.6);\n  }\n\n  /* Add explicit Tailwind color classes for purging */\n  .bg-indigo-50 { --tw-bg-opacity: 1; background-color: rgb(239 246 255 / var(--tw-bg-opacity)); }\n  .text-indigo-700 { --tw-text-opacity: 1; color: rgb(67 56 202 / var(--tw-text-opacity)); }\n  .hover\\:bg-indigo-100:hover { --tw-bg-opacity: 1; background-color: rgb(224 231 255 / var(--tw-bg-opacity)); }\n  .focus\\:ring-indigo-400:focus { --tw-ring-color: rgb(129 140 248 / var(--tw-ring-opacity)); }\n  .border-indigo-100 { --tw-border-opacity: 1; border-color: rgb(224 231 255 / var(--tw-border-opacity)); }\n  .hover\\:border-indigo-200:hover { --tw-border-opacity: 1; border-color: rgb(199 210 254 / var(--tw-border-opacity)); }\n\n  .bg-green-50 { --tw-bg-opacity: 1; background-color: rgb(240 253 244 / var(--tw-bg-opacity)); }\n  .text-green-700 { --tw-text-opacity: 1; color: rgb(21 128 61 / var(--tw-text-opacity)); }\n  .hover\\:bg-green-100:hover { --tw-bg-opacity: 1; background-color: rgb(220 252 231 / var(--tw-bg-opacity)); }\n  .focus\\:ring-green-400:focus { --tw-ring-color: rgb(74 222 128 / var(--tw-ring-opacity)); }\n  .border-green-100 { --tw-border-opacity: 1; border-color: rgb(220 252 231 / var(--tw-border-opacity)); }\n  .hover\\:border-green-200:hover { --tw-border-opacity: 1; border-color: rgb(187 247 208 / var(--tw-border-opacity)); }\n\n  .bg-blue-50 { --tw-bg-opacity: 1; background-color: rgb(239 246 255 / var(--tw-bg-opacity)); }\n  .text-blue-700 { --tw-text-opacity: 1; color: rgb(29 78 216 / var(--tw-text-opacity)); }\n  .hover\\:bg-blue-100:hover { --tw-bg-opacity: 1; background-color: rgb(219 234 254 / var(--tw-bg-opacity)); }\n  .focus\\:ring-blue-400:focus { --tw-ring-color: rgb(96 165 250 / var(--tw-ring-opacity)); }\n  .border-blue-100 { --tw-border-opacity: 1; border-color: rgb(219 234 254 / var(--tw-border-opacity)); }\n  .hover\\:border-blue-200:hover { --tw-border-opacity: 1; border-color: rgb(191 219 254 / var(--tw-border-opacity)); }\n\n  .bg-purple-50 { --tw-bg-opacity: 1; background-color: rgb(250 245 255 / var(--tw-bg-opacity)); }\n  .text-purple-700 { --tw-text-opacity: 1; color: rgb(126 34 206 / var(--tw-text-opacity)); }\n  .hover\\:bg-purple-100:hover { --tw-bg-opacity: 1; background-color: rgb(243 232 255 / var(--tw-bg-opacity)); }\n  .focus\\:ring-purple-400:focus { --tw-ring-color: rgb(192 132 252 / var(--tw-ring-opacity)); }\n  .border-purple-100 { --tw-border-opacity: 1; border-color: rgb(243 232 255 / var(--tw-border-opacity)); }\n  .hover\\:border-purple-200:hover { --tw-border-opacity: 1; border-color: rgb(233 213 255 / var(--tw-border-opacity)); }\n\n  .bg-orange-50 { --tw-bg-opacity: 1; background-color: rgb(255 237 213 / var(--tw-bg-opacity)); }\n  .text-orange-700 { --tw-text-opacity: 1; color: rgb(234 88 12 / var(--tw-text-opacity)); }\n  .hover\\:bg-orange-100:hover { --tw-bg-opacity: 1; background-color: rgb(255 229 200 / var(--tw-bg-opacity)); }\n  .focus\\:ring-orange-400:focus { --tw-ring-color: rgb(251 146 60 / var(--tw-ring-opacity)); }\n  .border-orange-100 { --tw-border-opacity: 1; border-color: rgb(255 229 200 / var(--tw-border-opacity)); }\n  .hover\\:border-orange-200:hover { --tw-border-opacity: 1; border-color: rgb(255 215 170 / var(--tw-border-opacity)); }\n</style>","import { writable } from 'svelte/store';\nimport { persistentStore } from './persistentStore.js';\n\n// UI State\nexport const sidebarOpen = writable(false);\nexport const courseModalOpen = writable(false);\nexport const currentCourse = writable(null);\n\n// User-related State\nexport const user = writable({\n  name: 'Alex Morgan',\n  email: 'alex@example.com',\n  avatar: '',\n  streak: 7\n});\n\n// Types\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  avatar: string | null;\n  streakDays: number;\n}\n\n// Progress stats\nexport const progressStats = writable({\n  coursesInProgress: 3,\n  exercisesCompleted: 28,\n  learningStreak: 5,\n  totalHoursSpent: 42\n});\n\n// Modal visibility state\nexport const modals = writable({\n  courseContentOpen: false,\n});","<script>\n  import { onMount } from 'svelte';\n  import { courseModalOpen, currentCourse } from '$lib/stores/appStore';\n  import * as marked from 'marked';\n  \n  export let markdownContent = `\n# JavaScript Closures\n\nA closure is a combination of a function bundled together (enclosed) with references to its surrounding state (the lexical environment).\n\n## Understanding Closures\n\nIn JavaScript, closures are created every time a function is created, at function creation time.\n\n\\`\\`\\`javascript\nfunction outer() {\n  const outerVar = 'I am outside!';\n  \n  function inner() {\n    console.log(outerVar); // Accesses outerVar from the outer function's scope\n  }\n  \n  return inner;\n}\n\nconst myInner = outer();\nmyInner(); // Logs: \"I am outside!\"\n\\`\\`\\`\n\n## Practical Uses of Closures\n\n### Data Privacy\nClosures can be used to create private variables.\n\n\\`\\`\\`javascript\nfunction createCounter() {\n  let count = 0;\n  \n  return {\n    increment: function() { count++; },\n    getCount: function() { return count; }\n  };\n}\n\nconst counter = createCounter();\ncounter.increment();\nconsole.log(counter.getCount()); // 1\nconsole.log(counter.count); // undefined (private)\n\\`\\`\\`\n\n### Function Factories\nCreate specialized functions based on parameters.\n\n\\`\\`\\`javascript\nfunction multiplyBy(factor) {\n  return function(number) {\n    return number * factor;\n  };\n}\n\nconst double = multiplyBy(2);\nconsole.log(double(5)); // 10\n\\`\\`\\`\n\n## Exercise\n\nCreate a closure that implements a simple bank account with:\n- \\`deposit(amount)\\` method\n- \\`withdraw(amount)\\` method\n- \\`getBalance()\\` method\n\nThe balance should be private and only accessible through these methods.\n`;\n  \n  let renderedContent = '';\n  \n  function closeModal() {\n    courseModalOpen.set(false);\n  }\n  \n  async function renderMarkdown() {\n    // Use marked directly and await its result\n    renderedContent = await marked.parse(markdownContent);\n  }\n  \n  onMount(() => {\n    renderMarkdown();\n  });\n</script>\n\n{#if $courseModalOpen}\n  <div \n    class=\"fixed inset-0 z-50 overflow-y-auto\"\n    aria-labelledby=\"modal-title\"\n    role=\"dialog\" \n    aria-modal=\"true\"\n  >\n    <div class=\"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n      <!-- Background overlay -->\n      <div \n        class=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" \n        aria-hidden=\"true\"\n        on:click={closeModal}\n        on:keydown={e => e.key === 'Escape' && closeModal()}\n      ></div>\n      \n      <span class=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">​</span>\n      \n      <!-- Modal panel -->\n      <div class=\"inline-block align-bottom bg-gray-800 text-gray-100 rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full squircle border border-orange-500\">\n        <div class=\"bg-gray-800 px-6 py-4\">\n          <div class=\"flex justify-between items-center border-b border-gray-700 pb-4\">\n            <h3 class=\"text-lg font-medium text-gray-100\">\n              {$currentCourse?.title || 'Course Content'}\n            </h3>\n            <button \n              on:click={closeModal} \n              class=\"text-gray-400 hover:text-gray-200\"\n              aria-label=\"Close modal\"\n            >\n              <i class=\"fas fa-times\"></i>\n            </button>\n          </div>\n          \n          <div class=\"markdown-content py-4\">\n            {@html renderedContent}\n          </div>\n          \n          <div class=\"border-t border-gray-700 pt-4 flex justify-between\">\n            <button class=\"px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600\">\n              Previous\n            </button>\n            <button class=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700\">\n              Next Lesson\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n{/if}\n","<script lang=\"ts\">\n  const currentYear = new Date().getFullYear();\n</script>\n\n<footer class=\"bg-gray-100 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-inner py-4 mt-12\">\n  <div class=\"max-w-7xl mx-auto px-4 text-center text-sm text-gray-500 dark:text-gray-400\">\n    © {currentYear} LearnFlow. All rights reserved.\n  </div>\n</footer>","<script lang=\"ts\">\n  import { sidebarCollapsed } from '$lib/stores/sidebarStore.js';\n  let collapsed = false;\n  sidebarCollapsed.subscribe(v => collapsed = v);\n  import '../app.css';\n  import '@splidejs/splide/dist/css/splide.min.css';\n  import { onMount } from 'svelte';\n  import Sidebar from '$lib/components/Sidebar.svelte';\n  import Header from '$lib/components/Header.svelte';\n  import PipWidget from '$lib/components/PipWidget.svelte';\n  import CourseModal from '$lib/components/courses/CourseModal.svelte';\n  import Footer from '$lib/components/Footer.svelte';\n  import { pipVisible } from '$lib/stores/pipStores.js';\n  import { initAuth } from '$lib/authService.js';\n  import { isAuthenticated, user } from '$lib/stores/authStore.js';\n  import { storeCsrfToken } from '$lib/utils/csrf.client.js';\n\n  export let data;\n\n  onMount(async () => {\n    console.log('Root layout mounted - initializing authentication and CSRF protection');\n    \n    // Store CSRF token from server\n    if (data.csrfToken) {\n      storeCsrfToken(data.csrfToken);\n    }\n    \n    // Initialize Firebase authentication\n    initAuth();\n    \n    // Set up subscription to auth state for debugging\n    const unsubAuth = isAuthenticated.subscribe(value => {\n      console.log('Auth state changed in root layout:', value ? 'Authenticated' : 'Not authenticated');\n    });\n\n    const unsubUser = user.subscribe(u => {\n      if (u) console.log('User state changed in root layout:', u);\n    });\n\n    return () => {\n      unsubAuth();\n      unsubUser();\n    };\n  });\n\n  function togglePip() {\n    pipVisible.update(v => !v);\n  }\n</script>\n\n<svelte:head>\n  <meta name=\"csrf-token\" content={data.csrfToken}>\n  \n  <!-- Preload commonly used Font Awesome fonts with correct MIME type -->\n  <link \n    rel=\"preload\" \n    href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/webfonts/fa-solid-900.woff2\" \n    as=\"font\" \n    type=\"font/woff2\" \n    crossorigin=\"anonymous\"\n  />\n  <link \n    rel=\"preload\" \n    href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/webfonts/fa-regular-400.woff2\" \n    as=\"font\" \n    type=\"font/woff2\" \n    crossorigin=\"anonymous\"\n  />\n  \n  <!-- Font Awesome with font-display swap -->\n  <link \n    rel=\"stylesheet\" \n    href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\" \n    integrity=\"sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==\" \n    crossorigin=\"anonymous\" \n    referrerpolicy=\"no-referrer\"\n  />\n  \n  <!-- Inter Font with font-display swap -->\n  <link \n    rel=\"preconnect\" \n    href=\"https://fonts.googleapis.com\"\n  />\n  <link \n    rel=\"preconnect\" \n    href=\"https://fonts.gstatic.com\" \n    crossorigin=\"anonymous\"\n  />\n  <link \n    href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" \n    rel=\"stylesheet\"\n  />\n</svelte:head>\n\n<div class=\"min-h-screen flex\">\n  <Sidebar />\n  <div class={`flex-1 transition-all duration-300 ${collapsed ? 'lg:ml-0' : 'lg:ml-64'}`}>\n    <Header onTogglePip={togglePip} />\n    \n    <main>\n      <slot />\n    </main>\n    \n    <Footer />\n  </div>\n  \n  <PipWidget />\n  <CourseModal />\n</div>\n\n<style>\n  /* Basic styles to ensure things are working */\n  :global(body) {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n    margin: 0;\n    padding: 0;\n  }\n  \n  /* Improve Font Awesome rendering */\n  :global(.fas), :global(.fa), :global(.fa-solid), :global(.fa-regular), :global(.fa-brands) {\n    font-display: swap !important;\n    -webkit-font-smoothing: antialiased;\n    text-rendering: optimizeLegibility;\n  }\n  \n  :global(.card-hover) {\n    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n  }\n  \n  :global(.card-hover:hover) {\n    transform: translateY(-3px);\n    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  }\n</style>\n"],"names":["$.attr","$.store_get","$.attr_class","$.escape","$.ensure_array_like","$.fallback","$.html","$$payload"],"mappings":"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"}