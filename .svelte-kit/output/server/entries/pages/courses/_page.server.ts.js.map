{"version":3,"file":"_page.server.ts.js","sources":["../../../../../../src/routes/courses/+page.server.ts"],"sourcesContent":["import { error } from '@sveltejs/kit';\n// Updated import to use the new server-side service\nimport { getContentNodeByPath, getBreadcrumbs } from '$lib/server/contentService';\nimport type { PageServerLoad } from './$types';\n\nexport const load: PageServerLoad = async ({ url }) => {\n  const path = url.searchParams.get('path') || ''; // Default to root path if not specified\n\n  try {\n    // Use the new service function for courses\n    const node = await getContentNodeByPath('courses', path);\n\n    if (!node) {\n      // Keep SvelteKit's error helper for 404\n      error(404, `Course content not found for path: ${path || '/'}`);\n    }\n\n    // Use the new service function for breadcrumbs\n    const breadcrumbs = await getBreadcrumbs('courses', path);\n\n    // Return data structure remains similar, but sourced from the new service\n    return {\n      node, // This can be the root node structure or a specific item node\n      breadcrumbs,\n      currentPath: path\n    };\n  } catch (err: any) {\n     // Catch potential errors from getContentNodeByPath or getBreadcrumbs\n     // Including SvelteKit errors thrown by the service itself\n     if (err.status) {\n       throw err; // Re-throw SvelteKit errors (like 404 or 500 from the service)\n     }\n\n     // Log unexpected errors\n     console.error(`Unexpected error loading courses page for path \"${path}\":`, err);\n     // Throw a generic 500 for other server-side issues\n     error(500, `Failed to load course data. An unexpected error occurred.`);\n  }\n};"],"names":[],"mappings":";;AAKO,MAAM,OAAuB,OAAO,EAAE,UAAU;AACrD,QAAM,OAAO,IAAI,aAAa,IAAI,MAAM,KAAK;AAEzC,MAAA;AAEF,UAAM,OAAO,MAAM,qBAAqB,WAAW,IAAI;AAEvD,QAAI,CAAC,MAAM;AAET,YAAM,KAAK,sCAAsC,QAAQ,GAAG,EAAE;AAAA,IAAA;AAIhE,UAAM,cAAc,MAAM,eAAe,WAAW,IAAI;AAGjD,WAAA;AAAA,MACL;AAAA;AAAA,MACA;AAAA,MACA,aAAa;AAAA,IACf;AAAA,WACO,KAAU;AAGhB,QAAI,IAAI,QAAQ;AACR,YAAA;AAAA,IAAA;AAIR,YAAQ,MAAM,mDAAmD,IAAI,MAAM,GAAG;AAE9E,UAAM,KAAK,2DAA2D;AAAA,EAAA;AAE3E;"}