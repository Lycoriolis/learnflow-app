{"version":3,"file":"_page.svelte.js","sources":["../../../../../../src/lib/stores/courseStore.ts","../../../../../../src/lib/components/shared/ContentViewer.svelte","../../../../../../src/routes/courses/+page.svelte"],"sourcesContent":["import { writable, derived } from 'svelte/store';\nimport type { ContentNode } from '$lib/services/courses/courseService';\nimport { fetchCourses, fetchCourseCategories } from '$lib/services/courses/courseService';\nimport { browser } from '$app/environment';\n\n// Create stores\nexport const courseItems = writable<ContentNode[]>([]);\nexport const courseCategories = writable<any[]>([]);\nexport const selectedCourse = writable<ContentNode | null>(null);\nexport const isLoading = writable(false);\nexport const error = writable<string | null>(null);\n\n// Initialize the store data\nexport async function initCourseStore() {\n  if (!browser) return; // Don't run on server\n  \n  isLoading.set(true);\n  error.set(null);\n  \n  try {\n    const [courses, categories] = await Promise.all([\n      fetchCourses(),\n      fetchCourseCategories()\n    ]);\n    \n    courseItems.set(courses);\n    courseCategories.set(categories);\n  } catch (err) {\n    console.error('Error initializing course store:', err);\n    error.set('Failed to load courses. Please try again later.');\n  } finally {\n    isLoading.set(false);\n  }\n}\n\n// Filter courses by category\nexport function filterCoursesByCategory(categoryId: string) {\n  isLoading.set(true);\n  \n  return derived(courseItems, ($courseItems) => {\n    isLoading.set(false);\n    if (!categoryId || categoryId === 'all') {\n      return $courseItems;\n    }\n    return $courseItems.filter(course => course.category === categoryId);\n  });\n}\n\n// Select a course\nexport function selectCourse(course: ContentNode) {\n  selectedCourse.set(course);\n}\n\n// Clear selection\nexport function clearSelection() {\n  selectedCourse.set(null);\n}\n","<script lang=\"ts\">\n  import { slide } from 'svelte/transition';\n  import { onMount } from 'svelte';\n  import MarkdownRenderer from './MarkdownRenderer.svelte';\n  import ExerciseMarkdown from '../courses/exercise/ExerciseMarkdown.svelte';\n  import MathContent from './MathContent.svelte';\n  import ExerciseRating from '../courses/exercise/ExerciseRating.svelte';\n  import type { ContentNode } from '$lib/services/courses/courseService';\n  import { getAuth } from 'firebase/auth';\n  import { doc, getDoc, getFirestore, setDoc } from 'firebase/firestore';\n  import Icon from '@iconify/svelte';\n  import { navigateToCourse, navigateToExercise } from '$lib/utils/navigation';\n\n  export let item: ContentNode | null = null;\n  export let type: 'exercise' | 'course' = 'exercise';\n  export let onBack: () => void = () => {};\n\n  $: sections = item ? extractContentSections(item.content || '') : {};\n\n  let isCompleted = false;\n  let isInProgress = false;\n  let lastAttemptDate: Date | null = null;\n  let userNotes = '';\n  let showNotes = false;\n  let notesAreEditable = false;\n\n  $: hasSolution = !!sections.solution;\n  $: hasContent = !!sections.content || !!sections.main;\n  $: showSolution = false;\n  let solutionRevealProgress = 0;\n  let solutionBlurLevel = 5;\n  let checkedHints: string[] = [];\n  let hintsArray: string[] = [];\n\n  let startTime: Date | null = null;\n  let timeSpent = 0;\n  let timerInterval: number | null = null;\n\n  onMount(() => {\n    let cleanupFunction = () => {};\n    (async () => {\n      if (item && type === 'exercise') {\n        startTime = new Date();\n        timerInterval = window.setInterval(updateTimeSpent, 1000);\n        await loadUserProgress();\n      }\n    })();\n\n    cleanupFunction = () => {\n      if (timerInterval) {\n        clearInterval(timerInterval);\n      }\n    };\n    return cleanupFunction;\n  });\n\n  async function loadUserProgress() {\n    if (!item) return;\n\n    const auth = getAuth();\n    if (!auth.currentUser) return;\n\n    try {\n      const db = getFirestore();\n      const userProgressRef = doc(db, 'users', auth.currentUser.uid, 'progress', type === 'exercise' ? 'exercises' : 'courses');\n\n      const userProgressDoc = await getDoc(userProgressRef);\n      if (userProgressDoc.exists()) {\n        const data = userProgressDoc.data();\n\n        if (data.completed && data.completed[item.id]) {\n          isCompleted = true;\n        } else if (data.inProgress && data.inProgress[item.id]) {\n          isInProgress = true;\n        }\n      }\n\n      const itemDetailRef = doc(db, 'users', auth.currentUser.uid, type === 'exercise' ? 'exercises' : 'courses', item.id);\n      const itemDetailDoc = await getDoc(itemDetailRef);\n\n      if (itemDetailDoc.exists()) {\n        const data = itemDetailDoc.data();\n        userNotes = data.notes || '';\n        lastAttemptDate = data.lastAttemptDate?.toDate() || null;\n        checkedHints = data.checkedHints || [];\n      }\n    } catch (err) {\n      console.error('Error loading user progress:', err);\n    }\n  }\n\n  async function saveUserProgress(status: 'completed' | 'inProgress' | 'reset') {\n    if (!item) return;\n\n    const auth = getAuth();\n    if (!auth.currentUser) return;\n\n    try {\n      const db = getFirestore();\n      const userProgressRef = doc(db, 'users', auth.currentUser.uid, 'progress', type === 'exercise' ? 'exercises' : 'courses');\n\n      if (status === 'completed') {\n        await setDoc(userProgressRef, {\n          completed: { [item.id]: true },\n          inProgress: { [item.id]: false }\n        }, { merge: true });\n\n        isCompleted = true;\n        isInProgress = false;\n      } else if (status === 'inProgress') {\n        await setDoc(userProgressRef, {\n          inProgress: { [item.id]: true },\n          completed: { [item.id]: false }\n        }, { merge: true });\n\n        isInProgress = true;\n        isCompleted = false;\n      } else {\n        await setDoc(userProgressRef, {\n          inProgress: { [item.id]: false },\n          completed: { [item.id]: false }\n        }, { merge: true });\n\n        isInProgress = false;\n        isCompleted = false;\n      }\n\n      const itemDetailRef = doc(db, 'users', auth.currentUser.uid, type === 'exercise' ? 'exercises' : 'courses', item.id);\n      await setDoc(itemDetailRef, {\n        timeSpent: timeSpent + (getTimeSpentSoFar() || 0),\n        lastAttemptDate: new Date(),\n        notes: userNotes,\n        checkedHints: checkedHints\n      }, { merge: true });\n\n    } catch (err) {\n      console.error('Error saving progress:', err);\n    }\n  }\n\n  function getTimeSpentSoFar(): number | null {\n    if (!startTime) return null;\n    return Math.floor((new Date().getTime() - startTime.getTime()) / 1000);\n  }\n\n  function updateTimeSpent() {\n    if (startTime) {\n      timeSpent = Math.floor((new Date().getTime() - startTime.getTime()) / 1000);\n    }\n  }\n\n  function formatTimeSpent(seconds: number): string {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n\n    if (hours > 0) {\n      return `${hours}h ${minutes}m ${secs}s`;\n    } else if (minutes > 0) {\n      return `${minutes}m ${secs}s`;\n    } else {\n      return `${secs}s`;\n    }\n  }\n\n  function extractContentSections(content: string): Record<string, string> {\n    const result: Record<string, string> = {\n      main: content\n    };\n\n    const sectionMatches = content.matchAll(/^##\\s+([A-Za-z\\s]+)\\s*$([\\s\\S]*?)(?=^##\\s+[A-Za-z\\s]+\\s*$|$)/gm);\n\n    for (const match of sectionMatches) {\n      if (match[1] && match[2]) {\n        const sectionName = match[1].trim().toLowerCase();\n        const sectionContent = match[2].trim();\n        result[sectionName] = sectionContent;\n      }\n    }\n\n    const hintsSection = result.hints || '';\n    if (hintsSection) {\n      const hints = hintsSection.split(/\\n?(?:^###\\s+Hint \\d+\\s*$|^\\*\\s+)/gm).map(h => h.trim()).filter(Boolean);\n      if (hints.length > 0) {\n        hintsArray = hints;\n      }\n    }\n\n    if (type === 'exercise') {\n      if (Object.keys(result).length > 1) {\n        delete result.main;\n      }\n\n      if (result.problem) {\n        result.content = result.problem;\n        delete result.problem;\n      }\n    }\n\n    return result;\n  }\n\n  function handleToggleSolution() {\n    if (!showSolution) {\n      solutionRevealProgress = 0;\n      const interval = setInterval(() => {\n        solutionRevealProgress += 5;\n        if (solutionRevealProgress >= 100) {\n          clearInterval(interval);\n          showSolution = true;\n        }\n      }, 100);\n    } else {\n      showSolution = false;\n      solutionRevealProgress = 0;\n    }\n  }\n\n  function handleToggleNotes() {\n    showNotes = !showNotes;\n    notesAreEditable = showNotes && notesAreEditable;\n  }\n\n  function handleEditNotes() {\n    notesAreEditable = true;\n  }\n\n  function handleSaveNotes() {\n    notesAreEditable = false;\n    if (item) {\n      saveUserProgress(isCompleted ? 'completed' : 'inProgress');\n    }\n  }\n\n  function handleMarkComplete() {\n    if (!isCompleted) {\n      saveUserProgress('completed');\n    } else {\n      saveUserProgress('reset');\n    }\n  }\n\n  function toggleHint(index: number) {\n    const hintId = `hint-${index}`;\n\n    if (checkedHints.includes(hintId)) {\n      checkedHints = checkedHints.filter((h: string) => h !== hintId);\n    } else {\n      checkedHints = [...checkedHints, hintId];\n    }\n\n    if (item) {\n      saveUserProgress(isCompleted ? 'completed' : 'inProgress');\n    }\n  }\n\n  function handleViewDetails() {\n    if (!item) return;\n    \n    if (type === 'exercise' && item.id) {\n      navigateToExercise(item.id);\n    } else if (type === 'course' && item.id) {\n      navigateToCourse(item.id);\n    }\n  }\n</script>\n\n<div class=\"content-viewer bg-surface dark:bg-surface-dark text-text dark:text-text-light p-4 sm:p-6 lg:p-8 rounded-squircle shadow-card flex flex-col h-full overflow-hidden\" transition:slide>\n  {#if item}\n    <div class=\"flex-shrink-0 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700\">\n      <div class=\"flex items-center justify-between\">\n        <h2 class=\"text-xl sm:text-2xl font-jakarta font-semibold text-text dark:text-text-light truncate pr-4\">\n          {item.title}\n        </h2>\n        <div class=\"flex items-center space-x-2\">\n          <button\n            on:click={handleViewDetails}\n            class=\"text-cherry-600 hover:text-cherry-700 dark:hover:text-cherry-400 transition-colors p-1 rounded-full\"\n            aria-label=\"View full details\"\n          >\n            <Icon icon=\"mdi:open-in-new\" class=\"w-5 h-5\" />\n          </button>\n          <button\n            on:click={onBack}\n            class=\"text-gray-400 hover:text-cherry-600 dark:hover:text-cherry-400 transition-colors p-1 rounded-full -mr-1\"\n            aria-label=\"Close viewer\"\n          >\n            <Icon icon=\"mdi:close\" class=\"w-6 h-6\" />\n          </button>\n        </div>\n      </div>\n      {#if item.category}\n        <span class=\"text-sm font-medium text-cherry-700 dark:text-cherry-500 bg-cherry-100 dark:bg-cherry-900/30 px-2.5 py-0.5 rounded-full mt-2 inline-block\">\n          {item.category}\n        </span>\n      {/if}\n      {#if item.tags && item.tags.length > 0}\n        <div class=\"mt-3 flex flex-wrap gap-2\">\n          {#each item.tags as tag}\n            <span class=\"text-xs font-medium text-secondary-700 dark:text-secondary-300 bg-secondary-100 dark:bg-secondary-900/30 px-2 py-0.5 rounded-full\">\n              {tag}\n            </span>\n          {/each}\n        </div>\n      {/if}\n    </div>\n\n    <div class=\"flex-grow overflow-y-auto prose dark:prose-invert prose-cherry lg:prose-lg scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent pr-2 -mr-2\">\n      {#if type === 'exercise'}\n        <ExerciseMarkdown markdown={sections.content || sections.main} />\n        \n        {#if hintsArray && hintsArray.length > 0}\n          <div class=\"mt-6 border-t border-gray-200 dark:border-gray-700 pt-4\">\n            <h3 class=\"text-lg font-semibold mb-3\">Hints</h3>\n            <div class=\"space-y-3\">\n              {#each hintsArray as hint, i}\n                <div class=\"hint-container\">\n                  <button \n                    class=\"flex items-center justify-between w-full p-3 text-left border rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\"\n                    on:click={() => toggleHint(i)}\n                  >\n                    <span class=\"font-medium\">Hint {i + 1}</span>\n                    <Icon icon={checkedHints.includes(`hint-${i}`) ? \"mdi:chevron-up\" : \"mdi:chevron-down\"} class=\"w-5 h-5\" />\n                  </button>\n                  \n                  {#if checkedHints.includes(`hint-${i}`)}\n                    <div class=\"p-3 bg-gray-50 dark:bg-gray-800 rounded-md mt-1\" transition:slide>\n                      <MarkdownRenderer content={hint} />\n                    </div>\n                  {/if}\n                </div>\n              {/each}\n            </div>\n          </div>\n        {/if}\n        \n        {#if hasSolution}\n          <div class=\"mt-6 border-t border-gray-200 dark:border-gray-700 pt-4\">\n            <div class=\"flex justify-between items-center mb-3\">\n              <h3 class=\"text-lg font-semibold\">Solution</h3>\n              <button \n                on:click={handleToggleSolution}\n                class=\"px-3 py-1.5 text-sm font-medium rounded-md bg-cherry-100 dark:bg-cherry-900/30 text-cherry-700 dark:text-cherry-400 hover:bg-cherry-200 dark:hover:bg-cherry-800/50 transition-colors\"\n              >\n                {showSolution ? 'Hide Solution' : 'Show Solution'}\n              </button>\n            </div>\n            \n            {#if solutionRevealProgress > 0 && !showSolution}\n              <div class=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mb-4\">\n                <div class=\"bg-cherry-600 dark:bg-cherry-500 h-2.5 rounded-full\" style=\"width: {solutionRevealProgress}%\"></div>\n              </div>\n            {/if}\n            \n            {#if showSolution}\n              <div transition:slide>\n                <MarkdownRenderer content={sections.solution} />\n              </div>\n            {:else if solutionRevealProgress > 0}\n              <div class=\"p-4 border border-gray-200 dark:border-gray-700 rounded-md\" style=\"filter: blur({solutionBlurLevel - (solutionBlurLevel * solutionRevealProgress / 100)}px);\">\n                <MarkdownRenderer content={sections.solution} />\n              </div>\n            {/if}\n          </div>\n        {/if}\n      {:else if type === 'course'}\n        <MarkdownRenderer content={sections.content || sections.main} />\n      {:else}\n        <MarkdownRenderer content={sections.content || sections.main} />\n      {/if}\n    </div>\n\n    <div class=\"flex-shrink-0 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n      <div class=\"flex justify-between items-center mb-2\">\n        <button \n          on:click={handleToggleNotes}\n          class=\"flex items-center text-sm font-medium text-cherry-600 dark:text-cherry-400 hover:text-cherry-700 dark:hover:text-cherry-300\"\n        >\n          <Icon icon=\"mdi:note-text-outline\" class=\"w-5 h-5 mr-1\" />\n          {showNotes ? 'Hide Notes' : 'Show Notes'}\n        </button>\n        \n        <div class=\"flex items-center space-x-2\">\n          <button \n            on:click={handleMarkComplete}\n            class=\"px-3 py-1.5 text-sm font-medium rounded-md {isCompleted ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400' : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300'} hover:opacity-90 transition-colors\"\n          >\n            {isCompleted ? 'Completed' : 'Mark Complete'}\n          </button>\n          \n          {#if lastAttemptDate}\n            <span class=\"text-xs text-gray-500 dark:text-gray-400\">\n              Last attempt: {lastAttemptDate.toLocaleDateString()}\n            </span>\n          {/if}\n          \n          {#if startTime}\n            <span class=\"text-xs text-gray-500 dark:text-gray-400\">\n              Time: {formatTimeSpent(timeSpent)}\n            </span>\n          {/if}\n        </div>\n      </div>\n      \n      {#if showNotes}\n        <div transition:slide>\n          {#if notesAreEditable}\n            <div class=\"mt-2\">\n              <textarea\n                bind:value={userNotes}\n                class=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-surface dark:bg-surface-dark text-text dark:text-text-light focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400 min-h-[100px]\"\n                placeholder=\"Add your notes here...\"\n              ></textarea>\n              <div class=\"flex justify-end mt-2\">\n                <button \n                  on:click={handleSaveNotes}\n                  class=\"px-3 py-1.5 text-sm font-medium rounded-md bg-cherry-600 text-white hover:bg-cherry-700 dark:bg-cherry-500 dark:hover:bg-cherry-600 transition-colors\"\n                >\n                  Save Notes\n                </button>\n              </div>\n            </div>\n          {:else}\n            <div class=\"mt-2 p-3 border border-gray-200 dark:border-gray-700 rounded-md min-h-[50px] bg-gray-50 dark:bg-gray-800\">\n              {#if userNotes}\n                <MarkdownRenderer content={userNotes} />\n              {:else}\n                <p class=\"text-gray-500 dark:text-gray-400 italic\">No notes yet. Click \"Edit\" to add notes.</p>\n              {/if}\n              <div class=\"flex justify-end mt-2\">\n                <button \n                  on:click={handleEditNotes}\n                  class=\"px-3 py-1.5 text-sm font-medium rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\"\n                >\n                  Edit\n                </button>\n              </div>\n            </div>\n          {/if}\n        </div>\n      {/if}\n    </div>\n\n    {#if type === 'exercise'}\n      <div class=\"flex-shrink-0 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n        <ExerciseRating exerciseId={item.id} />\n      </div>\n    {/if}\n  {:else}\n    <div class=\"flex flex-col items-center justify-center h-full text-center text-text-secondary dark:text-text-secondary-light\">\n      <Icon icon=\"mdi:information-outline\" class=\"w-12 h-12 mb-4 text-gray-400 dark:text-gray-500\" />\n      <p class=\"text-lg font-medium\">Select an item</p>\n      <p class=\"text-sm\">Choose an exercise or course from the list to view its details here.</p>\n    </div>\n  {/if}\n</div>","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { courseItems, courseCategories, selectedCourse, isLoading, error, initCourseStore } from '$lib/stores/courseStore';\n  import CourseCard from '$lib/components/courses/CourseCard.svelte';\n  import ContentViewer from '$lib/components/shared/ContentViewer.svelte';\n  import Icon from '@iconify/svelte';\n  \n  let selectedCategoryId = 'all';\n  let searchQuery = '';\n  let filteredCourses: typeof $courseItems = [];\n  \n  $: {\n    // Filter courses based on category and search query\n    filteredCourses = $courseItems.filter(course => {\n      const matchesCategory = selectedCategoryId === 'all' || course.category === selectedCategoryId;\n      const matchesSearch = !searchQuery || \n        course.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        (course.description && course.description.toLowerCase().includes(searchQuery.toLowerCase()));\n      \n      return matchesCategory && matchesSearch;\n    });\n  }\n  \n  function handleSelectCourse(event: CustomEvent<{course: any}>) {\n    selectedCourse.set(event.detail.course);\n  }\n  \n  function handleResetSelection() {\n    selectedCourse.set(null);\n  }\n  \n  onMount(() => {\n    initCourseStore();\n  });\n</script>\n\n<div class=\"container mx-auto px-4 py-8\">\n  <div class=\"flex items-center justify-between mb-6\">\n    <h1 class=\"text-2xl font-bold text-gray-900 dark:text-white\">Courses</h1>\n    \n    <div class=\"flex space-x-2\">\n      <div class=\"relative\">\n        <input\n          type=\"text\"\n          bind:value={searchQuery}\n          placeholder=\"Search courses...\"\n          class=\"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400\"\n        />\n        <Icon icon=\"mdi:magnify\" class=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n      </div>\n      \n      <select\n        bind:value={selectedCategoryId}\n        class=\"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-cherry-500 focus:border-cherry-500 dark:focus:ring-cherry-400 dark:focus:border-cherry-400\"\n      >\n        <option value=\"all\">All Categories</option>\n        {#each $courseCategories as category}\n          <option value={category.id}>{category.name}</option>\n        {/each}\n      </select>\n    </div>\n  </div>\n  \n  {#if $isLoading}\n    <div class=\"flex justify-center items-center py-12\">\n      <div class=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cherry-500\"></div>\n    </div>\n  {:else if $error}\n    <div class=\"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-4 rounded-md\">\n      <p>{$error}</p>\n    </div>\n  {:else}\n    <div class=\"grid grid-cols-1 gap-6 md:grid-cols-3 lg:grid-cols-4\">\n      <div class=\"md:col-span-2 lg:col-span-3\">\n        {#if filteredCourses.length === 0}\n          <div class=\"flex flex-col items-center justify-center py-12 text-center\">\n            <Icon icon=\"mdi:book-open-page-variant\" class=\"w-16 h-16 text-gray-400 mb-4\" />\n            <h3 class=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">No courses found</h3>\n            <p class=\"text-gray-600 dark:text-gray-400\">Try adjusting your filters or search query.</p>\n          </div>\n        {:else}\n          <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {#each filteredCourses as course}\n              <CourseCard \n                {course} \n                isSelected={$selectedCourse?.id === course.id}\n                on:select={handleSelectCourse}\n              />\n            {/each}\n          </div>\n        {/if}\n      </div>\n      \n      <div class=\"md:col-span-1 sticky top-4\">\n        <ContentViewer \n          item={$selectedCourse} \n          type=\"course\" \n          onBack={handleResetSelection}\n        />\n      </div>\n    </div>\n  {/if}\n</div>"],"names":["$.fallback","$.escape","$.ensure_array_like","$.store_get","$.attr"],"mappings":"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"}