{"version":3,"file":"_page.server.ts.js","sources":["../../../../../../src/routes/exercises/+page.server.ts"],"sourcesContent":["import type { PageServerLoad } from './$types';\nimport { error } from '@sveltejs/kit';\n// Use the unified content service\nimport { getContentListByCategory, getBreadcrumbs } from '$lib/server/contentService';\n\nexport const load: PageServerLoad = async ({ url }) => {\n  // Use an empty string for the root category identifier\n  const categoryIdentifier = url.searchParams.get('category') || '';\n\n  try {\n    // Fetch the list of items (top-level categories/exercises or children of a category)\n    const items = await getContentListByCategory('exercises', categoryIdentifier);\n\n    // Fetch breadcrumbs for the current category view\n    const breadcrumbs = await getBreadcrumbs('exercises', categoryIdentifier);\n\n    return {\n      items, // Renamed from exercises to items for consistency\n      breadcrumbs,\n      currentCategory: categoryIdentifier\n    };\n  } catch (err: any) {\n    // Re-throw SvelteKit errors (like 404/500 from the service)\n    if (err.status) {\n      throw err;\n    }\n\n    // Log unexpected errors and throw a generic 500\n    console.error(`Error loading exercises page for category \"${categoryIdentifier}\":`, err);\n    error(500, `Failed to load exercises data. An unexpected error occurred.`);\n  }\n};"],"names":[],"mappings":";;AAKO,MAAM,OAAuB,OAAO,EAAE,UAAU;AAErD,QAAM,qBAAqB,IAAI,aAAa,IAAI,UAAU,KAAK;AAE3D,MAAA;AAEF,UAAM,QAAQ,MAAM,yBAAyB,aAAa,kBAAkB;AAG5E,UAAM,cAAc,MAAM,eAAe,aAAa,kBAAkB;AAEjE,WAAA;AAAA,MACL;AAAA;AAAA,MACA;AAAA,MACA,iBAAiB;AAAA,IACnB;AAAA,WACO,KAAU;AAEjB,QAAI,IAAI,QAAQ;AACR,YAAA;AAAA,IAAA;AAIR,YAAQ,MAAM,8CAA8C,kBAAkB,MAAM,GAAG;AACvF,UAAM,KAAK,8DAA8D;AAAA,EAAA;AAE7E;"}