{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../src/routes/tools/dictionary/+page.svelte"],"sourcesContent":["<!-- filepath: /home/linux/learnflow-app/learnflow-app/src/routes/tools/dictionary/+page.svelte -->\n<script lang=\"ts\">\n  import { persistentStore } from '$lib/stores/persistentStore';\n\n  interface DictionaryEntry {\n    word: string;\n    timestamp: number;\n  }\n\n  const searchHistory = persistentStore<DictionaryEntry[]>('learnflow-dictionary-history', []);\n  let searchTerm = '';\n  let searching = false;\n  let result: any = null;\n  let error: string | null = null;\n  let audioUrl: string | null = null;\n  let synonyms: string[] = [];\n  let antonyms: string[] = [];\n\n  async function searchWord(term: string) {\n    if (!term.trim()) return;\n    \n    searching = true;\n    error = null;\n    result = null;\n    audioUrl = null;\n    synonyms = [];\n    antonyms = [];\n    \n    try {\n      // Dictionary lookup\n      const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(term)}`);\n      if (!response.ok) throw new Error('Word not found');\n      const data = await response.json();\n      result = data[0];\n      \n      // Get audio URL if available\n      const phonetics = result.phonetics || [];\n      for (const phonetic of phonetics) {\n        if (phonetic.audio) {\n          audioUrl = phonetic.audio;\n          break;\n        }\n      }\n      \n      // Add to search history\n      searchHistory.update(history => {\n        const newHistory = [\n          { word: term, timestamp: Date.now() },\n          ...history.filter(entry => entry.word !== term)\n        ].slice(0, 10); // Keep only last 10 searches\n        return newHistory;\n      });\n      \n      // Try to get synonyms and antonyms\n      try {\n        const thesaurusResponse = await fetch(`https://api.datamuse.com/words?rel_syn=${encodeURIComponent(term)}`);\n        const synData = await thesaurusResponse.json();\n        synonyms = synData.slice(0, 5).map(s => s.word);\n        \n        const antonymResponse = await fetch(`https://api.datamuse.com/words?rel_ant=${encodeURIComponent(term)}`);\n        const antData = await antonymResponse.json();\n        antonyms = antData.slice(0, 5).map(a => a.word);\n      } catch (e) {\n        console.error('Error fetching synonyms/antonyms:', e);\n      }\n      \n    } catch (e: any) {\n      error = e.message;\n    } finally {\n      searching = false;\n    }\n  }\n\n  function playAudio() {\n    if (audioUrl) {\n      new Audio(audioUrl).play();\n    }\n  }\n\n  function handleSubmit() {\n    if (searchTerm.trim()) {\n      searchWord(searchTerm);\n    }\n  }\n\n  function formatDate(timestamp: number): string {\n    return new Date(timestamp).toLocaleString();\n  }\n\n  // Handle keyboard shortcuts\n  function handleKeydown(event: KeyboardEvent) {\n    // Ctrl/Cmd + / to focus search\n    if ((event.ctrlKey || event.metaKey) && event.key === '/') {\n      event.preventDefault();\n      const searchInput = document.querySelector<HTMLInputElement>('#word-search');\n      if (searchInput) {\n        searchInput.focus();\n      }\n    }\n  }\n\n  onMount(() => {\n    window.addEventListener('keydown', handleKeydown);\n    return () => {\n      window.removeEventListener('keydown', handleKeydown);\n    };\n  });\n</script>\n\n<svelte:head>\n  <title>Dictionary & Reference | LearnFlow</title>\n</svelte:head>\n\n<div class=\"max-w-4xl mx-auto px-4 py-10\">\n  <div class=\"flex justify-between items-start mb-8\">\n    <div>\n      <h1 class=\"text-3xl font-bold text-gray-900 dark:text-white mb-2 flex items-center\">\n        <i class=\"fas fa-book mr-3 text-cyan-500\"></i> Dictionary & Reference\n      </h1>\n      <p class=\"text-gray-600 dark:text-gray-400\">Look up definitions, pronunciations, and related words</p>\n    </div>\n  </div>\n\n  <div class=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\n    <!-- Main Search and Results -->\n    <div class=\"lg:col-span-3\">\n      <div class=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg mb-6\">\n        <form on:submit|preventDefault={handleSubmit}>\n          <div class=\"flex gap-2\">\n            <div class=\"flex-1 relative\">\n              <input\n                id=\"word-search\"\n                type=\"text\"\n                bind:value={searchTerm}\n                placeholder=\"Enter a word to look up...\"\n                class=\"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500\"\n              >\n              <div class=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none\">\n                <kbd class=\"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600\">Ctrl</kbd>\n                <span class=\"mx-1\">+</span>\n                <kbd class=\"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600\">/</kbd>\n              </div>\n            </div>\n            <button\n              type=\"submit\"\n              class=\"px-6 py-3 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition flex items-center disabled:opacity-50\"\n              disabled={searching || !searchTerm.trim()}\n            >\n              {#if searching}\n                <i class=\"fas fa-spinner fa-spin mr-2\"></i> Searching...\n              {:else}\n                <i class=\"fas fa-search mr-2\"></i> Search\n              {/if}\n            </button>\n          </div>\n        </form>\n      </div>\n\n      {#if error}\n        <div class=\"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg text-center\">\n          <i class=\"fas fa-exclamation-circle text-3xl text-red-500 mb-4\"></i>\n          <h3 class=\"text-xl font-bold text-gray-900 dark:text-white mb-2\">Word Not Found</h3>\n          <p class=\"text-gray-600 dark:text-gray-400\">{error}</p>\n        </div>\n      {:else if result}\n        <div class=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg\">\n          <div class=\"flex items-baseline gap-4 mb-6\">\n            <h2 class=\"text-3xl font-bold text-gray-900 dark:text-white\">{result.word}</h2>\n            {#if result.phonetic}\n              <div class=\"flex items-center gap-2\">\n                <span class=\"text-lg text-gray-500 dark:text-gray-400\">{result.phonetic}</span>\n                {#if audioUrl}\n                  <button\n                    on:click={playAudio}\n                    class=\"p-2 text-cyan-600 hover:text-cyan-700 transition\"\n                    title=\"Listen to pronunciation\"\n                  >\n                    <i class=\"fas fa-volume-up\"></i>\n                  </button>\n                {/if}\n              </div>\n            {/if}\n          </div>\n\n          {#if result.meanings?.length > 0}\n            <div class=\"space-y-6\">\n              {#each result.meanings as meaning}\n                <div>\n                  <h3 class=\"text-lg font-semibold text-cyan-600 dark:text-cyan-400 mb-3\">\n                    {meaning.partOfSpeech}\n                  </h3>\n                  <ul class=\"space-y-4\">\n                    {#each meaning.definitions as def, i}\n                      <li>\n                        <div class=\"flex gap-2\">\n                          <span class=\"text-gray-400 shrink-0\">{i + 1}.</span>\n                          <div>\n                            <p class=\"text-gray-900 dark:text-gray-100\">{def.definition}</p>\n                            {#if def.example}\n                              <p class=\"text-gray-600 dark:text-gray-400 italic mt-1\">\"{def.example}\"</p>\n                            {/if}\n                          </div>\n                        </div>\n                      </li>\n                    {/each}\n                  </ul>\n                </div>\n              {/each}\n            </div>\n          {/if}\n\n          {#if synonyms.length > 0 || antonyms.length > 0}\n            <div class=\"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700\">\n              {#if synonyms.length > 0}\n                <div class=\"mb-4\">\n                  <h3 class=\"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2\">Synonyms</h3>\n                  <div class=\"flex flex-wrap gap-2\">\n                    {#each synonyms as syn}\n                      <button\n                        class=\"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-full text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition\"\n                        on:click={() => {\n                          searchTerm = syn;\n                          searchWord(syn);\n                        }}\n                      >\n                        {syn}\n                      </button>\n                    {/each}\n                  </div>\n                </div>\n              {/if}\n\n              {#if antonyms.length > 0}\n                <div>\n                  <h3 class=\"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2\">Antonyms</h3>\n                  <div class=\"flex flex-wrap gap-2\">\n                    {#each antonyms as ant}\n                      <button\n                        class=\"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-full text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition\"\n                        on:click={() => {\n                          searchTerm = ant;\n                          searchWord(ant);\n                        }}\n                      >\n                        {ant}\n                      </button>\n                    {/each}\n                  </div>\n                </div>\n              {/if}\n            </div>\n          {/if}\n        </div>\n      {:else}\n        <div class=\"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg text-center\">\n          <i class=\"fas fa-search text-4xl text-gray-400 dark:text-gray-600 mb-4\"></i>\n          <h3 class=\"text-xl font-bold text-gray-900 dark:text-white mb-2\">Ready to Look Up Words</h3>\n          <p class=\"text-gray-600 dark:text-gray-400\">Enter a word in the search box above to get started</p>\n        </div>\n      {/if}\n    </div>\n\n    <!-- Search History Sidebar -->\n    <div class=\"lg:col-span-1\">\n      <div class=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg sticky top-4\">\n        <h3 class=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Recent Searches</h3>\n        {#if $searchHistory.length === 0}\n          <p class=\"text-gray-500 dark:text-gray-400 text-sm\">No recent searches</p>\n        {:else}\n          <div class=\"space-y-3\">\n            {#each $searchHistory as entry}\n              <button\n                class=\"w-full text-left p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition group\"\n                on:click={() => {\n                  searchTerm = entry.word;\n                  searchWord(entry.word);\n                }}\n              >\n                <div class=\"text-gray-900 dark:text-gray-100 font-medium group-hover:text-cyan-600 dark:group-hover:text-cyan-400\">\n                  {entry.word}\n                </div>\n                <div class=\"text-xs text-gray-500 dark:text-gray-400\">\n                  {formatDate(entry.timestamp)}\n                </div>\n              </button>\n            {/each}\n          </div>\n        {/if}\n      </div>\n    </div>\n  </div>\n</div>"],"names":["$.attr","$.store_get","$.escape"],"mappings":";;;;;QASQ,gBAAgB,gBAAmC,gCAA8B,EAAA;AACnF,MAAA,aAAa;WA2ER,WAAW,WAA2B;eAClC,KAAK,SAAS,EAAE,eAAc;AAAA,EAC3C;WAGS,cAAc,OAAsB;AAEtC,SAAA,MAAM,WAAW,MAAM,YAAY,MAAM,QAAQ,KAAK;AACzD,YAAM,eAAc;AACd,YAAA,cAAc,SAAS,cAAgC,cAAc;AACvE,UAAA,aAAa;AACf,oBAAY,MAAK;AAAA,MACnB;AAAA,IACF;AAAA,EACF;AAEA,UAAc,MAAA;AACZ,WAAO,iBAAiB,WAAW,aAAa;AACnC,WAAA,MAAA;AACX,aAAO,oBAAoB,WAAW,aAAa;AAAA,IACpD;AAAA,GACF;;;;AA2ByB,YAAA,OAAA,4mBAAAA,KAAA,SAAA,UAAU,CAad,2sBAAAA,KAAA,YAAc,CAAA,WAAW,KAAI,GAAA,IAAA,CAAA;;;;;;;;;;;AAwHzB,MAAAC,UAAA,iBAAA,CAAA,GAAA,kBAAA,aAAA,EAAA,WAAW,GAAC;;;;;;;;UAIH,QAAK,aAAA,SAAA;AASvB,gBAAA,OAAA,6NAAAC,YAAA,MAAM,IAAI,CAAA,gEAAAA,YAGV,WAAW,MAAM,SAAS,CAAA,CAAA;AAAA;;;;;;;"}