{"version":3,"file":"_server.ts.js","sources":["../../../../../../../../src/routes/api/forum/posts/+server.ts"],"sourcesContent":["import type { RequestHandler } from '@sveltejs/kit';\nimport { getPostsByTopicId, createPost, updatePost, deletePost } from '$lib/services/forums/forumService';\n\n// Placeholder for posts API route\n\nexport const GET: RequestHandler = async ({ url }) => {\n  const topicId = url.searchParams.get('topic_id');\n  \n  if (!topicId) {\n    return new Response('Topic ID is required', { status: 400 });\n  }\n\n  try {\n    const posts = await getPostsByTopicId(topicId);\n    return new Response(JSON.stringify(posts), { status: 200 });\n  } catch (error) {\n    console.error('Error fetching posts:', error);\n    return new Response('Failed to fetch posts', { status: 500 });\n  }\n};\n\nexport const POST: RequestHandler = async ({ request }) => {\n  const { topic_id, author_id, content } = await request.json();\n\n  if (!topic_id || !author_id || !content) {\n    return new Response('Missing required fields', { status: 400 });\n  }\n\n  try {\n    const post = await createPost({ topic_id, author_id, content });\n    return new Response(JSON.stringify(post), { status: 201 });\n  } catch (error) {\n    console.error('Error creating post:', error);\n    return new Response('Failed to create post', { status: 500 });\n  }\n};\n\nexport const PUT: RequestHandler = async ({ request }) => {\n  const { id, content } = await request.json();\n\n  if (!id || !content) {\n    return new Response('Missing required fields', { status: 400 });\n  }\n\n  try {\n    const post = await updatePost(id, content);\n    if (post === null) {\n      return new Response('Post not found', { status: 404 });\n    }\n    return new Response(JSON.stringify(post), { status: 200 });\n  } catch (error) {\n    console.error('Error updating post:', error);\n    return new Response('Failed to update post', { status: 500 });\n  }\n};\n\nexport const DELETE: RequestHandler = async ({ url }) => {\n  const id = url.searchParams.get('id');\n\n  if (!id) {\n    return new Response('Post ID is required', { status: 400 });\n  }\n\n  try {\n    const result = await deletePost(id);\n    if (result === false) {\n      return new Response('Post not found', { status: 404 });\n    }\n    return new Response(JSON.stringify({ success: true }), { status: 200 });\n  } catch (error) {\n    console.error('Error deleting post:', error);\n    return new Response('Failed to delete post', { status: 500 });\n  }\n};"],"names":[],"mappings":";AAKO,MAAM,MAAsB,OAAO,EAAE,UAAU;AACpD,QAAM,UAAU,IAAI,aAAa,IAAI,UAAU;AAE/C,MAAI,CAAC,SAAS;AACZ,WAAO,IAAI,SAAS,wBAAwB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAGzD,MAAA;AACI,UAAA,QAAQ,MAAM,kBAAkB,OAAO;AACtC,WAAA,IAAI,SAAS,KAAK,UAAU,KAAK,GAAG,EAAE,QAAQ,KAAK;AAAA,WACnD,OAAO;AACN,YAAA,MAAM,yBAAyB,KAAK;AAC5C,WAAO,IAAI,SAAS,yBAAyB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAEhE;AAEO,MAAM,OAAuB,OAAO,EAAE,cAAc;AACzD,QAAM,EAAE,UAAU,WAAW,YAAY,MAAM,QAAQ,KAAK;AAE5D,MAAI,CAAC,YAAY,CAAC,aAAa,CAAC,SAAS;AACvC,WAAO,IAAI,SAAS,2BAA2B,EAAE,QAAQ,KAAK;AAAA,EAAA;AAG5D,MAAA;AACF,UAAM,OAAO,MAAM,WAAW,EAAE,UAAU,WAAW,SAAS;AACvD,WAAA,IAAI,SAAS,KAAK,UAAU,IAAI,GAAG,EAAE,QAAQ,KAAK;AAAA,WAClD,OAAO;AACN,YAAA,MAAM,wBAAwB,KAAK;AAC3C,WAAO,IAAI,SAAS,yBAAyB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAEhE;AAEO,MAAM,MAAsB,OAAO,EAAE,cAAc;AACxD,QAAM,EAAE,IAAI,QAAY,IAAA,MAAM,QAAQ,KAAK;AAEvC,MAAA,CAAC,MAAM,CAAC,SAAS;AACnB,WAAO,IAAI,SAAS,2BAA2B,EAAE,QAAQ,KAAK;AAAA,EAAA;AAG5D,MAAA;AACF,UAAM,OAAO,MAAM,WAAW,IAAI,OAAO;AACzC,QAAI,SAAS,MAAM;AACjB,aAAO,IAAI,SAAS,kBAAkB,EAAE,QAAQ,KAAK;AAAA,IAAA;AAEhD,WAAA,IAAI,SAAS,KAAK,UAAU,IAAI,GAAG,EAAE,QAAQ,KAAK;AAAA,WAClD,OAAO;AACN,YAAA,MAAM,wBAAwB,KAAK;AAC3C,WAAO,IAAI,SAAS,yBAAyB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAEhE;AAEO,MAAM,SAAyB,OAAO,EAAE,UAAU;AACvD,QAAM,KAAK,IAAI,aAAa,IAAI,IAAI;AAEpC,MAAI,CAAC,IAAI;AACP,WAAO,IAAI,SAAS,uBAAuB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAGxD,MAAA;AACI,UAAA,SAAS,MAAM,WAAW,EAAE;AAClC,QAAI,WAAW,OAAO;AACpB,aAAO,IAAI,SAAS,kBAAkB,EAAE,QAAQ,KAAK;AAAA,IAAA;AAEvD,WAAO,IAAI,SAAS,KAAK,UAAU,EAAE,SAAS,KAAK,CAAC,GAAG,EAAE,QAAQ,KAAK;AAAA,WAC/D,OAAO;AACN,YAAA,MAAM,wBAAwB,KAAK;AAC3C,WAAO,IAAI,SAAS,yBAAyB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAEhE;"}