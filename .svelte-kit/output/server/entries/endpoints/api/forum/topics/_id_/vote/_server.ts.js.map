{"version":3,"file":"_server.ts.js","sources":["../../../../../../../../../../src/routes/api/forum/topics/[id]/vote/+server.ts"],"sourcesContent":["import type { RequestHandler } from '@sveltejs/kit';\nimport { handleTopicVote } from '$lib/services/forums/topicService';\n\nexport const POST: RequestHandler = async ({ request, params }) => {\n  const { user_id, vote_type } = await request.json();\n  \n  // Ensure we have all required parameters\n  if (!params.id) {\n    return new Response('Topic ID is required', { status: 400 });\n  }\n  \n  if (!user_id || ![1, -1].includes(vote_type)) {\n    return new Response('Invalid vote payload', { status: 400 });\n  }\n\n  try {\n    const result = await handleTopicVote(params.id, user_id, vote_type as 1 | -1);\n    return new Response(JSON.stringify(result), { status: 200 });\n  } catch (err) {\n    console.error('Error processing vote:', err);\n    return new Response('Failed to record vote', { status: 500 });\n  }\n};"],"names":[],"mappings":";AAGO,MAAM,OAAuB,OAAO,EAAE,SAAS,aAAa;AACjE,QAAM,EAAE,SAAS,UAAc,IAAA,MAAM,QAAQ,KAAK;AAG9C,MAAA,CAAC,OAAO,IAAI;AACd,WAAO,IAAI,SAAS,wBAAwB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAGzD,MAAA,CAAC,WAAW,CAAC,CAAC,GAAG,EAAE,EAAE,SAAS,SAAS,GAAG;AAC5C,WAAO,IAAI,SAAS,wBAAwB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAGzD,MAAA;AACF,UAAM,SAAS,MAAM,gBAAgB,OAAO,IAAI,SAAS,SAAmB;AACrE,WAAA,IAAI,SAAS,KAAK,UAAU,MAAM,GAAG,EAAE,QAAQ,KAAK;AAAA,WACpD,KAAK;AACJ,YAAA,MAAM,0BAA0B,GAAG;AAC3C,WAAO,IAAI,SAAS,yBAAyB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAEhE;"}