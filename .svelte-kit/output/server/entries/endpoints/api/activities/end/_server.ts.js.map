{"version":3,"file":"_server.ts.js","sources":["../../../../../../../../src/routes/api/activities/end/+server.ts"],"sourcesContent":["import type { RequestHandler } from '@sveltejs/kit';\nimport { pool } from '$lib/services/userService.server';\n\nexport const POST: RequestHandler = async ({ request, locals }) => {\n  const { eventId } = await request.json();\n  const userId = locals.user?.uid;\n  if (!userId) return new Response(null, { status: 401 });\n\n  const now = Date.now();\n  await pool.query(\n    'UPDATE activities SET timestamp_end=$1 WHERE id=$2 AND user_id=$3',\n    [now, eventId, userId]\n  );\n\n  return new Response(null, { status: 204 });\n};"],"names":[],"mappings":";AAGO,MAAM,OAAuB,OAAO,EAAE,SAAS,aAAa;AACjE,QAAM,EAAE,QAAA,IAAY,MAAM,QAAQ,KAAK;AACjC,QAAA,SAAS,OAAO,MAAM;AACxB,MAAA,CAAC,OAAe,QAAA,IAAI,SAAS,MAAM,EAAE,QAAQ,KAAK;AAEhD,QAAA,MAAM,KAAK,IAAI;AACrB,QAAM,KAAK;AAAA,IACT;AAAA,IACA,CAAC,KAAK,SAAS,MAAM;AAAA,EACvB;AAEA,SAAO,IAAI,SAAS,MAAM,EAAE,QAAQ,KAAK;AAC3C;"}