{"version":3,"file":"_server.ts.js","sources":["../../../../../../../../src/routes/api/groups/leave/+server.ts"],"sourcesContent":["import type { RequestHandler } from '@sveltejs/kit';\nimport { leaveGroup } from '$lib/services/groupService';\n\nfunction getUserId(event: any): string | null {\n  return event.locals?.user?.uid || null;\n}\n\nexport const POST: RequestHandler = async (event) => {\n  const userId = getUserId(event);\n  if (!userId) {\n    return new Response('Unauthorized', { status: 401 });\n  }\n\n  const { group_id } = await event.request.json();\n  if (!group_id) {\n    return new Response('Missing group_id', { status: 400 });\n  }\n\n  try {\n    await leaveGroup(group_id, userId);\n    return new Response(JSON.stringify({ success: true }), { status: 200 });\n  } catch (e) {\n    console.error(e);\n    return new Response('Failed to leave group', { status: 500 });\n  }\n};\n"],"names":[],"mappings":";AAGA,SAAS,UAAU,OAA2B;AACrC,SAAA,MAAM,QAAQ,MAAM,OAAO;AACpC;AAEa,MAAA,OAAuB,OAAO,UAAU;AAC7C,QAAA,SAAS,UAAU,KAAK;AAC9B,MAAI,CAAC,QAAQ;AACX,WAAO,IAAI,SAAS,gBAAgB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAGrD,QAAM,EAAE,SAAS,IAAI,MAAM,MAAM,QAAQ,KAAK;AAC9C,MAAI,CAAC,UAAU;AACb,WAAO,IAAI,SAAS,oBAAoB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAGrD,MAAA;AACI,UAAA,WAAW,UAAU,MAAM;AACjC,WAAO,IAAI,SAAS,KAAK,UAAU,EAAE,SAAS,KAAK,CAAC,GAAG,EAAE,QAAQ,KAAK;AAAA,WAC/D,GAAG;AACV,YAAQ,MAAM,CAAC;AACf,WAAO,IAAI,SAAS,yBAAyB,EAAE,QAAQ,KAAK;AAAA,EAAA;AAEhE;"}